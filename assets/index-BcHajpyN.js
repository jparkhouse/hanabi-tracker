var It=Object.defineProperty;var St=(e,t,n)=>t in e?It(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Me=(e,t,n)=>(St(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const i of u.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function q(){}function _t(e){return e()}function $e(){return Object.create(null)}function Y(e){e.forEach(_t)}function gt(e){return typeof e=="function"}function Z(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Oe;function et(e,t){return e===t?!0:(Oe||(Oe=document.createElement("a")),Oe.href=t,e===Oe.href)}function Nt(e){return Object.keys(e).length===0}function Vt(e,...t){if(e==null){for(const r of t)r(void 0);return q}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function E(e,t,n){e.$$.on_destroy.push(Vt(t,n))}function a(e,t){e.appendChild(t)}function T(e,t,n){e.insertBefore(t,n||null)}function L(e){e.parentNode&&e.parentNode.removeChild(e)}function Te(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function y(e){return document.createElement(e)}function W(e){return document.createTextNode(e)}function B(){return W(" ")}function Be(){return W("")}function R(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function We(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function M(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Rt(e){return Array.from(e.childNodes)}function _e(e,t){t=""+t,e.data!==t&&(e.data=t)}function ie(e,t){e.value=t??""}function tt(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function Ie(e,t,n){for(let r=0;r<e.options.length;r+=1){const o=e.options[r];if(o.__value===t){o.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function nt(e){const t=e.querySelector(":checked");return t&&t.__value}let Ge;function we(e){Ge=e}function De(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(r=>r.call(this,t))}const me=[],ve=[];let be=[];const qe=[],At=Promise.resolve();let je=!1;function Bt(){je||(je=!0,At.then(kt))}function ye(e){be.push(e)}function Fe(e){qe.push(e)}const Pe=new Set;let fe=0;function kt(){if(fe!==0)return;const e=Ge;do{try{for(;fe<me.length;){const t=me[fe];fe++,we(t),zt(t.$$)}}catch(t){throw me.length=0,fe=0,t}for(we(null),me.length=0,fe=0;ve.length;)ve.pop()();for(let t=0;t<be.length;t+=1){const n=be[t];Pe.has(n)||(Pe.add(n),n())}be.length=0}while(me.length);for(;qe.length;)qe.pop()();je=!1,Pe.clear(),we(e)}function zt(e){if(e.fragment!==null){e.update(),Y(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ye)}}function Ft(e){const t=[],n=[];be.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),be=t}const Ne=new Set;let se;function Pt(){se={r:0,c:[],p:se}}function Lt(){se.r||Y(se.c),se=se.p}function U(e,t){e&&e.i&&(Ne.delete(e),e.i(t))}function Q(e,t,n,r){if(e&&e.o){if(Ne.has(e))return;Ne.add(e),se.c.push(()=>{Ne.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function ee(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Tt(e,t){Q(e,1,1,()=>{t.delete(e.key)})}function qt(e,t,n,r,o,u,i,l,s,c,f,h){let p=e.length,m=u.length,v=p;const w={};for(;v--;)w[e[v].key]=v;const g=[],b=new Map,H=new Map,d=[];for(v=m;v--;){const N=h(o,u,v),V=n(N);let F=i.get(V);F?r&&d.push(()=>F.p(N,t)):(F=c(V,N),F.c()),b.set(V,g[v]=F),V in w&&H.set(V,Math.abs(v-w[V]))}const O=new Set,k=new Set;function C(N){U(N,1),N.m(l,f),i.set(N.key,N),f=N.first,m--}for(;p&&m;){const N=g[m-1],V=e[p-1],F=N.key,P=V.key;N===V?(f=N.first,p--,m--):b.has(P)?!i.has(F)||O.has(F)?C(N):k.has(P)?p--:H.get(F)>H.get(P)?(k.add(F),C(N)):(O.add(P),p--):(s(V,i),p--)}for(;p--;){const N=e[p];b.has(N.key)||s(N,i)}for(;m;)C(g[m-1]);return Y(d),g}function Le(e,t,n){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function ue(e){e&&e.c()}function te(e,t,n){const{fragment:r,after_update:o}=e.$$;r&&r.m(t,n),ye(()=>{const u=e.$$.on_mount.map(_t).filter(gt);e.$$.on_destroy?e.$$.on_destroy.push(...u):Y(u),e.$$.on_mount=[]}),o.forEach(ye)}function ne(e,t){const n=e.$$;n.fragment!==null&&(Ft(n.after_update),Y(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function jt(e,t){e.$$.dirty[0]===-1&&(me.push(e),Bt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function re(e,t,n,r,o,u,i=null,l=[-1]){const s=Ge;we(e);const c=e.$$={fragment:null,ctx:[],props:u,update:q,not_equal:o,bound:$e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(s?s.$$.context:[])),callbacks:$e(),dirty:l,skip_bound:!1,root:t.target||s.$$.root};i&&i(c.root);let f=!1;if(c.ctx=n?n(e,t.props||{},(h,p,...m)=>{const v=m.length?m[0]:p;return c.ctx&&o(c.ctx[h],c.ctx[h]=v)&&(!c.skip_bound&&c.bound[h]&&c.bound[h](v),f&&jt(e,h)),p}):[],c.update(),f=!0,Y(c.before_update),c.fragment=r?r(c.ctx):!1,t.target){if(t.hydrate){const h=Rt(t.target);c.fragment&&c.fragment.l(h),h.forEach(L)}else c.fragment&&c.fragment.c();t.intro&&U(e.$$.fragment),te(e,t.target,t.anchor),kt()}we(s)}class oe{constructor(){Me(this,"$$");Me(this,"$$set")}$destroy(){ne(this,1),this.$destroy=q}$on(t,n){if(!gt(n))return q;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(t){this.$$set&&!Nt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Wt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Wt);const de=[];function He(e,t=q){let n;const r=new Set;function o(l){if(Z(e,l)&&(e=l,n)){const s=!de.length;for(const c of r)c[1](),de.push(c,e);if(s){for(let c=0;c<de.length;c+=2)de[c][0](de[c+1]);de.length=0}}}function u(l){o(l(e))}function i(l,s=q){const c=[l,s];return r.add(c),r.size===1&&(n=t(o,u)||q),l(e),()=>{r.delete(c),r.size===0&&n&&(n(),n=null)}}return{set:o,update:u,subscribe:i}}const K=He(new Set),Ct=-1,ze=0,Ve=1,Re=2,Ee=3,Ye=4,Je=5,Ue=6,wt=7,vt=8,rt=typeof self=="object"?self:globalThis,Gt=(e,t)=>{const n=(o,u)=>(e.set(u,o),o),r=o=>{if(e.has(o))return e.get(o);const[u,i]=t[o];switch(u){case ze:case Ct:return n(i,o);case Ve:{const l=n([],o);for(const s of i)l.push(r(s));return l}case Re:{const l=n({},o);for(const[s,c]of i)l[r(s)]=r(c);return l}case Ee:return n(new Date(i),o);case Ye:{const{source:l,flags:s}=i;return n(new RegExp(l,s),o)}case Je:{const l=n(new Map,o);for(const[s,c]of i)l.set(r(s),r(c));return l}case Ue:{const l=n(new Set,o);for(const s of i)l.add(r(s));return l}case wt:{const{name:l,message:s}=i;return n(new rt[l](s),o)}case vt:return n(BigInt(i),o);case"BigInt":return n(Object(BigInt(i)),o)}return n(new rt[u](i),o)};return r},ot=e=>Gt(new Map,e)(0),pe="",{toString:Dt}={},{keys:Et}=Object,ke=e=>{const t=typeof e;if(t!=="object"||!e)return[ze,t];const n=Dt.call(e).slice(8,-1);switch(n){case"Array":return[Ve,pe];case"Object":return[Re,pe];case"Date":return[Ee,pe];case"RegExp":return[Ye,pe];case"Map":return[Je,pe];case"Set":return[Ue,pe]}return n.includes("Array")?[Ve,n]:n.includes("Error")?[wt,n]:[Re,n]},Se=([e,t])=>e===ze&&(t==="function"||t==="symbol"),Yt=(e,t,n,r)=>{const o=(i,l)=>{const s=r.push(i)-1;return n.set(l,s),s},u=i=>{if(n.has(i))return n.get(i);let[l,s]=ke(i);switch(l){case ze:{let f=i;switch(s){case"bigint":l=vt,f=i.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+s);f=null;break;case"undefined":return o([Ct],i)}return o([l,f],i)}case Ve:{if(s)return o([s,[...i]],i);const f=[],h=o([l,f],i);for(const p of i)f.push(u(p));return h}case Re:{if(s)switch(s){case"BigInt":return o([s,i.toString()],i);case"Boolean":case"Number":case"String":return o([s,i.valueOf()],i)}if(t&&"toJSON"in i)return u(i.toJSON());const f=[],h=o([l,f],i);for(const p of Et(i))(e||!Se(ke(i[p])))&&f.push([u(p),u(i[p])]);return h}case Ee:return o([l,i.toISOString()],i);case Ye:{const{source:f,flags:h}=i;return o([l,{source:f,flags:h}],i)}case Je:{const f=[],h=o([l,f],i);for(const[p,m]of i)(e||!(Se(ke(p))||Se(ke(m))))&&f.push([u(p),u(m)]);return h}case Ue:{const f=[],h=o([l,f],i);for(const p of i)(e||!Se(ke(p)))&&f.push(u(p));return h}}const{message:c}=i;return o([l,{name:s,message:c}],i)};return u},it=(e,{json:t,lossy:n}={})=>{const r=[];return Yt(!(t||n),!!t,new Map,r)(e),r},Jt=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?ot(it(e,t)):structuredClone(e):(e,t)=>ot(it(e,t));var $=(e=>(e[e.Red=1]="Red",e[e.Yellow=2]="Yellow",e[e.Blue=4]="Blue",e[e.White=8]="White",e[e.Green=16]="Green",e[e.Rainbow=32]="Rainbow",e[e.Black=64]="Black",e))($||{}),ce=(e=>(e[e.NoVariant=31]="NoVariant",e[e.Rainbows=63]="Rainbows",e[e.Blacks=95]="Blacks",e[e.RainbowsAndBlacks=127]="RainbowsAndBlacks",e))(ce||{});const le={1:{stringHint:"Red",colourHint:1,positiveColourHintModifier:null,negativeColourHintModifier:null,positiveNumberHintModifier:null,negativeNumberHintModifier:null},2:{stringHint:"Yellow",colourHint:2,positiveColourHintModifier:null,negativeColourHintModifier:null,positiveNumberHintModifier:null,negativeNumberHintModifier:null},4:{stringHint:"Blue",colourHint:4,positiveColourHintModifier:null,negativeColourHintModifier:null,positiveNumberHintModifier:null,negativeNumberHintModifier:null},8:{stringHint:"White",colourHint:8,positiveColourHintModifier:null,negativeColourHintModifier:null,positiveNumberHintModifier:null,negativeNumberHintModifier:null},16:{stringHint:"Green",colourHint:16,positiveColourHintModifier:null,negativeColourHintModifier:null,positiveNumberHintModifier:null,negativeNumberHintModifier:null},32:{stringHint:null,colourHint:null,positiveColourHintModifier:32,negativeColourHintModifier:32,positiveNumberHintModifier:null,negativeNumberHintModifier:null},64:{stringHint:null,colourHint:null,positiveColourHintModifier:null,negativeColourHintModifier:null,positiveNumberHintModifier:null,negativeNumberHintModifier:null}};function he(e){let t=0,n=[];for(;1<<t<=e;)(1<<t&e)==1<<t&&n.push(1<<t),t=t+1;return n}const ge=He({numberOfCards:4,variant:ce.NoVariant}),yt=He(0);function Ht(){let e=0;return yt.update(t=>(e=t,t+1)),e}class Ut{constructor(t=1/0){Me(this,"storage",[]);this.capacity=t}push(t){if(this.storage.length>=this.capacity){let n=this.storage.length-this.capacity+1;this.storage.splice(0,n)}this.storage.push(t)}pop(){if(this.size()>0)return this.storage.pop();throw console.error("empty stack popped")}peek(){return this.storage[this.storage.length-1]}size(){return this.storage.length}clear(){this.storage=[]}}var D=(e=>(e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=4]="Three",e[e.Four=8]="Four",e[e.Five=16]="Five",e[e.All=31]="All",e))(D||{});function Kt(e){let t=0,n=[];for(;1<<t<=e;)(1<<t&e)==1<<t&&n.push(1<<t),t=t+1;return n}const x=new Ut(5),Ce=He(0);function Xt(){const{subscribe:e,set:t,update:n}=He([]),r=()=>{n(l=>(x.push(Jt(l)),l)),Ce.set(x.size())},o=()=>{if(x.size()>0){const l=x.pop();Ce.set(x.size()),l&&t(l)}else console.warn("No previous state available for rollback");Ce.set(x.size())},u=l=>{x.clear(),Ce.set(x.size());const s=Array.from({length:l.numberOfCards},(c,f)=>({id:Ht(),numberInformation:D.All,colourInformation:l.variant,isHinted:!1,isChopMoved:!1,isFinessed:!1,isCritical:!1}));t(s)},i=ge.subscribe(l=>{yt.set(0),K.update(s=>(s=new Set,s)),u(l)});return{subscribe:e,updateCards:l=>{n(s=>(r(),l(s)))},rollback:o,saveState:r,cleanup:()=>i()}}const ae=Xt();function Qt(e){let t,n,r,o,u;return{c(){t=y("button"),n=W("Play/Discard"),t.disabled=r=e[0].size!==1},m(i,l){T(i,t,l),a(t,n),o||(u=R(t,"click",e[1]),o=!0)},p(i,[l]){l&1&&r!==(r=i[0].size!==1)&&(t.disabled=r)},i:q,o:q,d(i){i&&L(t),o=!1,u()}}}function Zt(e,t,n){let r,o;E(e,ge,l=>n(2,r=l)),E(e,K,l=>n(0,o=l));function u(){if(o.size===1){const l=o.values().next().value;ae.updateCards(s=>{const c=s.filter(f=>f.id!==l);return c.push(i(Ht())),c}),o.clear()}}function i(l){return{id:l,numberInformation:D.All,colourInformation:r.variant,isHinted:!1,isChopMoved:!1,isFinessed:!1,isCritical:!1}}return e.$$.update=()=>{e.$$.dirty&4&&r.variant},[o,u,r]}class xt extends oe{constructor(t){super(),re(this,t,Zt,Qt,Z,{})}}function lt(e){let t,n,r,o,u,i,l,s,c,f,h,p,m,v,w,g,b,H,d,O,k,C,N,V,F;return{c(){t=y("div"),n=y("div"),r=y("div"),o=y("label"),o.textContent="Number of Cards:",u=B(),i=y("select"),l=y("option"),l.textContent="3",s=y("option"),s.textContent="4",c=y("option"),c.textContent="5",f=B(),h=y("label"),h.textContent="Variant:",p=B(),m=y("select"),v=y("option"),v.textContent="No variant",w=y("option"),w.textContent="Rainbows",g=y("option"),g.textContent="Blacks",b=y("option"),b.textContent="Rainbows and Blacks",H=B(),d=y("button"),O=W(e[2]),k=B(),C=y("button"),N=W(e[3]),M(o,"for","numberOfCards"),l.__value="3",ie(l,l.__value),s.__value="4",ie(s,s.__value),c.__value="5",ie(c,c.__value),M(i,"id","numberOfCards"),e[1].numberOfCards===void 0&&ye(()=>e[9].call(i)),M(h,"for","Variant"),v.__value=ce.NoVariant,ie(v,v.__value),w.__value=ce.Rainbows,ie(w,w.__value),g.__value=ce.Blacks,ie(g,g.__value),b.__value=ce.RainbowsAndBlacks,ie(b,b.__value),M(m,"id","Variant"),e[1].variant===void 0&&ye(()=>e[10].call(m)),M(r,"class","config-form svelte-1s43tt7"),M(n,"class","config-modal svelte-1s43tt7"),M(t,"class","modal-overlay svelte-1s43tt7")},m(P,_){T(P,t,_),a(t,n),a(n,r),a(r,o),a(r,u),a(r,i),a(i,l),a(i,s),a(i,c),Ie(i,e[1].numberOfCards,!0),a(r,f),a(r,h),a(r,p),a(r,m),a(m,v),a(m,w),a(m,g),a(m,b),Ie(m,e[1].variant,!0),a(n,H),a(n,d),a(d,O),a(n,k),a(n,C),a(C,N),V||(F=[R(i,"change",e[9]),R(m,"change",e[10]),R(d,"click",e[5]),R(C,"click",e[4]),R(n,"click",We(e[8])),R(t,"click",e[4])],V=!0)},p(P,_){_&2&&Ie(i,P[1].numberOfCards),_&2&&Ie(m,P[1].variant),_&4&&_e(O,P[2]),_&8&&_e(N,P[3])},d(P){P&&L(t),V=!1,Y(F)}}}function $t(e){let t,n=e[0]&&lt(e);return{c(){n&&n.c(),t=Be()},m(r,o){n&&n.m(r,o),T(r,t,o)},p(r,[o]){r[0]?n?n.p(r,o):(n=lt(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:q,o:q,d(r){r&&L(t),n&&n.d(r)}}}function en(e,t){return e.numberOfCards===t.numberOfCards&&e.variant===t.variant}function tn(e,t,n){let r;E(e,ge,v=>n(7,r=v));let{isOpen:o=!1}=t,u={numberOfCards:4,variant:ce.NoVariant},i=!1;function l(){n(0,o=!1),n(6,i=!1)}function s(){ge.set(u),l()}let c="Reset",f="Close";function h(v){De.call(this,e,v)}function p(){u.numberOfCards=nt(this),n(1,u),n(0,o),n(6,i),n(7,r)}function m(){u.variant=nt(this),n(1,u),n(0,o),n(6,i),n(7,r)}return e.$$set=v=>{"isOpen"in v&&n(0,o=v.isOpen)},e.$$.update=()=>{e.$$.dirty&193&&o&&!i&&(n(1,u={...r}),n(6,i=!0)),e.$$.dirty&130&&(en(r,u)?(n(2,c="Reset"),n(3,f="Close")):(n(2,c="Update"),n(3,f="Cancel")))},[o,u,c,f,l,s,i,r,h,p,m]}class nn extends oe{constructor(t){super(),re(this,t,tn,$t,Z,{isOpen:0})}}function st(e,t,n){const r=e.slice();return r[24]=t[n],r}function ut(e,t,n){const r=e.slice();return r[27]=t[n],r}function ct(e){let t,n,r,o,u,i,l,s,c,f,h,p,m,v,w=ee([0,1,2,3,4]),g=[];for(let d=0;d<5;d+=1)g[d]=at(ut(e,w,d));let b=ee(e[2]),H=[];for(let d=0;d<b.length;d+=1)H[d]=ft(st(e,b,d));return{c(){t=y("div"),n=y("div"),r=y("div");for(let d=0;d<5;d+=1)g[d].c();o=B(),u=y("div");for(let d=0;d<H.length;d+=1)H[d].c();i=B(),l=y("div"),s=y("button"),c=W("Save"),h=B(),p=y("button"),p.textContent="Cancel",M(r,"class","numbers-hints svelte-cqarxl"),M(u,"class","colours-hints svelte-cqarxl"),s.disabled=f=!e[1],M(l,"class","actions"),M(n,"class","hint-modal svelte-cqarxl"),M(t,"class","modal-overlay svelte-cqarxl")},m(d,O){T(d,t,O),a(t,n),a(n,r);for(let k=0;k<5;k+=1)g[k]&&g[k].m(r,null);a(n,o),a(n,u);for(let k=0;k<H.length;k+=1)H[k]&&H[k].m(u,null);a(n,i),a(n,l),a(l,s),a(s,c),a(l,h),a(l,p),m||(v=[R(s,"click",e[7]),R(p,"click",e[10]),R(n,"click",We(e[13])),R(t,"click",e[10])],m=!0)},p(d,O){if(O&602){w=ee([0,1,2,3,4]);let k;for(k=0;k<5;k+=1){const C=ut(d,w,k);g[k]?g[k].p(C,O):(g[k]=at(C),g[k].c(),g[k].m(r,null))}for(;k<5;k+=1)g[k].d(1)}if(O&294){b=ee(d[2]);let k;for(k=0;k<b.length;k+=1){const C=st(d,b,k);H[k]?H[k].p(C,O):(H[k]=ft(C),H[k].c(),H[k].m(u,null))}for(;k<H.length;k+=1)H[k].d(1);H.length=b.length}O&2&&f!==(f=!d[1])&&(s.disabled=f)},d(d){d&&L(t),Te(g,d),Te(H,d),m=!1,Y(v)}}}function at(e){let t,n=e[3][e[27]]+"",r,o,u,i;function l(){return e[14](e[27])}return{c(){t=y("button"),r=W(n),M(t,"class",o="btn "+(Ae({type:"number",colourValue:null,numberValue:e[4][e[27]]},e[1])?"selected":"")+" svelte-cqarxl"),t.hidden=!e[6](e[4][e[27]])},m(s,c){T(s,t,c),a(t,r),u||(i=R(t,"click",l),u=!0)},p(s,c){e=s,c&2&&o!==(o="btn "+(Ae({type:"number",colourValue:null,numberValue:e[4][e[27]]},e[1])?"selected":"")+" svelte-cqarxl")&&M(t,"class",o)},d(s){s&&L(t),u=!1,i()}}}function ft(e){let t,n=le[e[24]].stringHint+"",r,o,u,i,l;function s(){return e[15](e[24])}return{c(){t=y("button"),r=W(n),M(t,"class",o="btn "+(Ae({type:"colour",colourValue:e[24],numberValue:null},e[1])?"selected":"")+" svelte-cqarxl"),t.hidden=u=!e[5](e[24])},m(c,f){T(c,t,f),a(t,r),i||(l=R(t,"click",s),i=!0)},p(c,f){e=c,f&4&&n!==(n=le[e[24]].stringHint+"")&&_e(r,n),f&6&&o!==(o="btn "+(Ae({type:"colour",colourValue:e[24],numberValue:null},e[1])?"selected":"")+" svelte-cqarxl")&&M(t,"class",o),f&4&&u!==(u=!e[5](e[24]))&&(t.hidden=u)},d(c){c&&L(t),i=!1,l()}}}function rn(e){let t,n=e[0]&&ct(e);return{c(){n&&n.c(),t=Be()},m(r,o){n&&n.m(r,o),T(r,t,o)},p(r,[o]){r[0]?n?n.p(r,o):(n=ct(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:q,o:q,d(r){r&&L(t),n&&n.d(r)}}}function Ae(e,t){console.log("Checking hint:",e,"against selectedHint:",t);const n=e.type===t.type&&e.colourValue===t.colourValue&&e.numberValue===t.numberValue;return console.log("Result:",n),t&&n}function on(e,t,n){let r,o,u,i;E(e,K,_=>n(16,o=_)),E(e,ae,_=>n(17,u=_)),E(e,ge,_=>n(12,i=_));let{isOpen:l=!1}=t,s={type:null,colourValue:null,numberValue:null},c=[],f=["1","2","3","4","5"],h=[D.One,D.Two,D.Three,D.Four,D.Five];function p(_){return Array.from(o).every(X=>{const A=u.find(j=>j.id===X);if(A){const j=v(A);return(A.colourInformation&(_|j))>0}else return!1})}function m(_){return Array.from(o).every(X=>{const A=u.find(j=>j.id===X);if(A){const j=w(A);return(A.numberInformation&(_|j))>0}else return!1})}function v(_){return he(_.colourInformation).map(S=>le[S].positiveColourHintModifier).filter(S=>S!==null).reduce((S,z)=>S|z,0)}function w(_){return he(_.colourInformation).map(S=>le[S].positiveNumberHintModifier).filter(S=>S!==null).reduce((S,z)=>S|z,0)}function g(_){return he(_.colourInformation).map(S=>le[S].negativeColourHintModifier).filter(S=>S!==null).reduce((S,z)=>S|z,0)}function b(_){return he(_.colourInformation).map(S=>le[S].negativeNumberHintModifier).filter(S=>S!==null).reduce((S,z)=>S|z,0)}function H(){s.type&&(s.type=="colour"&&s.colourValue!==null?d(s.colourValue):s.type=="number"&&s.numberValue!==null&&O(s.numberValue),K.update(_=>(_=new Set,_)),N())}function d(_){const S=Array.from(o);ae.updateCards(z=>z.map(A=>{if(S.includes(A.id)){const j=v(A),J=A.colourInformation&(_|j);return{...A,colourInformation:J,isHinted:!0}}else{const j=g(A),J=A.colourInformation&~(_|j);return{...A,colourInformation:J}}}))}function O(_){const S=Array.from(o);ae.updateCards(z=>z.map(A=>{if(S.includes(A.id)){const j=w(A),J=A.numberInformation&(_|j);return{...A,numberInformation:J,isHinted:!0}}else{const j=b(A),J=A.numberInformation&~(_|j);return{...A,numberInformation:J}}}))}function k(_){n(1,s={type:"colour",colourValue:_,numberValue:null})}function C(_){n(1,s={type:"number",colourValue:null,numberValue:_})}function N(){n(0,l=!1),n(1,s={type:null,colourValue:null,numberValue:null})}function V(_){De.call(this,e,_)}const F=_=>C(h[_]),P=_=>k(_);return e.$$set=_=>{"isOpen"in _&&n(0,l=_.isOpen)},e.$$.update=()=>{e.$$.dirty&4096&&n(11,r=i.variant),e.$$.dirty&2048&&n(2,c=he(r).filter(_=>le[_].stringHint!=null)),e.$$.dirty&2&&console.log(s)},[l,s,c,f,h,p,m,H,k,C,N,r,i,V,F,P]}class ln extends oe{constructor(t){super(),re(this,t,on,rn,Z,{isOpen:0})}}function dt(e){let t,n,r,o,u,i,l,s,c,f,h,p,m,v,w,g,b;return{c(){t=y("div"),n=y("div"),r=y("div"),o=y("button"),o.textContent="Critical",u=B(),i=y("button"),i.textContent="Chop moved",l=B(),s=y("button"),s.textContent="Finessed",c=B(),f=y("div"),h=y("button"),p=W("Save"),v=B(),w=y("button"),w.textContent="Cancel",M(o,"class","btn"),M(i,"class","btn"),M(s,"class","btn"),M(r,"class","flags svelte-7kvbz8"),h.disabled=m=!e[1],M(f,"class","actions"),M(n,"class","mark-modal svelte-7kvbz8"),M(t,"class","modal-overlay svelte-7kvbz8")},m(H,d){T(H,t,d),a(t,n),a(n,r),a(r,o),a(r,u),a(r,i),a(r,l),a(r,s),a(n,c),a(n,f),a(f,h),a(h,p),a(f,v),a(f,w),g||(b=[R(o,"click",e[5]),R(i,"click",e[6]),R(s,"click",e[7]),R(h,"click",e[3]),R(w,"click",e[2]),R(n,"click",We(e[4])),R(t,"click",e[2])],g=!0)},p(H,d){d&2&&m!==(m=!H[1])&&(h.disabled=m)},d(H){H&&L(t),g=!1,Y(b)}}}function sn(e){let t,n=e[0]&&dt(e);return{c(){n&&n.c(),t=Be()},m(r,o){n&&n.m(r,o),T(r,t,o)},p(r,[o]){r[0]?n?n.p(r,o):(n=dt(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:q,o:q,d(r){r&&L(t),n&&n.d(r)}}}function un(e,t,n){let r;E(e,K,p=>n(8,r=p));let{isOpen:o=!1}=t,u=null;function i(){n(1,u=null),n(0,o=!1)}function l(){const p=Array.from(r);ae.updateCards(m=>m.map(w=>{if(p.includes(w.id))switch(u){case"critical":w.isCritical=!w.isCritical;break;case"chop-move":w.isChopMoved=!w.isChopMoved;break;case"finesse":w.isFinessed=!w.isFinessed;break}return w})),K.update(m=>(m=new Set,m)),i()}function s(p){De.call(this,e,p)}const c=()=>n(1,u="critical"),f=()=>n(1,u="chop-move"),h=()=>n(1,u="finesse");return e.$$set=p=>{"isOpen"in p&&n(0,o=p.isOpen)},[o,u,i,l,s,c,f,h]}class cn extends oe{constructor(t){super(),re(this,t,un,sn,Z,{isOpen:0})}}function an(e){let t,n,r,o,u,i,l,s,c,f,h,p,m,v,w,g,b,H,d,O,k,C,N,V,F,P,_,S,z,X,A;l=new xt({});function j(I){e[14](I)}let J={};e[1]!==void 0&&(J.isOpen=e[1]),k=new nn({props:J}),ve.push(()=>Le(k,"isOpen",j));function Mt(I){e[15](I)}let Ke={};e[2]!==void 0&&(Ke.isOpen=e[2]),V=new ln({props:Ke}),ve.push(()=>Le(V,"isOpen",Mt));function Ot(I){e[16](I)}let Xe={};return e[3]!==void 0&&(Xe.isOpen=e[3]),_=new cn({props:Xe}),ve.push(()=>Le(_,"isOpen",Ot)),{c(){t=y("div"),n=y("button"),n.textContent="Configure Game",r=B(),o=y("button"),u=W(e[0]),i=B(),ue(l.$$.fragment),s=B(),c=y("button"),f=W("Record Hint"),p=B(),m=y("button"),v=W("Mark cards"),g=B(),b=y("button"),H=W("Undo"),O=B(),ue(k.$$.fragment),N=B(),ue(V.$$.fragment),P=B(),ue(_.$$.fragment),M(n,"class","configure svelte-9e6wy5"),M(o,"class","wake-lock"),o.hidden=!e[6],M(c,"class","hint-panel svelte-9e6wy5"),c.disabled=h=e[5].size<1,M(m,"class","mark-panel"),m.disabled=w=e[5].size<1,M(b,"class","undo"),b.disabled=d=e[4]<1,M(t,"class","game-controls svelte-9e6wy5")},m(I,G){T(I,t,G),a(t,n),a(t,r),a(t,o),a(o,u),a(t,i),te(l,t,null),a(t,s),a(t,c),a(c,f),a(t,p),a(t,m),a(m,v),a(t,g),a(t,b),a(b,H),T(I,O,G),te(k,I,G),T(I,N,G),te(V,I,G),T(I,P,G),te(_,I,G),z=!0,X||(A=[R(n,"click",e[8]),R(o,"click",e[7]),R(c,"click",e[9]),R(m,"click",e[10]),R(b,"click",e[11])],X=!0)},p(I,[G]){(!z||G&1)&&_e(u,I[0]),(!z||G&32&&h!==(h=I[5].size<1))&&(c.disabled=h),(!z||G&32&&w!==(w=I[5].size<1))&&(m.disabled=w),(!z||G&16&&d!==(d=I[4]<1))&&(b.disabled=d);const Qe={};!C&&G&2&&(C=!0,Qe.isOpen=I[1],Fe(()=>C=!1)),k.$set(Qe);const Ze={};!F&&G&4&&(F=!0,Ze.isOpen=I[2],Fe(()=>F=!1)),V.$set(Ze);const xe={};!S&&G&8&&(S=!0,xe.isOpen=I[3],Fe(()=>S=!1)),_.$set(xe)},i(I){z||(U(l.$$.fragment,I),U(k.$$.fragment,I),U(V.$$.fragment,I),U(_.$$.fragment,I),z=!0)},o(I){Q(l.$$.fragment,I),Q(k.$$.fragment,I),Q(V.$$.fragment,I),Q(_.$$.fragment,I),z=!1},d(I){I&&(L(t),L(O),L(N),L(P)),ne(l),ne(k,I),ne(V,I),ne(_,I),X=!1,Y(A)}}}function fn(e,t,n){let r,o,u;E(e,Ce,O=>n(13,o=O)),E(e,K,O=>n(5,u=O));let i=null,l="wakeLock"in navigator,s="Wake Lock Off";async function c(){if(i)i.release(),n(12,i=null),n(0,s="Wake Lock Off");else try{n(12,i=await navigator.wakeLock.request("screen")),i.addEventListener("release",()=>{n(12,i=null),n(0,s="Wake Lock Off")}),n(0,s="Wake Lock On")}catch(O){console.error(`Could not acquire wake lock: ${O}`)}}let f=!1;function h(){n(1,f=!0)}let p=!1;function m(){n(2,p=!0)}let v=!1;function w(){n(3,v=!0)}function g(){ae.rollback()}function b(O){f=O,n(1,f)}function H(O){p=O,n(2,p)}function d(O){v=O,n(3,v)}return e.$$.update=()=>{e.$$.dirty&4096&&(i?n(0,s="Wake Lock On"):n(0,s="Wake Lock Off")),e.$$.dirty&8192&&n(4,r=o)},[s,f,p,v,r,u,l,c,h,m,w,g,i,o,b,H,d]}class dn extends oe{constructor(t){super(),re(this,t,fn,an,Z,{})}}function pt(e,t,n){const r=e.slice();return r[20]=t[n],r}function mt(e){let t,n;return{c(){t=y("img"),et(t.src,n=e[20])||M(t,"src",n),M(t,"alt","colour icon"),M(t,"class","icon svelte-pr30kl")},m(r,o){T(r,t,o)},p(r,o){o&16&&!et(t.src,n=r[20])&&M(t,"src",n)},d(r){r&&L(t)}}}function pn(e){let t,n,r,o=e[0]+1+"",u,i,l,s=e[7](e[1])+"",c,f,h,p,m,v,w=ee(e[4]),g=[];for(let b=0;b<w.length;b+=1)g[b]=mt(pt(e,w,b));return{c(){t=y("div"),n=y("p"),r=W("Card "),u=W(o),i=B(),l=y("p"),c=W(s),f=B(),h=y("div");for(let b=0;b<g.length;b+=1)g[b].c();M(h,"class","icons svelte-pr30kl"),M(t,"class",p="card no-"+e[6]+" "+(e[3]!=null?e[3]:"")+" svelte-pr30kl"),M(t,"tabindex","0"),M(t,"role","button"),tt(t,"border-color",e[5])},m(b,H){T(b,t,H),a(t,n),a(n,r),a(n,u),a(t,i),a(t,l),a(l,c),a(t,f),a(t,h);for(let d=0;d<g.length;d+=1)g[d]&&g[d].m(h,null);m||(v=[R(t,"click",e[15]),R(t,"keydown",e[16])],m=!0)},p(b,[H]){if(H&1&&o!==(o=b[0]+1+"")&&_e(u,o),H&2&&s!==(s=b[7](b[1])+"")&&_e(c,s),H&16){w=ee(b[4]);let d;for(d=0;d<w.length;d+=1){const O=pt(b,w,d);g[d]?g[d].p(O,H):(g[d]=mt(O),g[d].c(),g[d].m(h,null))}for(;d<g.length;d+=1)g[d].d(1);g.length=w.length}H&72&&p!==(p="card no-"+b[6]+" "+(b[3]!=null?b[3]:"")+" svelte-pr30kl")&&M(t,"class",p),H&32&&tt(t,"border-color",b[5])},i:q,o:q,d(b){b&&L(t),Te(g,b),m=!1,Y(v)}}}function mn(e,t,n){let r,o,u;E(e,ge,C=>n(14,u=C));let{id:i}=t,{numberInformation:l}=t,{colourInformation:s}=t,{selected:c=!1}=t,{isHinted:f}=t,{isFinessed:h}=t,{isChopMoved:p}=t,{isCritical:m}=t,{onSelect:v}=t,w=null,g=[];function b(C){return Kt(C).map(V=>d(V)).join(" ")}function H(C){switch(C){case $.Red:return"red";case $.Yellow:return"yellow";case $.Blue:return"blue";case $.White:return"white";case $.Green:return"green";case $.Rainbow:return"rainbow";case $.Black:return"black"}}function d(C){switch(C){case D.One:return"1";case D.Two:return"2";case D.Three:return"3";case D.Four:return"4";case D.Five:return"5";case D.All:return"1 2 3 4 5"}}const O=()=>v(i),k=C=>(C.key==="Enter"||C.key===" ")&&v(i);return e.$$set=C=>{"id"in C&&n(0,i=C.id),"numberInformation"in C&&n(1,l=C.numberInformation),"colourInformation"in C&&n(8,s=C.colourInformation),"selected"in C&&n(9,c=C.selected),"isHinted"in C&&n(10,f=C.isHinted),"isFinessed"in C&&n(11,h=C.isFinessed),"isChopMoved"in C&&n(12,p=C.isChopMoved),"isCritical"in C&&n(13,m=C.isCritical),"onSelect"in C&&n(2,v=C.onSelect)},e.$$.update=()=>{e.$$.dirty&16384&&u.variant,e.$$.dirty&16384&&n(6,r=u.numberOfCards),e.$$.dirty&15872&&n(5,o=c?"blue":m?"red":f?"orange":h?"aqua":p?"white":"gray"),e.$$.dirty&256&&(s&s-1?n(3,w=null):n(3,w=H(s))),e.$$.dirty&264&&(w=="rainbow"?n(4,g=["rainbow-empty.svg"]):w!==null?n(4,g=[`${w}.svg`]):n(4,g=he(s).map(C=>`${H(C)}.svg`)))},[i,l,v,w,g,o,r,b,s,c,f,h,p,m,u,O,k]}class hn extends oe{constructor(t){super(),re(this,t,mn,pn,Z,{id:0,numberInformation:1,colourInformation:8,selected:9,isHinted:10,isFinessed:11,isChopMoved:12,isCritical:13,onSelect:2})}}function ht(e,t,n){const r=e.slice();return r[3]=t[n],r}function bt(e,t){let n,r,o;return r=new hn({props:{id:t[3].id,numberInformation:t[3].numberInformation,colourInformation:t[3].colourInformation,selected:t[0].has(t[3].id),isHinted:t[3].isHinted,isChopMoved:t[3].isChopMoved,isFinessed:t[3].isFinessed,isCritical:t[3].isCritical,onSelect:t[2]}}),{key:e,first:null,c(){n=Be(),ue(r.$$.fragment),this.first=n},m(u,i){T(u,n,i),te(r,u,i),o=!0},p(u,i){t=u;const l={};i&2&&(l.id=t[3].id),i&2&&(l.numberInformation=t[3].numberInformation),i&2&&(l.colourInformation=t[3].colourInformation),i&3&&(l.selected=t[0].has(t[3].id)),i&2&&(l.isHinted=t[3].isHinted),i&2&&(l.isChopMoved=t[3].isChopMoved),i&2&&(l.isFinessed=t[3].isFinessed),i&2&&(l.isCritical=t[3].isCritical),r.$set(l)},i(u){o||(U(r.$$.fragment,u),o=!0)},o(u){Q(r.$$.fragment,u),o=!1},d(u){u&&L(n),ne(r,u)}}}function bn(e){let t,n=[],r=new Map,o,u=ee(e[1]);const i=l=>l[3].id;for(let l=0;l<u.length;l+=1){let s=ht(e,u,l),c=i(s);r.set(c,n[l]=bt(c,s))}return{c(){t=y("div");for(let l=0;l<n.length;l+=1)n[l].c();M(t,"class","hand svelte-insnbi")},m(l,s){T(l,t,s);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(t,null);o=!0},p(l,[s]){s&7&&(u=ee(l[1]),Pt(),n=qt(n,s,i,1,l,u,r,t,Tt,bt,null,ht),Lt())},i(l){if(!o){for(let s=0;s<u.length;s+=1)U(n[s]);o=!0}},o(l){for(let s=0;s<n.length;s+=1)Q(n[s]);o=!1},d(l){l&&L(t);for(let s=0;s<n.length;s+=1)n[s].d()}}}function _n(e,t,n){let r,o;E(e,K,i=>n(0,r=i)),E(e,ae,i=>n(1,o=i));function u(i){r.has(i)?K.update(l=>{const s=new Set(l);return s.delete(i),s}):K.update(l=>{const s=new Set(l);return s.add(i),s})}return[r,o,u]}class gn extends oe{constructor(t){super(),re(this,t,_n,bn,Z,{})}}function kn(e){let t,n,r,o,u,i,l;return n=new dn({}),o=new gn({}),{c(){t=y("main"),ue(n.$$.fragment),r=B(),ue(o.$$.fragment),u=B(),i=y("a"),i.textContent="Check out my code!",M(i,"href","https://github.com/jparkhouse/hanabi-tracker/"),M(i,"target","_blank")},m(s,c){T(s,t,c),te(n,t,null),a(t,r),te(o,t,null),a(t,u),a(t,i),l=!0},p:q,i(s){l||(U(n.$$.fragment,s),U(o.$$.fragment,s),l=!0)},o(s){Q(n.$$.fragment,s),Q(o.$$.fragment,s),l=!1},d(s){s&&L(t),ne(n),ne(o)}}}class Cn extends oe{constructor(t){super(),re(this,t,null,kn,Z,{})}}new Cn({target:document.getElementById("app")});
