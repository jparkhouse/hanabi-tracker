var yt=Object.defineProperty;var It=(e,t,n)=>t in e?yt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ce=(e,t,n)=>(It(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const u of r)if(u.type==="childList")for(const i of u.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const u={};return r.integrity&&(u.integrity=r.integrity),r.referrerPolicy&&(u.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?u.credentials="include":r.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(r){if(r.ep)return;r.ep=!0;const u=n(r);fetch(r.href,u)}})();function W(){}function dt(e){return e()}function Ue(){return Object.create(null)}function K(e){e.forEach(dt)}function mt(e){return typeof e=="function"}function x(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ye;function Ke(e,t){return e===t?!0:(ye||(ye=document.createElement("a")),ye.href=t,e===ye.href)}function wt(e){return Object.keys(e).length===0}function vt(e,...t){if(e==null){for(const o of t)o(void 0);return W}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Y(e,t,n){e.$$.on_destroy.push(vt(t,n))}function d(e,t){e.appendChild(t)}function D(e,t,n){e.insertBefore(t,n||null)}function T(e){e.parentNode&&e.parentNode.removeChild(e)}function Pe(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function w(e){return document.createElement(e)}function J(e){return document.createTextNode(e)}function R(){return J(" ")}function Ee(){return J("")}function B(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function S(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ot(e){return Array.from(e.childNodes)}function Re(e,t){t=""+t,e.data!==t&&(e.data=t)}function se(e,t){e.value=t??""}function Xe(e,t,n,o){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function Ie(e,t,n){for(let o=0;o<e.options.length;o+=1){const r=e.options[o];if(r.__value===t){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Qe(e){const t=e.querySelector(":checked");return t&&t.__value}let qe;function he(e){qe=e}const fe=[],_e=[];let de=[];const Le=[],St=Promise.resolve();let Ve=!1;function Mt(){Ve||(Ve=!0,St.then(pt))}function ge(e){de.push(e)}function Ae(e){Le.push(e)}const ze=new Set;let ue=0;function pt(){if(ue!==0)return;const e=qe;do{try{for(;ue<fe.length;){const t=fe[ue];ue++,he(t),Et(t.$$)}}catch(t){throw fe.length=0,ue=0,t}for(he(null),fe.length=0,ue=0;_e.length;)_e.pop()();for(let t=0;t<de.length;t+=1){const n=de[t];ze.has(n)||(ze.add(n),n())}de.length=0}while(fe.length);for(;Le.length;)Le.pop()();Ve=!1,ze.clear(),he(e)}function Et(e){if(e.fragment!==null){e.update(),K(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ge)}}function Ht(e){const t=[],n=[];de.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),de=t}const Oe=new Set;let ie;function At(){ie={r:0,c:[],p:ie}}function zt(){ie.r||K(ie.c),ie=ie.p}function X(e,t){e&&e.i&&(Oe.delete(e),e.i(t))}function Z(e,t,n,o){if(e&&e.o){if(Oe.has(e))return;Oe.add(e),ie.c.push(()=>{Oe.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function ee(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Nt(e,t){Z(e,1,1,()=>{t.delete(e.key)})}function Pt(e,t,n,o,r,u,i,s,l,c,f,_){let C=e.length,b=u.length,y=C;const O={};for(;y--;)O[e[y].key]=y;const g=[],k=new Map,v=new Map,m=[];for(y=b;y--;){const z=_(r,u,y),N=n(z);let V=i.get(N);V?o&&m.push(()=>V.p(z,t)):(V=c(N,z),V.c()),k.set(N,g[y]=V),N in O&&v.set(N,Math.abs(y-O[N]))}const M=new Set,a=new Set;function L(z){X(z,1),z.m(s,f),i.set(z.key,z),f=z.first,b--}for(;C&&b;){const z=g[b-1],N=e[C-1],V=z.key,p=N.key;z===N?(f=z.first,C--,b--):k.has(p)?!i.has(V)||M.has(V)?L(z):a.has(p)?C--:v.get(V)>v.get(p)?(a.add(V),L(z)):(M.add(p),C--):(l(N,i),C--)}for(;C--;){const z=e[C];k.has(z.key)||l(z,i)}for(;b;)L(g[b-1]);return K(m),g}function Ne(e,t,n){const o=e.$$.props[t];o!==void 0&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function le(e){e&&e.c()}function te(e,t,n){const{fragment:o,after_update:r}=e.$$;o&&o.m(t,n),ge(()=>{const u=e.$$.on_mount.map(dt).filter(mt);e.$$.on_destroy?e.$$.on_destroy.push(...u):K(u),e.$$.on_mount=[]}),r.forEach(ge)}function ne(e,t){const n=e.$$;n.fragment!==null&&(Ht(n.after_update),K(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Rt(e,t){e.$$.dirty[0]===-1&&(fe.push(e),Mt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function oe(e,t,n,o,r,u,i=null,s=[-1]){const l=qe;he(e);const c=e.$$={fragment:null,ctx:[],props:u,update:W,not_equal:r,bound:Ue(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:Ue(),dirty:s,skip_bound:!1,root:t.target||l.$$.root};i&&i(c.root);let f=!1;if(c.ctx=n?n(e,t.props||{},(_,C,...b)=>{const y=b.length?b[0]:C;return c.ctx&&r(c.ctx[_],c.ctx[_]=y)&&(!c.skip_bound&&c.bound[_]&&c.bound[_](y),f&&Rt(e,_)),C}):[],c.update(),f=!0,K(c.before_update),c.fragment=o?o(c.ctx):!1,t.target){if(t.hydrate){const _=Ot(t.target);c.fragment&&c.fragment.l(_),_.forEach(T)}else c.fragment&&c.fragment.c();t.intro&&X(e.$$.fragment),te(e,t.target,t.anchor),pt()}he(l)}class re{constructor(){Ce(this,"$$");Ce(this,"$$set")}$destroy(){ne(this,1),this.$destroy=W}$on(t,n){if(!mt(n))return W;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const r=o.indexOf(n);r!==-1&&o.splice(r,1)}}$set(t){this.$$set&&!wt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Lt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Lt);const ce=[];function ke(e,t=W){let n;const o=new Set;function r(s){if(x(e,s)&&(e=s,n)){const l=!ce.length;for(const c of o)c[1](),ce.push(c,e);if(l){for(let c=0;c<ce.length;c+=2)ce[c][0](ce[c+1]);ce.length=0}}}function u(s){r(s(e))}function i(s,l=W){const c=[s,l];return o.add(c),o.size===1&&(n=t(r,u)||W),s(e),()=>{o.delete(c),o.size===0&&n&&(n(),n=null)}}return{set:r,update:u,subscribe:i}}const Q=ke(new Set),bt=-1,He=0,Se=1,Me=2,Be=3,Fe=4,je=5,Te=6,ht=7,_t=8,Ze=typeof self=="object"?self:globalThis,Vt=(e,t)=>{const n=(r,u)=>(e.set(u,r),r),o=r=>{if(e.has(r))return e.get(r);const[u,i]=t[r];switch(u){case He:case bt:return n(i,r);case Se:{const s=n([],r);for(const l of i)s.push(o(l));return s}case Me:{const s=n({},r);for(const[l,c]of i)s[o(l)]=o(c);return s}case Be:return n(new Date(i),r);case Fe:{const{source:s,flags:l}=i;return n(new RegExp(s,l),r)}case je:{const s=n(new Map,r);for(const[l,c]of i)s.set(o(l),o(c));return s}case Te:{const s=n(new Set,r);for(const l of i)s.add(o(l));return s}case ht:{const{name:s,message:l}=i;return n(new Ze[s](l),r)}case _t:return n(BigInt(i),r);case"BigInt":return n(Object(BigInt(i)),r)}return n(new Ze[u](i),r)};return o},xe=e=>Vt(new Map,e)(0),ae="",{toString:qt}={},{keys:Bt}=Object,pe=e=>{const t=typeof e;if(t!=="object"||!e)return[He,t];const n=qt.call(e).slice(8,-1);switch(n){case"Array":return[Se,ae];case"Object":return[Me,ae];case"Date":return[Be,ae];case"RegExp":return[Fe,ae];case"Map":return[je,ae];case"Set":return[Te,ae]}return n.includes("Array")?[Se,n]:n.includes("Error")?[ht,n]:[Me,n]},we=([e,t])=>e===He&&(t==="function"||t==="symbol"),Ft=(e,t,n,o)=>{const r=(i,s)=>{const l=o.push(i)-1;return n.set(s,l),l},u=i=>{if(n.has(i))return n.get(i);let[s,l]=pe(i);switch(s){case He:{let f=i;switch(l){case"bigint":s=_t,f=i.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+l);f=null;break;case"undefined":return r([bt],i)}return r([s,f],i)}case Se:{if(l)return r([l,[...i]],i);const f=[],_=r([s,f],i);for(const C of i)f.push(u(C));return _}case Me:{if(l)switch(l){case"BigInt":return r([l,i.toString()],i);case"Boolean":case"Number":case"String":return r([l,i.valueOf()],i)}if(t&&"toJSON"in i)return u(i.toJSON());const f=[],_=r([s,f],i);for(const C of Bt(i))(e||!we(pe(i[C])))&&f.push([u(C),u(i[C])]);return _}case Be:return r([s,i.toISOString()],i);case Fe:{const{source:f,flags:_}=i;return r([s,{source:f,flags:_}],i)}case je:{const f=[],_=r([s,f],i);for(const[C,b]of i)(e||!(we(pe(C))||we(pe(b))))&&f.push([u(C),u(b)]);return _}case Te:{const f=[],_=r([s,f],i);for(const C of i)(e||!we(pe(C)))&&f.push(u(C));return _}}const{message:c}=i;return r([s,{name:l,message:c}],i)};return u},$e=(e,{json:t,lossy:n}={})=>{const o=[];return Ft(!(t||n),!!t,new Map,o)(e),o},jt=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?xe($e(e,t)):structuredClone(e):(e,t)=>xe($e(e,t)),me=ke({numberOfCards:4,variant:"no-variant"}),gt=ke(0);function kt(){let e=0;return gt.update(t=>(e=t,t+1)),e}class Tt{constructor(t=1/0){Ce(this,"storage",[]);this.capacity=t}push(t){if(this.storage.length>=this.capacity){let n=this.storage.length-this.capacity+1;this.storage.splice(0,n)}this.storage.push(t)}pop(){if(this.size()>0)return this.storage.pop();throw console.error("empty stack popped")}peek(){return this.storage[this.storage.length-1]}size(){return this.storage.length}clear(){this.storage=[]}}const $=new Tt(5),be=ke(0);function Dt(){const{subscribe:e,set:t,update:n}=ke([]),o=()=>{n(s=>($.push(jt(s)),s)),be.set($.size())},r=()=>{if($.size()>0){const s=$.pop();be.set($.size()),s&&t(s)}else console.warn("No previous state available for rollback");be.set($.size())},u=s=>{$.clear(),be.set($.size());const l=Array.from({length:s.numberOfCards},(c,f)=>({id:kt(),numberInformation:Array(5).fill(null),colourInformation:Array(s.variant==="no-variant"?5:s.variant==="rainbows"||s.variant==="blacks"?6:7).fill(null),isHinted:!1,isChopMoved:!1,isFinessed:!1,isCritical:!1}));t(l)},i=me.subscribe(s=>{gt.set(0),Q.update(l=>(l=new Set,l)),u(s)});return{subscribe:e,updateCards:s=>{n(l=>(o(),s(l)))},rollback:r,saveState:o,cleanup:()=>i()}}const U=Dt();function Wt(e){let t,n,o,r,u;return{c(){t=w("button"),n=J("Play/Discard"),t.disabled=o=e[0].size!==1},m(i,s){D(i,t,s),d(t,n),r||(u=B(t,"click",e[1]),r=!0)},p(i,[s]){s&1&&o!==(o=i[0].size!==1)&&(t.disabled=o)},i:W,o:W,d(i){i&&T(t),r=!1,u()}}}function Gt(e,t,n){let o,r,u;Y(e,Q,l=>n(0,r=l)),Y(e,me,l=>n(2,u=l));function i(){if(r.size===1){const l=r.values().next().value;U.updateCards(c=>{const f=c.filter(_=>_.id!==l);return f.push(s(kt())),f}),r.clear()}}function s(l){return{id:l,numberInformation:Array(5).fill(null),colourInformation:Array(o==="no-variant"?5:o==="rainbows"||o==="blacks"?6:7).fill(null),isHinted:!1,isChopMoved:!1,isFinessed:!1,isCritical:!1}}return e.$$.update=()=>{e.$$.dirty&4&&(o=u.variant)},[r,i,u]}class Jt extends re{constructor(t){super(),oe(this,t,Gt,Wt,x,{})}}function et(e){let t,n,o,r,u,i,s,l,c,f,_,C,b,y,O,g,k,v,m,M,a,L,z;return{c(){t=w("div"),n=w("div"),o=w("div"),r=w("label"),r.textContent="Number of Cards:",u=R(),i=w("select"),s=w("option"),s.textContent="3",l=w("option"),l.textContent="4",c=w("option"),c.textContent="5",f=R(),_=w("label"),_.textContent="Variant:",C=R(),b=w("select"),y=w("option"),y.textContent="No variant",O=w("option"),O.textContent="Rainbows",g=w("option"),g.textContent="Blacks",k=w("option"),k.textContent="Rainbows and Blacks",v=R(),m=w("button"),m.textContent="Save",M=R(),a=w("button"),a.textContent="Cancel",S(r,"for","numberOfCards"),s.__value="3",se(s,s.__value),l.__value="4",se(l,l.__value),c.__value="5",se(c,c.__value),S(i,"id","numberOfCards"),e[1].numberOfCards===void 0&&ge(()=>e[5].call(i)),S(_,"for","Variant"),y.__value="no-variant",se(y,y.__value),O.__value="rainbows",se(O,O.__value),g.__value="blacks",se(g,g.__value),k.__value="rainbows-and-blacks",se(k,k.__value),S(b,"id","Variant"),e[1].variant===void 0&&ge(()=>e[6].call(b)),S(o,"class","config-form svelte-16v23fx"),S(n,"class","config-modal svelte-16v23fx"),S(t,"class","modal-overlay svelte-16v23fx")},m(N,V){D(N,t,V),d(t,n),d(n,o),d(o,r),d(o,u),d(o,i),d(i,s),d(i,l),d(i,c),Ie(i,e[1].numberOfCards,!0),d(o,f),d(o,_),d(o,C),d(o,b),d(b,y),d(b,O),d(b,g),d(b,k),Ie(b,e[1].variant,!0),d(n,v),d(n,m),d(n,M),d(n,a),L||(z=[B(i,"change",e[5]),B(b,"change",e[6]),B(m,"click",e[3]),B(a,"click",e[2])],L=!0)},p(N,V){V&2&&Ie(i,N[1].numberOfCards),V&2&&Ie(b,N[1].variant)},d(N){N&&T(t),L=!1,K(z)}}}function Yt(e){let t,n=e[0]&&et(e);return{c(){n&&n.c(),t=Ee()},m(o,r){n&&n.m(o,r),D(o,t,r)},p(o,[r]){o[0]?n?n.p(o,r):(n=et(o),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:W,o:W,d(o){o&&T(t),n&&n.d(o)}}}function Ut(e,t,n){let o;Y(e,me,f=>n(4,o=f));let{isOpen:r=!1}=t,u={numberOfCards:4,variant:"no-variant"};function i(){n(0,r=!1)}function s(){me.set(u),i()}function l(){u.numberOfCards=Qe(this),n(1,u),n(0,r),n(4,o)}function c(){u.variant=Qe(this),n(1,u),n(0,r),n(4,o)}return e.$$set=f=>{"isOpen"in f&&n(0,r=f.isOpen)},e.$$.update=()=>{e.$$.dirty&17&&r&&n(1,u=o),e.$$.dirty&1&&console.log(r)},[r,u,i,s,o,l,c]}class Kt extends re{constructor(t){super(),oe(this,t,Ut,Yt,x,{isOpen:0})}}function tt(e,t,n){const o=e.slice();return o[23]=t[n],o}function nt(e,t,n){const o=e.slice();return o[26]=t[n],o}function ot(e){let t,n,o,r,u,i,s,l,c,f,_,C,b,y,O=ee(e[2]),g=[];for(let m=0;m<O.length;m+=1)g[m]=rt(nt(e,O,m));let k=ee(e[3]),v=[];for(let m=0;m<k.length;m+=1)v[m]=st(tt(e,k,m));return{c(){t=w("div"),n=w("div"),o=w("div");for(let m=0;m<g.length;m+=1)g[m].c();r=R(),u=w("div");for(let m=0;m<v.length;m+=1)v[m].c();i=R(),s=w("div"),l=w("button"),c=J("Save"),_=R(),C=w("button"),C.textContent="Cancel",S(o,"class","numbers-hints svelte-cxqqya"),S(u,"class","colours-hints svelte-cxqqya"),l.disabled=f=!e[1],S(s,"class","actions"),S(n,"class","hint-modal svelte-cxqqya"),S(t,"class","modal-overlay svelte-cxqqya")},m(m,M){D(m,t,M),d(t,n),d(n,o);for(let a=0;a<g.length;a+=1)g[a]&&g[a].m(o,null);d(n,r),d(n,u);for(let a=0;a<v.length;a+=1)v[a]&&v[a].m(u,null);d(n,i),d(n,s),d(s,l),d(l,c),d(s,_),d(s,C),b||(y=[B(l,"click",e[4]),B(C,"click",e[6])],b=!0)},p(m,M){if(M&38){O=ee(m[2]);let a;for(a=0;a<O.length;a+=1){const L=nt(m,O,a);g[a]?g[a].p(L,M):(g[a]=rt(L),g[a].c(),g[a].m(o,null))}for(;a<g.length;a+=1)g[a].d(1);g.length=O.length}if(M&42){k=ee(m[3]);let a;for(a=0;a<k.length;a+=1){const L=tt(m,k,a);v[a]?v[a].p(L,M):(v[a]=st(L),v[a].c(),v[a].m(u,null))}for(;a<v.length;a+=1)v[a].d(1);v.length=k.length}M&2&&f!==(f=!m[1])&&(l.disabled=f)},d(m){m&&T(t),Pe(g,m),Pe(v,m),b=!1,K(y)}}}function rt(e){let t,n=e[26]+"",o,r,u;function i(){return e[8](e[26])}return{c(){t=w("button"),o=J(n),S(t,"class","btn"),t.hidden=!e[5](e[26])},m(s,l){D(s,t,l),d(t,o),r||(u=B(t,"click",i),r=!0)},p(s,l){e=s},d(s){s&&T(t),r=!1,u()}}}function st(e){let t,n=e[23]+"",o,r,u;function i(){return e[9](e[23])}return{c(){t=w("button"),o=J(n),S(t,"class","btn"),t.hidden=!e[5](e[23])},m(s,l){D(s,t,l),d(t,o),r||(u=B(t,"click",i),r=!0)},p(s,l){e=s},d(s){s&&T(t),r=!1,u()}}}function Xt(e){let t,n=e[0]&&ot(e);return{c(){n&&n.c(),t=Ee()},m(o,r){n&&n.m(o,r),D(o,t,r)},p(o,[r]){o[0]?n?n.p(o,r):(n=ot(o),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:W,o:W,d(o){o&&T(t),n&&n.d(o)}}}function ve(e){const t=e.filter(o=>o===null).length,n=e.filter(o=>o===!1).length;if(t===1&&n===e.length-1){const o=e.findIndex(r=>r===null);e[o]=!0}}function Qt(e,t,n){let o,r,u,i;Y(e,U,p=>n(11,r=p)),Y(e,Q,p=>n(12,u=p)),Y(e,me,p=>n(7,i=p));let{isOpen:s=!1}=t;const l=[1,2,3,4,5],c=["red","yellow","blue","white","green"];let f=null;function _(){f&&(console.log("a hint!"),typeof f=="string"?C(f):typeof f=="number"&&k(f),Q.update(p=>(p=new Set,p)),z())}function C(p){switch(o){case"no-variant":b(p);break;case"rainbows":y(p);break;case"blacks":O(p);break;case"rainbows-and-blacks":g(p);break}}function b(p){const P=Array.from(u),A=c.findIndex(H=>H===p);U.updateCards(H=>H.map(h=>{const q=h.colourInformation.map((F,j)=>P.includes(h.id)?(h.isHinted=!0,j===A):j!==A?F:!1);return ve(q),{...h,colourInformation:q}}))}function y(p){const P=Array.from(u),A=c.findIndex(H=>H===p);U.updateCards(H=>{let I=H;return I.forEach((h,q)=>{P.includes(h.id)?(h.isHinted=!0,h.colourInformation[5]===null&&h.colourInformation[A]===null?h.colourInformation.forEach((F,j)=>{j!=A&&j!=5&&(h.colourInformation[j]=!1)}):h.colourInformation[5]===null&&h.colourInformation[A]===!1?h.colourInformation.forEach((F,j)=>{j==5?h.colourInformation[j]=!0:h.colourInformation[j]=!1}):h.colourInformation[5]===!1&&h.colourInformation[A]===null&&h.colourInformation.forEach((F,j)=>{j==A?h.colourInformation[j]=!0:h.colourInformation[j]=!1})):h.colourInformation[5]!==!0&&(h.colourInformation[A]=!1,h.colourInformation[5]=!1,ve(h.colourInformation))}),I})}function O(p){const P=Array.from(u),A=c.findIndex(H=>H===p);U.updateCards(H=>H.map(h=>{let q;return P.includes(h.id)?(h.isHinted=!0,q=h.colourInformation.map((F,j)=>j===A)):q=h.colourInformation.map((F,j)=>j!==A?F:!1),ve(q),{...h,colourInformation:q}}))}function g(p){const P=Array.from(u),A=c.findIndex(H=>H===p);U.updateCards(H=>H.map(I=>{let h=[...I.colourInformation];return P.includes(I.id)?(I.isHinted=!0,I.colourInformation[5]===null&&I.colourInformation[A]===null?h=h.map((q,F)=>F===A||F===5?null:!1):I.colourInformation[5]===null&&I.colourInformation[A]===!1?h=h.map((q,F)=>F===5):I.colourInformation[5]===!1&&I.colourInformation[A]===null&&(h=h.map((q,F)=>F===A))):(h[A]=!1,h[5]=!1),ve(h),{...I,colourInformation:h}}))}function k(p){const P=Array.from(u);U.updateCards(A=>A.map(I=>{const h=I.numberInformation.map((q,F)=>P.includes(I.id)?(I.isHinted=!0,F===p-1):F!==p-1?q:!1);return{...I,numberInformation:h}}))}function v(p){let P=!1;switch(o){case"no-variant":P=m(p);break;case"rainbows":P=M(p);break;case"blacks":P=a(p);break;case"rainbows-and-blacks":P=L(p);break}return P}function m(p){return Array.from(u).every(H=>{const I=r.find(h=>h.id===H);if(!I)return!1;if(typeof p=="string"){const h=c.indexOf(p);return I.colourInformation[h]===null||I.colourInformation[h]===!0}else if(typeof p=="number")return I.numberInformation[p-1]===null||I.numberInformation[p-1]===!0})}function M(p){return Array.from(u).every(H=>{const I=r.find(h=>h.id===H);if(!I)return!1;if(typeof p=="string"){if(I.colourInformation[5]===null||I.colourInformation[5]===!0)return!0;{const q=c.indexOf(p);return I.colourInformation[q]===null||I.colourInformation[q]===!0}}else if(typeof p=="number")return I.numberInformation[p-1]===null||I.numberInformation[p-1]===!0})}function a(p){return Array.from(u).every(H=>{const I=r.find(h=>h.id===H);if(!I)return!1;if(typeof p=="string"){const h=c.indexOf(p);return I.colourInformation[h]===null||I.colourInformation[h]===!0}else if(typeof p=="number")return I.numberInformation[p-1]===null||I.numberInformation[p-1]===!0})}function L(p){return Array.from(u).every(H=>{const I=r.find(h=>h.id===H);if(!I)return!1;if(typeof p=="string"){if(I.colourInformation[5]===null||I.colourInformation[5]===!0)return!0;{const q=c.indexOf(p);return I.colourInformation[q]===null||I.colourInformation[q]===!0}}else if(typeof p=="number")return I.numberInformation[p-1]===null||I.numberInformation[p-1]===!0})}function z(){n(0,s=!1),n(1,f=null)}const N=p=>n(1,f=p),V=p=>n(1,f=p);return e.$$set=p=>{"isOpen"in p&&n(0,s=p.isOpen)},e.$$.update=()=>{e.$$.dirty&128&&(o=i.variant)},[s,f,l,c,_,v,z,i,N,V]}class Zt extends re{constructor(t){super(),oe(this,t,Qt,Xt,x,{isOpen:0})}}function it(e){let t,n,o,r,u,i,s,l,c,f,_,C,b,y,O,g,k;return{c(){t=w("div"),n=w("div"),o=w("div"),r=w("button"),r.textContent="Critical",u=R(),i=w("button"),i.textContent="Chop moved",s=R(),l=w("button"),l.textContent="Finessed",c=R(),f=w("div"),_=w("button"),C=J("Save"),y=R(),O=w("button"),O.textContent="Cancel",S(r,"class","btn"),S(i,"class","btn"),S(l,"class","btn"),S(o,"class","flags"),_.disabled=b=!e[1],S(f,"class","actions"),S(n,"class","mark-modal svelte-1fkqm3b"),S(t,"class","modal-overlay svelte-1fkqm3b")},m(v,m){D(v,t,m),d(t,n),d(n,o),d(o,r),d(o,u),d(o,i),d(o,s),d(o,l),d(n,c),d(n,f),d(f,_),d(_,C),d(f,y),d(f,O),g||(k=[B(r,"click",e[5]),B(i,"click",e[6]),B(l,"click",e[7]),B(_,"click",e[3]),B(O,"click",e[2])],g=!0)},p(v,m){m&2&&b!==(b=!v[1])&&(_.disabled=b)},d(v){v&&T(t),g=!1,K(k)}}}function xt(e){let t,n=e[0]&&it(e);return{c(){n&&n.c(),t=Ee()},m(o,r){n&&n.m(o,r),D(o,t,r)},p(o,[r]){o[0]?n?n.p(o,r):(n=it(o),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:W,o:W,d(o){o&&T(t),n&&n.d(o)}}}function $t(e,t,n){let o,r,u;Y(e,Q,b=>n(9,r=b)),Y(e,U,b=>n(4,u=b));let{isOpen:i=!1}=t,s=null;function l(){n(1,s=null),n(0,i=!1)}function c(){const b=Array.from(r);o.map(y=>{if(b.includes(y.id))switch(s){case"critical":y.isCritical=!y.isCritical;break;case"chop-move":y.isChopMoved=!y.isChopMoved;break;case"finesse":y.isFinessed=!y.isFinessed;break}return y}),U.updateCards(y=>y),Q.update(y=>(y=new Set,y)),l()}const f=()=>n(1,s="critical"),_=()=>n(1,s="chop-move"),C=()=>n(1,s="finesse");return e.$$set=b=>{"isOpen"in b&&n(0,i=b.isOpen)},e.$$.update=()=>{e.$$.dirty&16&&(o=u)},[i,s,l,c,u,f,_,C]}class en extends re{constructor(t){super(),oe(this,t,$t,xt,x,{isOpen:0})}}function tn(e){let t,n,o,r,u,i,s,l,c,f,_,C,b,y,O,g,k,v,m,M,a,L,z,N,V,p,P,A,H,I,h;s=new Jt({});function q(E){e[14](E)}let F={};e[1]!==void 0&&(F.isOpen=e[1]),a=new Kt({props:F}),_e.push(()=>Ne(a,"isOpen",q));function j(E){e[15](E)}let De={};e[2]!==void 0&&(De.isOpen=e[2]),N=new Zt({props:De}),_e.push(()=>Ne(N,"isOpen",j));function Ct(E){e[16](E)}let We={};return e[3]!==void 0&&(We.isOpen=e[3]),P=new en({props:We}),_e.push(()=>Ne(P,"isOpen",Ct)),{c(){t=w("div"),n=w("button"),n.textContent="Configure Game",o=R(),r=w("button"),u=J(e[0]),i=R(),le(s.$$.fragment),l=R(),c=w("button"),f=J("Record Hint"),C=R(),b=w("button"),y=J("Mark cards"),g=R(),k=w("button"),v=J("Undo"),M=R(),le(a.$$.fragment),z=R(),le(N.$$.fragment),p=R(),le(P.$$.fragment),S(n,"class","configure svelte-9e6wy5"),S(r,"class","wake-lock"),r.hidden=!e[6],S(c,"class","hint-panel svelte-9e6wy5"),c.disabled=_=e[5].size<1,S(b,"class","mark-panel"),b.disabled=O=e[5].size<1,S(k,"class","undo"),k.disabled=m=e[4]<1,S(t,"class","game-controls svelte-9e6wy5")},m(E,G){D(E,t,G),d(t,n),d(t,o),d(t,r),d(r,u),d(t,i),te(s,t,null),d(t,l),d(t,c),d(c,f),d(t,C),d(t,b),d(b,y),d(t,g),d(t,k),d(k,v),D(E,M,G),te(a,E,G),D(E,z,G),te(N,E,G),D(E,p,G),te(P,E,G),H=!0,I||(h=[B(n,"click",e[8]),B(r,"click",e[7]),B(c,"click",e[9]),B(b,"click",e[10]),B(k,"click",e[11])],I=!0)},p(E,[G]){(!H||G&1)&&Re(u,E[0]),(!H||G&32&&_!==(_=E[5].size<1))&&(c.disabled=_),(!H||G&32&&O!==(O=E[5].size<1))&&(b.disabled=O),(!H||G&16&&m!==(m=E[4]<1))&&(k.disabled=m);const Ge={};!L&&G&2&&(L=!0,Ge.isOpen=E[1],Ae(()=>L=!1)),a.$set(Ge);const Je={};!V&&G&4&&(V=!0,Je.isOpen=E[2],Ae(()=>V=!1)),N.$set(Je);const Ye={};!A&&G&8&&(A=!0,Ye.isOpen=E[3],Ae(()=>A=!1)),P.$set(Ye)},i(E){H||(X(s.$$.fragment,E),X(a.$$.fragment,E),X(N.$$.fragment,E),X(P.$$.fragment,E),H=!0)},o(E){Z(s.$$.fragment,E),Z(a.$$.fragment,E),Z(N.$$.fragment,E),Z(P.$$.fragment,E),H=!1},d(E){E&&(T(t),T(M),T(z),T(p)),ne(s),ne(a,E),ne(N,E),ne(P,E),I=!1,K(h)}}}function nn(e,t,n){let o,r,u;Y(e,be,M=>n(13,r=M)),Y(e,Q,M=>n(5,u=M));let i=null,s="wakeLock"in navigator,l="Wake Lock Off";async function c(){if(i)i.release(),n(12,i=null),n(0,l="Wake Lock Off");else try{n(12,i=await navigator.wakeLock.request("screen")),i.addEventListener("release",()=>{n(12,i=null),n(0,l="Wake Lock Off")}),n(0,l="Wake Lock On")}catch(M){console.error(`Could not acquire wake lock: ${M}`)}}let f=!1;function _(){n(1,f=!0)}let C=!1;function b(){n(2,C=!0)}let y=!1;function O(){n(3,y=!0)}function g(){U.rollback()}function k(M){f=M,n(1,f)}function v(M){C=M,n(2,C)}function m(M){y=M,n(3,y)}return e.$$.update=()=>{e.$$.dirty&4096&&(i?n(0,l="Wake Lock On"):n(0,l="Wake Lock Off")),e.$$.dirty&8192&&n(4,o=r),e.$$.dirty&8192&&console.log(r)},[l,f,C,y,o,u,s,c,_,b,O,g,i,r,k,v,m]}class on extends re{constructor(t){super(),oe(this,t,nn,tn,x,{})}}function lt(e,t,n){const o=e.slice();return o[19]=t[n],o}function ut(e){let t,n;return{c(){t=w("img"),Ke(t.src,n=e[19])||S(t,"src",n),S(t,"alt","colour icon"),S(t,"class","icon svelte-1m7u1up")},m(o,r){D(o,t,r)},p(o,r){r&16&&!Ke(t.src,n=o[19])&&S(t,"src",n)},d(o){o&&T(t)}}}function rn(e){let t,n,o,r=e[0]+1+"",u,i,s,l=ct(e[1])+"",c,f,_,C,b,y,O=ee(e[4]),g=[];for(let k=0;k<O.length;k+=1)g[k]=ut(lt(e,O,k));return{c(){t=w("div"),n=w("p"),o=J("Card "),u=J(r),i=R(),s=w("p"),c=J(l),f=R(),_=w("div");for(let k=0;k<g.length;k+=1)g[k].c();S(_,"class","icons svelte-1m7u1up"),S(t,"class",C="card no-"+e[6]+" "+(e[3]!=null?e[3]:"")+" svelte-1m7u1up"),S(t,"tabindex","0"),S(t,"role","button"),Xe(t,"border-color",e[5])},m(k,v){D(k,t,v),d(t,n),d(n,o),d(n,u),d(t,i),d(t,s),d(s,c),d(t,f),d(t,_);for(let m=0;m<g.length;m+=1)g[m]&&g[m].m(_,null);b||(y=[B(t,"click",e[14]),B(t,"keydown",e[15])],b=!0)},p(k,[v]){if(v&1&&r!==(r=k[0]+1+"")&&Re(u,r),v&2&&l!==(l=ct(k[1])+"")&&Re(c,l),v&16){O=ee(k[4]);let m;for(m=0;m<O.length;m+=1){const M=lt(k,O,m);g[m]?g[m].p(M,v):(g[m]=ut(M),g[m].c(),g[m].m(_,null))}for(;m<g.length;m+=1)g[m].d(1);g.length=O.length}v&72&&C!==(C="card no-"+k[6]+" "+(k[3]!=null?k[3]:"")+" svelte-1m7u1up")&&S(t,"class",C),v&32&&Xe(t,"border-color",k[5])},i:W,o:W,d(k){k&&T(t),Pe(g,k),b=!1,K(y)}}}function ct(e){return e.map((n,o)=>n===!0||n===null?(o+1).toString():"").join(" ")}function sn(e,t,n){let o,r,u,i;Y(e,me,a=>n(13,i=a));let{id:s}=t,{numberInformation:l}=t,{colourInformation:c}=t,{selected:f=!1}=t,{isHinted:_}=t,{isFinessed:C}=t,{isChopMoved:b}=t,{isCritical:y}=t,{onSelect:O}=t,g=null,k=[];function v(a){return a<5?["red","yellow","blue","white","green"][a]:o=="blacks"&&a==5?"black":o=="rainbows"&&a==5||o=="rainbows-and-blacks"&&a==5?"rainbow":o=="rainbows-and-blacks"&&a==6?"black":(console.log("Index {index} out of range for card {self.id} and variant {variant}"),"err")}const m=()=>O(s),M=a=>(a.key==="Enter"||a.key===" ")&&O(s);return e.$$set=a=>{"id"in a&&n(0,s=a.id),"numberInformation"in a&&n(1,l=a.numberInformation),"colourInformation"in a&&n(7,c=a.colourInformation),"selected"in a&&n(8,f=a.selected),"isHinted"in a&&n(9,_=a.isHinted),"isFinessed"in a&&n(10,C=a.isFinessed),"isChopMoved"in a&&n(11,b=a.isChopMoved),"isCritical"in a&&n(12,y=a.isCritical),"onSelect"in a&&n(2,O=a.onSelect)},e.$$.update=()=>{if(e.$$.dirty&8192&&(o=i.variant),e.$$.dirty&8192&&n(6,r=i.numberOfCards),e.$$.dirty&7936&&n(5,u=f?"blue":y?"red":_?"orange":C?"aqua":b?"white":"gray"),e.$$.dirty&128){const a=c.findIndex(L=>L===!0);a===-1?n(3,g=null):n(3,g=v(a))}e.$$.dirty&128&&n(4,k=c.map((a,L)=>a===!0||a===null?`src/assets/${v(L)}.svg`:null).filter(Boolean))},[s,l,O,g,k,u,r,c,f,_,C,b,y,i,m,M]}class ln extends re{constructor(t){super(),oe(this,t,sn,rn,x,{id:0,numberInformation:1,colourInformation:7,selected:8,isHinted:9,isFinessed:10,isChopMoved:11,isCritical:12,onSelect:2})}}function at(e,t,n){const o=e.slice();return o[3]=t[n],o}function ft(e,t){let n,o,r;return o=new ln({props:{id:t[3].id,numberInformation:t[3].numberInformation,colourInformation:t[3].colourInformation,selected:t[1].has(t[3].id),isHinted:t[3].isHinted,isChopMoved:t[3].isChopMoved,isFinessed:t[3].isFinessed,isCritical:t[3].isCritical,onSelect:t[2]}}),{key:e,first:null,c(){n=Ee(),le(o.$$.fragment),this.first=n},m(u,i){D(u,n,i),te(o,u,i),r=!0},p(u,i){t=u;const s={};i&1&&(s.id=t[3].id),i&1&&(s.numberInformation=t[3].numberInformation),i&1&&(s.colourInformation=t[3].colourInformation),i&3&&(s.selected=t[1].has(t[3].id)),i&1&&(s.isHinted=t[3].isHinted),i&1&&(s.isChopMoved=t[3].isChopMoved),i&1&&(s.isFinessed=t[3].isFinessed),i&1&&(s.isCritical=t[3].isCritical),o.$set(s)},i(u){r||(X(o.$$.fragment,u),r=!0)},o(u){Z(o.$$.fragment,u),r=!1},d(u){u&&T(n),ne(o,u)}}}function un(e){let t,n=[],o=new Map,r,u=ee(e[0]);const i=s=>s[3].id;for(let s=0;s<u.length;s+=1){let l=at(e,u,s),c=i(l);o.set(c,n[s]=ft(c,l))}return{c(){t=w("div");for(let s=0;s<n.length;s+=1)n[s].c();S(t,"class","hand svelte-insnbi")},m(s,l){D(s,t,l);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(t,null);r=!0},p(s,[l]){l&7&&(u=ee(s[0]),At(),n=Pt(n,l,i,1,s,u,o,t,Nt,ft,null,at),zt())},i(s){if(!r){for(let l=0;l<u.length;l+=1)X(n[l]);r=!0}},o(s){for(let l=0;l<n.length;l+=1)Z(n[l]);r=!1},d(s){s&&T(t);for(let l=0;l<n.length;l+=1)n[l].d()}}}function cn(e,t,n){let o,r;Y(e,U,i=>n(0,o=i)),Y(e,Q,i=>n(1,r=i));function u(i){r.has(i)?Q.update(s=>{const l=new Set(s);return l.delete(i),l}):Q.update(s=>{const l=new Set(s);return l.add(i),l})}return e.$$.update=()=>{e.$$.dirty&1&&console.log(o)},[o,r,u]}class an extends re{constructor(t){super(),oe(this,t,cn,un,x,{})}}function fn(e){let t,n,o,r,u,i,s;return n=new on({}),r=new an({}),{c(){t=w("main"),le(n.$$.fragment),o=R(),le(r.$$.fragment),u=R(),i=w("a"),i.textContent="Check out my code!",S(i,"href","https://github.com/jparkhouse/hanabi-tracker/"),S(i,"target","_blank")},m(l,c){D(l,t,c),te(n,t,null),d(t,o),te(r,t,null),d(t,u),d(t,i),s=!0},p:W,i(l){s||(X(n.$$.fragment,l),X(r.$$.fragment,l),s=!0)},o(l){Z(n.$$.fragment,l),Z(r.$$.fragment,l),s=!1},d(l){l&&T(t),ne(n),ne(r)}}}class dn extends re{constructor(t){super(),oe(this,t,null,fn,x,{})}}new dn({target:document.getElementById("app")});
