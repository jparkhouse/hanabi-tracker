var Ze=Object.defineProperty;var $e=(e,t,n)=>t in e?Ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ge=(e,t,n)=>($e(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const u of i)if(u.type==="childList")for(const s of u.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const u={};return i.integrity&&(u.integrity=i.integrity),i.referrerPolicy&&(u.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?u.credentials="include":i.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(i){if(i.ep)return;i.ep=!0;const u=n(i);fetch(i.href,u)}})();function D(){}function Te(e){return e()}function ze(){return Object.create(null)}function Q(e){e.forEach(Te)}function We(e){return typeof e=="function"}function $(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function xe(e){return Object.keys(e).length===0}function et(e,...t){if(e==null){for(const o of t)o(void 0);return D}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function T(e,t,n){e.$$.on_destroy.push(et(t,n))}function c(e,t){e.appendChild(t)}function B(e,t,n){e.insertBefore(t,n||null)}function q(e){e.parentNode&&e.parentNode.removeChild(e)}function Ve(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function k(e){return document.createElement(e)}function J(e){return document.createTextNode(e)}function F(){return J(" ")}function ke(){return J("")}function j(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function M(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function tt(e){return Array.from(e.childNodes)}function ye(e,t){t=""+t,e.data!==t&&(e.data=t)}function ie(e,t){e.value=t??""}function Pe(e,t,n,o){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function ve(e,t,n){for(let o=0;o<e.options.length;o+=1){const i=e.options[o];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Fe(e){const t=e.querySelector(":checked");return t&&t.__value}let Me;function pe(e){Me=e}const ae=[],be=[];let ce=[];const Se=[],nt=Promise.resolve();let He=!1;function ot(){He||(He=!0,nt.then(Qe))}function _e(e){ce.push(e)}function Ie(e){Se.push(e)}const we=new Set;let le=0;function Qe(){if(le!==0)return;const e=Me;do{try{for(;le<ae.length;){const t=ae[le];le++,pe(t),it(t.$$)}}catch(t){throw ae.length=0,le=0,t}for(pe(null),ae.length=0,le=0;be.length;)be.pop()();for(let t=0;t<ce.length;t+=1){const n=ce[t];we.has(n)||(we.add(n),n())}ce.length=0}while(ae.length);for(;Se.length;)Se.pop()();He=!1,we.clear(),pe(e)}function it(e){if(e.fragment!==null){e.update(),Q(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(_e)}}function rt(e){const t=[],n=[];ce.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),ce=t}const Ce=new Set;let re;function st(){re={r:0,c:[],p:re}}function lt(){re.r||Q(re.c),re=re.p}function X(e,t){e&&e.i&&(Ce.delete(e),e.i(t))}function Z(e,t,n,o){if(e&&e.o){if(Ce.has(e))return;Ce.add(e),re.c.push(()=>{Ce.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function fe(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function ut(e,t){Z(e,1,1,()=>{t.delete(e.key)})}function at(e,t,n,o,i,u,s,r,l,a,m,y){let I=e.length,b=u.length,p=I;const S={};for(;p--;)S[e[p].key]=p;const h=[],O=new Map,v=new Map,C=[];for(p=b;p--;){const E=y(i,u,p),N=n(E);let R=s.get(N);R?o&&C.push(()=>R.p(E,t)):(R=a(N,E),R.c()),O.set(N,h[p]=R),N in S&&v.set(N,Math.abs(p-S[N]))}const g=new Set,_=new Set;function L(E){X(E,1),E.m(r,m),s.set(E.key,E),m=E.first,b--}for(;I&&b;){const E=h[b-1],N=e[I-1],R=E.key,f=N.key;E===N?(m=E.first,I--,b--):O.has(f)?!s.has(R)||g.has(R)?L(E):_.has(f)?I--:v.get(R)>v.get(f)?(_.add(R),L(E)):(g.add(f),I--):(l(N,s),I--)}for(;I--;){const E=e[I];O.has(E.key)||l(E,s)}for(;b;)L(h[b-1]);return Q(C),h}function Oe(e,t,n){const o=e.$$.props[t];o!==void 0&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function se(e){e&&e.c()}function ee(e,t,n){const{fragment:o,after_update:i}=e.$$;o&&o.m(t,n),_e(()=>{const u=e.$$.on_mount.map(Te).filter(We);e.$$.on_destroy?e.$$.on_destroy.push(...u):Q(u),e.$$.on_mount=[]}),i.forEach(_e)}function te(e,t){const n=e.$$;n.fragment!==null&&(rt(n.after_update),Q(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ft(e,t){e.$$.dirty[0]===-1&&(ae.push(e),ot(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ne(e,t,n,o,i,u,s=null,r=[-1]){const l=Me;pe(e);const a=e.$$={fragment:null,ctx:[],props:u,update:D,not_equal:i,bound:ze(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:ze(),dirty:r,skip_bound:!1,root:t.target||l.$$.root};s&&s(a.root);let m=!1;if(a.ctx=n?n(e,t.props||{},(y,I,...b)=>{const p=b.length?b[0]:I;return a.ctx&&i(a.ctx[y],a.ctx[y]=p)&&(!a.skip_bound&&a.bound[y]&&a.bound[y](p),m&&ft(e,y)),I}):[],a.update(),m=!0,Q(a.before_update),a.fragment=o?o(a.ctx):!1,t.target){if(t.hydrate){const y=tt(t.target);a.fragment&&a.fragment.l(y),y.forEach(q)}else a.fragment&&a.fragment.c();t.intro&&X(e.$$.fragment),ee(e,t.target,t.anchor),Qe()}pe(l)}class oe{constructor(){ge(this,"$$");ge(this,"$$set")}$destroy(){te(this,1),this.$destroy=D}$on(t,n){if(!We(n))return D;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const i=o.indexOf(n);i!==-1&&o.splice(i,1)}}$set(t){this.$$set&&!xe(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ct="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ct);const ue=[];function he(e,t=D){let n;const o=new Set;function i(r){if($(e,r)&&(e=r,n)){const l=!ue.length;for(const a of o)a[1](),ue.push(a,e);if(l){for(let a=0;a<ue.length;a+=2)ue[a][0](ue[a+1]);ue.length=0}}}function u(r){i(r(e))}function s(r,l=D){const a=[r,l];return o.add(a),o.size===1&&(n=t(i,u)||D),r(e),()=>{o.delete(a),o.size===0&&n&&(n(),n=null)}}return{set:i,update:u,subscribe:s}}const Y=he(new Set),de=he({numberOfCards:4,variant:"no-variant"}),Xe=he(0);function Ye(){let e=0;return Xe.update(t=>(e=t,t+1)),e}class dt{constructor(t=1/0){ge(this,"storage",[]);this.capacity=t}push(t){if(this.storage.length>=this.capacity){let n=this.storage.length-this.capacity+1;this.storage.splice(0,n)}this.storage.push(t)}pop(){if(this.size()>0)return this.storage.pop();throw console.error("empty stack popped")}peek(){return this.storage[this.storage.length-1]}size(){return this.storage.length}clear(){this.storage=[]}}function mt(e){const t=JSON.stringify(e);return JSON.parse(t)}const x=new dt(5),me=he(0);function pt(){const{subscribe:e,set:t,update:n}=he([]),o=()=>{n(r=>(x.push(mt(r)),r)),me.set(x.size())},i=()=>{if(x.size()>0){const r=x.pop();me.set(x.size()),r&&t(r)}else console.warn("No previous state available for rollback");me.set(x.size())},u=r=>{x.clear(),me.set(x.size());const l=Array.from({length:r.numberOfCards},(a,m)=>({id:Ye(),numberInformation:Array(5).fill(null),colourInformation:Array(r.variant==="no-variant"?5:r.variant==="rainbows"||r.variant==="blacks"?6:7).fill(null),isHinted:!1,isChopMoved:!1,isFinessed:!1,isCritical:!1}));t(l)},s=de.subscribe(r=>{Xe.set(0),Y.update(l=>(l=new Set,l)),u(r)});return{subscribe:e,updateCards:r=>{n(l=>(o(),r(l)))},rollback:i,saveState:o,cleanup:()=>s()}}const W=pt();function bt(e){let t,n,o,i,u;return{c(){t=k("button"),n=J("Play/Discard"),t.disabled=o=e[0].size!==1},m(s,r){B(s,t,r),c(t,n),i||(u=j(t,"click",e[1]),i=!0)},p(s,[r]){r&1&&o!==(o=s[0].size!==1)&&(t.disabled=o)},i:D,o:D,d(s){s&&q(t),i=!1,u()}}}function _t(e,t,n){let o,i,u;T(e,Y,l=>n(0,i=l)),T(e,de,l=>n(2,u=l));function s(){if(i.size===1){const l=i.values().next().value;W.updateCards(a=>{const m=a.filter(y=>y.id!==l);return m.push(r(Ye())),m}),i.clear()}}function r(l){return{id:l,numberInformation:Array(5).fill(null),colourInformation:Array(o==="no-variant"?5:o==="rainbows"||o==="blacks"?6:7).fill(null),isHinted:!1,isChopMoved:!1,isFinessed:!1,isCritical:!1}}return e.$$.update=()=>{e.$$.dirty&4&&(o=u.variant)},[i,s,u]}class ht extends oe{constructor(t){super(),ne(this,t,_t,bt,$,{})}}function Le(e){let t,n,o,i,u,s,r,l,a,m,y,I,b,p,S,h,O,v,C,g,_,L,E;return{c(){t=k("div"),n=k("div"),o=k("div"),i=k("label"),i.textContent="Number of Cards:",u=F(),s=k("select"),r=k("option"),r.textContent="3",l=k("option"),l.textContent="4",a=k("option"),a.textContent="5",m=F(),y=k("label"),y.textContent="Variant:",I=F(),b=k("select"),p=k("option"),p.textContent="No variant",S=k("option"),S.textContent="Rainbows",h=k("option"),h.textContent="Blacks",O=k("option"),O.textContent="Rainbows and Blacks",v=F(),C=k("button"),C.textContent="Save",g=F(),_=k("button"),_.textContent="Cancel",M(i,"for","numberOfCards"),r.__value="3",ie(r,r.__value),l.__value="4",ie(l,l.__value),a.__value="5",ie(a,a.__value),M(s,"id","numberOfCards"),e[1].numberOfCards===void 0&&_e(()=>e[5].call(s)),M(y,"for","Variant"),p.__value="no-variant",ie(p,p.__value),S.__value="rainbows",ie(S,S.__value),h.__value="blacks",ie(h,h.__value),O.__value="rainbows-and-blacks",ie(O,O.__value),M(b,"id","Variant"),e[1].variant===void 0&&_e(()=>e[6].call(b)),M(o,"class","config-form svelte-16v23fx"),M(n,"class","config-modal svelte-16v23fx"),M(t,"class","modal-overlay svelte-16v23fx")},m(N,R){B(N,t,R),c(t,n),c(n,o),c(o,i),c(o,u),c(o,s),c(s,r),c(s,l),c(s,a),ve(s,e[1].numberOfCards,!0),c(o,m),c(o,y),c(o,I),c(o,b),c(b,p),c(b,S),c(b,h),c(b,O),ve(b,e[1].variant,!0),c(n,v),c(n,C),c(n,g),c(n,_),L||(E=[j(s,"change",e[5]),j(b,"change",e[6]),j(C,"click",e[3]),j(_,"click",e[2])],L=!0)},p(N,R){R&2&&ve(s,N[1].numberOfCards),R&2&&ve(b,N[1].variant)},d(N){N&&q(t),L=!1,Q(E)}}}function gt(e){let t,n=e[0]&&Le(e);return{c(){n&&n.c(),t=ke()},m(o,i){n&&n.m(o,i),B(o,t,i)},p(o,[i]){o[0]?n?n.p(o,i):(n=Le(o),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:D,o:D,d(o){o&&q(t),n&&n.d(o)}}}function vt(e,t,n){let o;T(e,de,m=>n(4,o=m));let{isOpen:i=!1}=t,u={numberOfCards:4,variant:"no-variant"};function s(){n(0,i=!1)}function r(){de.set(u),s()}function l(){u.numberOfCards=Fe(this),n(1,u),n(0,i),n(4,o)}function a(){u.variant=Fe(this),n(1,u),n(0,i),n(4,o)}return e.$$set=m=>{"isOpen"in m&&n(0,i=m.isOpen)},e.$$.update=()=>{e.$$.dirty&17&&i&&n(1,u=o),e.$$.dirty&1&&console.log(i)},[i,u,s,r,o,l,a]}class Ct extends oe{constructor(t){super(),ne(this,t,vt,gt,$,{isOpen:0})}}function Re(e,t,n){const o=e.slice();return o[23]=t[n],o}function je(e,t,n){const o=e.slice();return o[26]=t[n],o}function qe(e){let t,n,o,i,u,s,r,l,a,m,y,I,b,p,S=fe(e[2]),h=[];for(let C=0;C<S.length;C+=1)h[C]=Be(je(e,S,C));let O=fe(e[3]),v=[];for(let C=0;C<O.length;C+=1)v[C]=De(Re(e,O,C));return{c(){t=k("div"),n=k("div"),o=k("div");for(let C=0;C<h.length;C+=1)h[C].c();i=F(),u=k("div");for(let C=0;C<v.length;C+=1)v[C].c();s=F(),r=k("div"),l=k("button"),a=J("Save"),y=F(),I=k("button"),I.textContent="Cancel",M(o,"class","numbers-hints svelte-17jwble"),M(u,"class","colours-hints svelte-17jwble"),l.disabled=m=!e[1],M(r,"class","actions"),M(n,"class","hint-modal svelte-17jwble"),M(t,"class","modal-overlay svelte-17jwble")},m(C,g){B(C,t,g),c(t,n),c(n,o);for(let _=0;_<h.length;_+=1)h[_]&&h[_].m(o,null);c(n,i),c(n,u);for(let _=0;_<v.length;_+=1)v[_]&&v[_].m(u,null);c(n,s),c(n,r),c(r,l),c(l,a),c(r,y),c(r,I),b||(p=[j(l,"click",e[4]),j(I,"click",e[6])],b=!0)},p(C,g){if(g&38){S=fe(C[2]);let _;for(_=0;_<S.length;_+=1){const L=je(C,S,_);h[_]?h[_].p(L,g):(h[_]=Be(L),h[_].c(),h[_].m(o,null))}for(;_<h.length;_+=1)h[_].d(1);h.length=S.length}if(g&42){O=fe(C[3]);let _;for(_=0;_<O.length;_+=1){const L=Re(C,O,_);v[_]?v[_].p(L,g):(v[_]=De(L),v[_].c(),v[_].m(u,null))}for(;_<v.length;_+=1)v[_].d(1);v.length=O.length}g&2&&m!==(m=!C[1])&&(l.disabled=m)},d(C){C&&q(t),Ve(h,C),Ve(v,C),b=!1,Q(p)}}}function Be(e){let t,n=e[26]+"",o,i,u;function s(){return e[8](e[26])}return{c(){t=k("button"),o=J(n),M(t,"class","btn"),t.hidden=!e[5](e[26])},m(r,l){B(r,t,l),c(t,o),i||(u=j(t,"click",s),i=!0)},p(r,l){e=r},d(r){r&&q(t),i=!1,u()}}}function De(e){let t,n=e[23]+"",o,i,u;function s(){return e[9](e[23])}return{c(){t=k("button"),o=J(n),M(t,"class","btn"),t.hidden=!e[5](e[23])},m(r,l){B(r,t,l),c(t,o),i||(u=j(t,"click",s),i=!0)},p(r,l){e=r},d(r){r&&q(t),i=!1,u()}}}function kt(e){let t,n=e[0]&&qe(e);return{c(){n&&n.c(),t=ke()},m(o,i){n&&n.m(o,i),B(o,t,i)},p(o,[i]){o[0]?n?n.p(o,i):(n=qe(o),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:D,o:D,d(o){o&&q(t),n&&n.d(o)}}}function yt(e,t,n){let o,i,u,s;T(e,W,f=>n(11,i=f)),T(e,Y,f=>n(12,u=f)),T(e,de,f=>n(7,s=f));let{isOpen:r=!1}=t;const l=[1,2,3,4,5],a=["red","yellow","blue","white","green"];let m=null;function y(){m&&(console.log("a hint!"),typeof m=="string"?I(m):typeof m=="number"&&O(m),Y.update(f=>(f=new Set,f)),E())}function I(f){switch(o){case"no-variant":b(f);break;case"rainbows":p(f);break;case"blacks":S(f);break;case"rainbows-and-blacks":h(f);break}}function b(f){const P=Array.from(u),z=a.findIndex(V=>V===f);W.updateCards(V=>V.map(d=>{const G=d.colourInformation.map((U,A)=>P.includes(d.id)?(d.isHinted=!0,A===z):A!==z?U:!1);return{...d,colourInformation:G}}))}function p(f){const P=Array.from(u),z=a.findIndex(V=>V===f);W.updateCards(V=>{let w=V;return w.forEach((d,G)=>{P.includes(d.id)?(d.isHinted=!0,d.colourInformation[5]===null&&d.colourInformation[z]===null?d.colourInformation.forEach((U,A)=>{A!=z&&A!=5&&(d.colourInformation[A]=!1)}):d.colourInformation[5]===null&&d.colourInformation[z]===!1?d.colourInformation.forEach((U,A)=>{A==5?d.colourInformation[A]=!0:d.colourInformation[A]=!1}):d.colourInformation[5]===!1&&d.colourInformation[z]===null&&d.colourInformation.forEach((U,A)=>{A==z?d.colourInformation[A]=!0:d.colourInformation[A]=!1})):d.colourInformation[5]!==!0&&(d.colourInformation[z]=!1,d.colourInformation[5]=!1)}),w})}function S(f){const P=Array.from(u),z=a.findIndex(V=>V===f);W.updateCards(V=>V.map(d=>{const G=d.colourInformation.map((U,A)=>P.includes(d.id)?(d.isHinted=!0,A===z):A!==z?U:!1);return{...d,colourInformation:G}}))}function h(f){const P=Array.from(u),z=a.findIndex(V=>V===f);W.updateCards(V=>{let w=V;return w.forEach((d,G)=>{P.includes(d.id)?(d.isHinted=!0,d.colourInformation[5]===null&&d.colourInformation[z]===null?d.colourInformation.forEach((U,A)=>{A!=z&&A!=5&&(d.colourInformation[A]=!1)}):d.colourInformation[5]===null&&d.colourInformation[z]===!1?d.colourInformation.forEach((U,A)=>{A==5?d.colourInformation[A]=!0:d.colourInformation[A]=!1}):d.colourInformation[5]===!1&&d.colourInformation[z]===null&&d.colourInformation.forEach((U,A)=>{A==z?d.colourInformation[A]=!0:d.colourInformation[A]=!1})):d.colourInformation[5]!==!0&&(d.colourInformation[z]=!1,d.colourInformation[5]=!1)}),w})}function O(f){const P=Array.from(u);W.updateCards(z=>z.map(w=>{const d=w.numberInformation.map((G,U)=>P.includes(w.id)?(w.isHinted=!0,U===f-1):U!==f-1?G:!1);return{...w,numberInformation:d}}))}function v(f){let P=!1;switch(o){case"no-variant":P=C(f);break;case"rainbows":P=g(f);break;case"blacks":P=_(f);break;case"rainbows-and-blacks":P=L(f);break}return P}function C(f){return Array.from(u).every(V=>{const w=i.find(d=>d.id===V);if(!w)return!1;if(typeof f=="string"){const d=a.indexOf(f);return w.colourInformation[d]===null||w.colourInformation[d]===!0}else if(typeof f=="number")return w.numberInformation[f-1]===null||w.numberInformation[f-1]===!0})}function g(f){return Array.from(u).every(V=>{const w=i.find(d=>d.id===V);if(!w)return!1;if(typeof f=="string"){if(w.colourInformation[5]===null||w.colourInformation[5]===!0)return!0;{const G=a.indexOf(f);return w.colourInformation[G]===null||w.colourInformation[G]===!0}}else if(typeof f=="number")return w.numberInformation[f-1]===null||w.numberInformation[f-1]===!0})}function _(f){return Array.from(u).every(V=>{const w=i.find(d=>d.id===V);if(!w)return!1;if(typeof f=="string"){const d=a.indexOf(f);return w.colourInformation[d]===null||w.colourInformation[d]===!0}else if(typeof f=="number")return w.numberInformation[f-1]===null||w.numberInformation[f-1]===!0})}function L(f){return Array.from(u).every(V=>{const w=i.find(d=>d.id===V);if(!w)return!1;if(typeof f=="string"){if(w.colourInformation[5]===null||w.colourInformation[5]===!0)return!0;{const G=a.indexOf(f);return w.colourInformation[G]===null||w.colourInformation[G]===!0}}else if(typeof f=="number")return w.numberInformation[f-1]===null||w.numberInformation[f-1]===!0})}function E(){n(0,r=!1),n(1,m=null)}const N=f=>n(1,m=f),R=f=>n(1,m=f);return e.$$set=f=>{"isOpen"in f&&n(0,r=f.isOpen)},e.$$.update=()=>{e.$$.dirty&128&&(o=s.variant)},[r,m,l,a,y,v,E,s,N,R]}class It extends oe{constructor(t){super(),ne(this,t,yt,kt,$,{isOpen:0})}}function Ge(e){let t,n,o,i,u,s,r,l,a,m,y,I,b,p,S,h,O;return{c(){t=k("div"),n=k("div"),o=k("div"),i=k("button"),i.textContent="Critical",u=F(),s=k("button"),s.textContent="Chop moved",r=F(),l=k("button"),l.textContent="Finessed",a=F(),m=k("div"),y=k("button"),I=J("Save"),p=F(),S=k("button"),S.textContent="Cancel",M(i,"class","btn"),M(s,"class","btn"),M(l,"class","btn"),M(o,"class","flags"),y.disabled=b=!e[1],M(m,"class","actions"),M(n,"class","mark-modal svelte-1fkqm3b"),M(t,"class","modal-overlay svelte-1fkqm3b")},m(v,C){B(v,t,C),c(t,n),c(n,o),c(o,i),c(o,u),c(o,s),c(o,r),c(o,l),c(n,a),c(n,m),c(m,y),c(y,I),c(m,p),c(m,S),h||(O=[j(i,"click",e[5]),j(s,"click",e[6]),j(l,"click",e[7]),j(y,"click",e[3]),j(S,"click",e[2])],h=!0)},p(v,C){C&2&&b!==(b=!v[1])&&(y.disabled=b)},d(v){v&&q(t),h=!1,Q(O)}}}function wt(e){let t,n=e[0]&&Ge(e);return{c(){n&&n.c(),t=ke()},m(o,i){n&&n.m(o,i),B(o,t,i)},p(o,[i]){o[0]?n?n.p(o,i):(n=Ge(o),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:D,o:D,d(o){o&&q(t),n&&n.d(o)}}}function Ot(e,t,n){let o,i,u;T(e,Y,b=>n(9,i=b)),T(e,W,b=>n(4,u=b));let{isOpen:s=!1}=t,r=null;function l(){n(1,r=null),n(0,s=!1)}function a(){const b=Array.from(i);o.map(p=>{if(b.includes(p.id))switch(r){case"critical":p.isCritical=!p.isCritical;break;case"chop-move":p.isChopMoved=!p.isChopMoved;break;case"finesse":p.isFinessed=!p.isFinessed;break}return p}),W.updateCards(p=>p),Y.update(p=>(p=new Set,p)),l()}const m=()=>n(1,r="critical"),y=()=>n(1,r="chop-move"),I=()=>n(1,r="finesse");return e.$$set=b=>{"isOpen"in b&&n(0,s=b.isOpen)},e.$$.update=()=>{e.$$.dirty&16&&(o=u)},[s,r,l,a,u,m,y,I]}class St extends oe{constructor(t){super(),ne(this,t,Ot,wt,$,{isOpen:0})}}function Ht(e){let t,n,o,i,u,s,r,l,a,m,y,I,b,p,S,h,O,v,C,g,_,L,E,N,R,f,P,z;i=new ht({});function V(H){e[10](H)}let w={};e[0]!==void 0&&(w.isOpen=e[0]),v=new Ct({props:w}),be.push(()=>Oe(v,"isOpen",V));function d(H){e[11](H)}let G={};e[1]!==void 0&&(G.isOpen=e[1]),_=new It({props:G}),be.push(()=>Oe(_,"isOpen",d));function U(H){e[12](H)}let A={};return e[2]!==void 0&&(A.isOpen=e[2]),N=new St({props:A}),be.push(()=>Oe(N,"isOpen",U)),{c(){t=k("div"),n=k("button"),n.textContent="Configure Game",o=F(),se(i.$$.fragment),u=F(),s=k("button"),r=J("Record Hint"),a=F(),m=k("button"),y=J("Mark cards"),b=F(),p=k("button"),S=J("Undo"),O=F(),se(v.$$.fragment),g=F(),se(_.$$.fragment),E=F(),se(N.$$.fragment),M(n,"class","configure svelte-9e6wy5"),M(s,"class","hint-panel svelte-9e6wy5"),s.disabled=l=e[4].size<1,M(m,"class","mark-panel"),m.disabled=I=e[4].size<1,M(p,"class","undo"),p.disabled=h=e[3]<1,M(t,"class","game-controls svelte-9e6wy5")},m(H,K){B(H,t,K),c(t,n),c(t,o),ee(i,t,null),c(t,u),c(t,s),c(s,r),c(t,a),c(t,m),c(m,y),c(t,b),c(t,p),c(p,S),B(H,O,K),ee(v,H,K),B(H,g,K),ee(_,H,K),B(H,E,K),ee(N,H,K),f=!0,P||(z=[j(n,"click",e[5]),j(s,"click",e[6]),j(m,"click",e[7]),j(p,"click",e[8])],P=!0)},p(H,[K]){(!f||K&16&&l!==(l=H[4].size<1))&&(s.disabled=l),(!f||K&16&&I!==(I=H[4].size<1))&&(m.disabled=I),(!f||K&8&&h!==(h=H[3]<1))&&(p.disabled=h);const Ae={};!C&&K&1&&(C=!0,Ae.isOpen=H[0],Ie(()=>C=!1)),v.$set(Ae);const Ee={};!L&&K&2&&(L=!0,Ee.isOpen=H[1],Ie(()=>L=!1)),_.$set(Ee);const Ne={};!R&&K&4&&(R=!0,Ne.isOpen=H[2],Ie(()=>R=!1)),N.$set(Ne)},i(H){f||(X(i.$$.fragment,H),X(v.$$.fragment,H),X(_.$$.fragment,H),X(N.$$.fragment,H),f=!0)},o(H){Z(i.$$.fragment,H),Z(v.$$.fragment,H),Z(_.$$.fragment,H),Z(N.$$.fragment,H),f=!1},d(H){H&&(q(t),q(O),q(g),q(E)),te(i),te(v,H),te(_,H),te(N,H),P=!1,Q(z)}}}function Mt(e,t,n){let o,i,u;T(e,me,h=>n(9,i=h)),T(e,Y,h=>n(4,u=h));let s=!1;function r(){n(0,s=!0)}let l=!1;function a(){n(1,l=!0)}let m=!1;function y(){n(2,m=!0)}function I(){W.rollback()}function b(h){s=h,n(0,s)}function p(h){l=h,n(1,l)}function S(h){m=h,n(2,m)}return e.$$.update=()=>{e.$$.dirty&512&&n(3,o=i),e.$$.dirty&512&&console.log(i)},[s,l,m,o,u,r,a,y,I,i,b,p,S]}class At extends oe{constructor(t){super(),ne(this,t,Mt,Ht,$,{})}}function Et(e){let t,n,o,i=e[0]+1+"",u,s,r,l=Je(e[1])+"",a,m,y,I=e[6](e[2])+"",b,p,S,h;return{c(){t=k("div"),n=k("p"),o=J("Card "),u=J(i),s=F(),r=k("p"),a=J(l),m=F(),y=k("p"),b=J(I),M(t,"class",p="card no-"+e[5]+" svelte-yy599i"),M(t,"tabindex","0"),M(t,"role","button"),Pe(t,"border-color",e[4])},m(O,v){B(O,t,v),c(t,n),c(n,o),c(n,u),c(t,s),c(t,r),c(r,a),c(t,m),c(t,y),c(y,b),S||(h=[j(t,"click",e[13]),j(t,"keydown",e[14])],S=!0)},p(O,[v]){v&1&&i!==(i=O[0]+1+"")&&ye(u,i),v&2&&l!==(l=Je(O[1])+"")&&ye(a,l),v&4&&I!==(I=O[6](O[2])+"")&&ye(b,I),v&32&&p!==(p="card no-"+O[5]+" svelte-yy599i")&&M(t,"class",p),v&16&&Pe(t,"border-color",O[4])},i:D,o:D,d(O){O&&q(t),S=!1,Q(h)}}}function Je(e){return e.map((n,o)=>n===!0||n===null?(o+1).toString():"").join(" ")}function Nt(e,t,n){let o,i,u,s;T(e,de,g=>n(12,s=g));let{id:r}=t,{numberInformation:l}=t,{colourInformation:a}=t,{selected:m=!1}=t,{isHinted:y}=t,{isFinessed:I}=t,{isChopMoved:b}=t,{isCritical:p}=t,{onSelect:S}=t;function h(g){return g.map((L,E)=>L===!0||L===null?O(E):"").join(" ")}function O(g){return g<5?["r","y","b","w","g"][g]:o=="blacks"&&g==5?"bl":o=="rainbows"&&g==5||o=="rainbows-and-blacks"&&g==5?"m":o=="rainbows-and-blacks"&&g==6?"bl":(console.log("Index {index} out of range for card {self.id} and variant {variant}"),"err")}const v=()=>S(r),C=g=>(g.key==="Enter"||g.key===" ")&&S(r);return e.$$set=g=>{"id"in g&&n(0,r=g.id),"numberInformation"in g&&n(1,l=g.numberInformation),"colourInformation"in g&&n(2,a=g.colourInformation),"selected"in g&&n(7,m=g.selected),"isHinted"in g&&n(8,y=g.isHinted),"isFinessed"in g&&n(9,I=g.isFinessed),"isChopMoved"in g&&n(10,b=g.isChopMoved),"isCritical"in g&&n(11,p=g.isCritical),"onSelect"in g&&n(3,S=g.onSelect)},e.$$.update=()=>{e.$$.dirty&4096&&(o=s.variant),e.$$.dirty&4096&&n(5,i=s.numberOfCards),e.$$.dirty&3968&&n(4,u=m?"blue":p?"red":y?"orange":I?"aqua":b?"white":"gray")},[r,l,a,S,u,i,h,m,y,I,b,p,s,v,C]}class zt extends oe{constructor(t){super(),ne(this,t,Nt,Et,$,{id:0,numberInformation:1,colourInformation:2,selected:7,isHinted:8,isFinessed:9,isChopMoved:10,isCritical:11,onSelect:3})}}function Ue(e,t,n){const o=e.slice();return o[3]=t[n],o}function Ke(e,t){let n,o,i;return o=new zt({props:{id:t[3].id,numberInformation:t[3].numberInformation,colourInformation:t[3].colourInformation,selected:t[1].has(t[3].id),isHinted:t[3].isHinted,isChopMoved:t[3].isChopMoved,isFinessed:t[3].isFinessed,isCritical:t[3].isCritical,onSelect:t[2]}}),{key:e,first:null,c(){n=ke(),se(o.$$.fragment),this.first=n},m(u,s){B(u,n,s),ee(o,u,s),i=!0},p(u,s){t=u;const r={};s&1&&(r.id=t[3].id),s&1&&(r.numberInformation=t[3].numberInformation),s&1&&(r.colourInformation=t[3].colourInformation),s&3&&(r.selected=t[1].has(t[3].id)),s&1&&(r.isHinted=t[3].isHinted),s&1&&(r.isChopMoved=t[3].isChopMoved),s&1&&(r.isFinessed=t[3].isFinessed),s&1&&(r.isCritical=t[3].isCritical),o.$set(r)},i(u){i||(X(o.$$.fragment,u),i=!0)},o(u){Z(o.$$.fragment,u),i=!1},d(u){u&&q(n),te(o,u)}}}function Vt(e){let t,n=[],o=new Map,i,u=fe(e[0]);const s=r=>r[3].id;for(let r=0;r<u.length;r+=1){let l=Ue(e,u,r),a=s(l);o.set(a,n[r]=Ke(a,l))}return{c(){t=k("div");for(let r=0;r<n.length;r+=1)n[r].c();M(t,"class","hand svelte-insnbi")},m(r,l){B(r,t,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(t,null);i=!0},p(r,[l]){l&7&&(u=fe(r[0]),st(),n=at(n,l,s,1,r,u,o,t,ut,Ke,null,Ue),lt())},i(r){if(!i){for(let l=0;l<u.length;l+=1)X(n[l]);i=!0}},o(r){for(let l=0;l<n.length;l+=1)Z(n[l]);i=!1},d(r){r&&q(t);for(let l=0;l<n.length;l+=1)n[l].d()}}}function Pt(e,t,n){let o,i;T(e,W,s=>n(0,o=s)),T(e,Y,s=>n(1,i=s));function u(s){i.has(s)?Y.update(r=>{const l=new Set(r);return l.delete(s),l}):Y.update(r=>{const l=new Set(r);return l.add(s),l})}return e.$$.update=()=>{e.$$.dirty&1&&console.log(o)},[o,i,u]}class Ft extends oe{constructor(t){super(),ne(this,t,Pt,Vt,$,{})}}function Lt(e){let t,n,o,i,u,s,r,l;return n=new At({}),i=new Ft({}),{c(){t=k("main"),se(n.$$.fragment),o=F(),se(i.$$.fragment),u=F(),s=k("a"),r=J("Check out my code!"),M(s,"href","https://github.com/jparkhouse/hanabi-tracker/"),M(s,"target","_blank"),s.hidden=e[0]},m(a,m){B(a,t,m),ee(n,t,null),c(t,o),ee(i,t,null),c(t,u),c(t,s),c(s,r),l=!0},p(a,[m]){(!l||m&1)&&(s.hidden=a[0])},i(a){l||(X(n.$$.fragment,a),X(i.$$.fragment,a),l=!0)},o(a){Z(n.$$.fragment,a),Z(i.$$.fragment,a),l=!1},d(a){a&&q(t),te(n),te(i)}}}async function Rt(){try{const e=await navigator.wakeLock.request("screen");return console.log("Screen wake lock is active"),document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&e.released&&(await navigator.wakeLock.request("screen"),console.log("Screen wake lock is re-acquired"))}),e}catch(e){console.error(`Could not acquire wake lock: ${e}`)}}function jt(e,t,n){let o=!0;return"wakeLock"in navigator?Rt():o=!1,[o]}class qt extends oe{constructor(t){super(),ne(this,t,jt,Lt,$,{})}}new qt({target:document.getElementById("app")});
