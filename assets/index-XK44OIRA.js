var et=Object.defineProperty;var tt=(e,t,n)=>t in e?et(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ge=(e,t,n)=>(tt(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function q(){}function Qe(e){return e()}function Ve(){return Object.create(null)}function Q(e){e.forEach(Qe)}function Xe(e){return typeof e=="function"}function x(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function nt(e){return Object.keys(e).length===0}function ot(e,...t){if(e==null){for(const o of t)o(void 0);return q}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function U(e,t,n){e.$$.on_destroy.push(ot(t,n))}function f(e,t){e.appendChild(t)}function W(e,t,n){e.insertBefore(t,n||null)}function B(e){e.parentNode&&e.parentNode.removeChild(e)}function Pe(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function k(e){return document.createElement(e)}function T(e){return document.createTextNode(e)}function P(){return T(" ")}function Ie(){return T("")}function j(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function M(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function rt(e){return Array.from(e.childNodes)}function Ce(e,t){t=""+t,e.data!==t&&(e.data=t)}function re(e,t){e.value=t??""}function Fe(e,t,n,o){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function ke(e,t,n){for(let o=0;o<e.options.length;o+=1){const r=e.options[o];if(r.__value===t){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Re(e){const t=e.querySelector(":checked");return t&&t.__value}let Me;function pe(e){Me=e}const ae=[],be=[];let ce=[];const Se=[],it=Promise.resolve();let He=!1;function lt(){He||(He=!0,it.then(Ye))}function _e(e){ce.push(e)}function ye(e){Se.push(e)}const we=new Set;let se=0;function Ye(){if(se!==0)return;const e=Me;do{try{for(;se<ae.length;){const t=ae[se];se++,pe(t),st(t.$$)}}catch(t){throw ae.length=0,se=0,t}for(pe(null),ae.length=0,se=0;be.length;)be.pop()();for(let t=0;t<ce.length;t+=1){const n=ce[t];we.has(n)||(we.add(n),n())}ce.length=0}while(ae.length);for(;Se.length;)Se.pop()();He=!1,we.clear(),pe(e)}function st(e){if(e.fragment!==null){e.update(),Q(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(_e)}}function ut(e){const t=[],n=[];ce.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),ce=t}const ve=new Set;let ie;function at(){ie={r:0,c:[],p:ie}}function ft(){ie.r||Q(ie.c),ie=ie.p}function X(e,t){e&&e.i&&(ve.delete(e),e.i(t))}function Z(e,t,n,o){if(e&&e.o){if(ve.has(e))return;ve.add(e),ie.c.push(()=>{ve.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function fe(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function ct(e,t){Z(e,1,1,()=>{t.delete(e.key)})}function dt(e,t,n,o,r,s,u,i,l,a,b,C){let y=e.length,p=s.length,_=y;const S={};for(;_--;)S[e[_].key]=_;const O=[],v=new Map,I=new Map,g=[];for(_=p;_--;){const L=C(r,s,_),z=n(L);let R=u.get(z);R?o&&g.push(()=>R.p(L,t)):(R=a(z,L),R.c()),v.set(z,O[_]=R),z in S&&I.set(z,Math.abs(_-S[z]))}const m=new Set,h=new Set;function F(L){X(L,1),L.m(i,b),u.set(L.key,L),b=L.first,p--}for(;y&&p;){const L=O[p-1],z=e[y-1],R=L.key,d=z.key;L===z?(b=L.first,y--,p--):v.has(d)?!u.has(R)||m.has(R)?F(L):h.has(d)?y--:I.get(R)>I.get(d)?(h.add(R),F(L)):(m.add(d),y--):(l(z,u),y--)}for(;y--;){const L=e[y];v.has(L.key)||l(L,u)}for(;p;)F(O[p-1]);return Q(g),O}function Oe(e,t,n){const o=e.$$.props[t];o!==void 0&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function le(e){e&&e.c()}function ee(e,t,n){const{fragment:o,after_update:r}=e.$$;o&&o.m(t,n),_e(()=>{const s=e.$$.on_mount.map(Qe).filter(Xe);e.$$.on_destroy?e.$$.on_destroy.push(...s):Q(s),e.$$.on_mount=[]}),r.forEach(_e)}function te(e,t){const n=e.$$;n.fragment!==null&&(ut(n.after_update),Q(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function mt(e,t){e.$$.dirty[0]===-1&&(ae.push(e),lt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ne(e,t,n,o,r,s,u=null,i=[-1]){const l=Me;pe(e);const a=e.$$={fragment:null,ctx:[],props:s,update:q,not_equal:r,bound:Ve(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:Ve(),dirty:i,skip_bound:!1,root:t.target||l.$$.root};u&&u(a.root);let b=!1;if(a.ctx=n?n(e,t.props||{},(C,y,...p)=>{const _=p.length?p[0]:y;return a.ctx&&r(a.ctx[C],a.ctx[C]=_)&&(!a.skip_bound&&a.bound[C]&&a.bound[C](_),b&&mt(e,C)),y}):[],a.update(),b=!0,Q(a.before_update),a.fragment=o?o(a.ctx):!1,t.target){if(t.hydrate){const C=rt(t.target);a.fragment&&a.fragment.l(C),C.forEach(B)}else a.fragment&&a.fragment.c();t.intro&&X(e.$$.fragment),ee(e,t.target,t.anchor),Ye()}pe(l)}class oe{constructor(){ge(this,"$$");ge(this,"$$set")}$destroy(){te(this,1),this.$destroy=q}$on(t,n){if(!Xe(n))return q;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const r=o.indexOf(n);r!==-1&&o.splice(r,1)}}$set(t){this.$$set&&!nt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const pt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(pt);const ue=[];function he(e,t=q){let n;const o=new Set;function r(i){if(x(e,i)&&(e=i,n)){const l=!ue.length;for(const a of o)a[1](),ue.push(a,e);if(l){for(let a=0;a<ue.length;a+=2)ue[a][0](ue[a+1]);ue.length=0}}}function s(i){r(i(e))}function u(i,l=q){const a=[i,l];return o.add(a),o.size===1&&(n=t(r,s)||q),i(e),()=>{o.delete(a),o.size===0&&n&&(n(),n=null)}}return{set:r,update:s,subscribe:u}}const Y=he(new Set),de=he({numberOfCards:4,variant:"no-variant"}),Ze=he(0);function xe(){let e=0;return Ze.update(t=>(e=t,t+1)),e}class bt{constructor(t=1/0){ge(this,"storage",[]);this.capacity=t}push(t){if(this.storage.length>=this.capacity){let n=this.storage.length-this.capacity+1;this.storage.splice(0,n)}this.storage.push(t)}pop(){if(this.size()>0)return this.storage.pop();throw console.error("empty stack popped")}peek(){return this.storage[this.storage.length-1]}size(){return this.storage.length}clear(){this.storage=[]}}function _t(e){const t=JSON.stringify(e);return JSON.parse(t)}const $=new bt(5),me=he(0);function ht(){const{subscribe:e,set:t,update:n}=he([]),o=()=>{n(i=>($.push(_t(i)),i)),me.set($.size())},r=()=>{if($.size()>0){const i=$.pop();me.set($.size()),i&&t(i)}else console.warn("No previous state available for rollback");me.set($.size())},s=i=>{$.clear(),me.set($.size());const l=Array.from({length:i.numberOfCards},(a,b)=>({id:xe(),numberInformation:Array(5).fill(null),colourInformation:Array(i.variant==="no-variant"?5:i.variant==="rainbows"||i.variant==="blacks"?6:7).fill(null),isHinted:!1,isChopMoved:!1,isFinessed:!1,isCritical:!1}));t(l)},u=de.subscribe(i=>{Ze.set(0),Y.update(l=>(l=new Set,l)),s(i)});return{subscribe:e,updateCards:i=>{n(l=>(o(),i(l)))},rollback:r,saveState:o,cleanup:()=>u()}}const K=ht();function gt(e){let t,n,o,r,s;return{c(){t=k("button"),n=T("Play/Discard"),t.disabled=o=e[0].size!==1},m(u,i){W(u,t,i),f(t,n),r||(s=j(t,"click",e[1]),r=!0)},p(u,[i]){i&1&&o!==(o=u[0].size!==1)&&(t.disabled=o)},i:q,o:q,d(u){u&&B(t),r=!1,s()}}}function kt(e,t,n){let o,r,s;U(e,Y,l=>n(0,r=l)),U(e,de,l=>n(2,s=l));function u(){if(r.size===1){const l=r.values().next().value;K.updateCards(a=>{const b=a.filter(C=>C.id!==l);return b.push(i(xe())),b}),r.clear()}}function i(l){return{id:l,numberInformation:Array(5).fill(null),colourInformation:Array(o==="no-variant"?5:o==="rainbows"||o==="blacks"?6:7).fill(null),isHinted:!1,isChopMoved:!1,isFinessed:!1,isCritical:!1}}return e.$$.update=()=>{e.$$.dirty&4&&(o=s.variant)},[r,u,s]}class Ct extends oe{constructor(t){super(),ne(this,t,kt,gt,x,{})}}function je(e){let t,n,o,r,s,u,i,l,a,b,C,y,p,_,S,O,v,I,g,m,h,F,L;return{c(){t=k("div"),n=k("div"),o=k("div"),r=k("label"),r.textContent="Number of Cards:",s=P(),u=k("select"),i=k("option"),i.textContent="3",l=k("option"),l.textContent="4",a=k("option"),a.textContent="5",b=P(),C=k("label"),C.textContent="Variant:",y=P(),p=k("select"),_=k("option"),_.textContent="No variant",S=k("option"),S.textContent="Rainbows",O=k("option"),O.textContent="Blacks",v=k("option"),v.textContent="Rainbows and Blacks",I=P(),g=k("button"),g.textContent="Save",m=P(),h=k("button"),h.textContent="Cancel",M(r,"for","numberOfCards"),i.__value="3",re(i,i.__value),l.__value="4",re(l,l.__value),a.__value="5",re(a,a.__value),M(u,"id","numberOfCards"),e[1].numberOfCards===void 0&&_e(()=>e[5].call(u)),M(C,"for","Variant"),_.__value="no-variant",re(_,_.__value),S.__value="rainbows",re(S,S.__value),O.__value="blacks",re(O,O.__value),v.__value="rainbows-and-blacks",re(v,v.__value),M(p,"id","Variant"),e[1].variant===void 0&&_e(()=>e[6].call(p)),M(o,"class","config-form svelte-16v23fx"),M(n,"class","config-modal svelte-16v23fx"),M(t,"class","modal-overlay svelte-16v23fx")},m(z,R){W(z,t,R),f(t,n),f(n,o),f(o,r),f(o,s),f(o,u),f(u,i),f(u,l),f(u,a),ke(u,e[1].numberOfCards,!0),f(o,b),f(o,C),f(o,y),f(o,p),f(p,_),f(p,S),f(p,O),f(p,v),ke(p,e[1].variant,!0),f(n,I),f(n,g),f(n,m),f(n,h),F||(L=[j(u,"change",e[5]),j(p,"change",e[6]),j(g,"click",e[3]),j(h,"click",e[2])],F=!0)},p(z,R){R&2&&ke(u,z[1].numberOfCards),R&2&&ke(p,z[1].variant)},d(z){z&&B(t),F=!1,Q(L)}}}function vt(e){let t,n=e[0]&&je(e);return{c(){n&&n.c(),t=Ie()},m(o,r){n&&n.m(o,r),W(o,t,r)},p(o,[r]){o[0]?n?n.p(o,r):(n=je(o),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:q,o:q,d(o){o&&B(t),n&&n.d(o)}}}function It(e,t,n){let o;U(e,de,b=>n(4,o=b));let{isOpen:r=!1}=t,s={numberOfCards:4,variant:"no-variant"};function u(){n(0,r=!1)}function i(){de.set(s),u()}function l(){s.numberOfCards=Re(this),n(1,s),n(0,r),n(4,o)}function a(){s.variant=Re(this),n(1,s),n(0,r),n(4,o)}return e.$$set=b=>{"isOpen"in b&&n(0,r=b.isOpen)},e.$$.update=()=>{e.$$.dirty&17&&r&&n(1,s=o),e.$$.dirty&1&&console.log(r)},[r,s,u,i,o,l,a]}class yt extends oe{constructor(t){super(),ne(this,t,It,vt,x,{isOpen:0})}}function Be(e,t,n){const o=e.slice();return o[23]=t[n],o}function qe(e,t,n){const o=e.slice();return o[26]=t[n],o}function We(e){let t,n,o,r,s,u,i,l,a,b,C,y,p,_,S=fe(e[2]),O=[];for(let g=0;g<S.length;g+=1)O[g]=De(qe(e,S,g));let v=fe(e[3]),I=[];for(let g=0;g<v.length;g+=1)I[g]=Ge(Be(e,v,g));return{c(){t=k("div"),n=k("div"),o=k("div");for(let g=0;g<O.length;g+=1)O[g].c();r=P(),s=k("div");for(let g=0;g<I.length;g+=1)I[g].c();u=P(),i=k("div"),l=k("button"),a=T("Save"),C=P(),y=k("button"),y.textContent="Cancel",M(o,"class","numbers-hints svelte-17jwble"),M(s,"class","colours-hints svelte-17jwble"),l.disabled=b=!e[1],M(i,"class","actions"),M(n,"class","hint-modal svelte-17jwble"),M(t,"class","modal-overlay svelte-17jwble")},m(g,m){W(g,t,m),f(t,n),f(n,o);for(let h=0;h<O.length;h+=1)O[h]&&O[h].m(o,null);f(n,r),f(n,s);for(let h=0;h<I.length;h+=1)I[h]&&I[h].m(s,null);f(n,u),f(n,i),f(i,l),f(l,a),f(i,C),f(i,y),p||(_=[j(l,"click",e[4]),j(y,"click",e[6])],p=!0)},p(g,m){if(m&38){S=fe(g[2]);let h;for(h=0;h<S.length;h+=1){const F=qe(g,S,h);O[h]?O[h].p(F,m):(O[h]=De(F),O[h].c(),O[h].m(o,null))}for(;h<O.length;h+=1)O[h].d(1);O.length=S.length}if(m&42){v=fe(g[3]);let h;for(h=0;h<v.length;h+=1){const F=Be(g,v,h);I[h]?I[h].p(F,m):(I[h]=Ge(F),I[h].c(),I[h].m(s,null))}for(;h<I.length;h+=1)I[h].d(1);I.length=v.length}m&2&&b!==(b=!g[1])&&(l.disabled=b)},d(g){g&&B(t),Pe(O,g),Pe(I,g),p=!1,Q(_)}}}function De(e){let t,n=e[26]+"",o,r,s;function u(){return e[8](e[26])}return{c(){t=k("button"),o=T(n),M(t,"class","btn"),t.hidden=!e[5](e[26])},m(i,l){W(i,t,l),f(t,o),r||(s=j(t,"click",u),r=!0)},p(i,l){e=i},d(i){i&&B(t),r=!1,s()}}}function Ge(e){let t,n=e[23]+"",o,r,s;function u(){return e[9](e[23])}return{c(){t=k("button"),o=T(n),M(t,"class","btn"),t.hidden=!e[5](e[23])},m(i,l){W(i,t,l),f(t,o),r||(s=j(t,"click",u),r=!0)},p(i,l){e=i},d(i){i&&B(t),r=!1,s()}}}function wt(e){let t,n=e[0]&&We(e);return{c(){n&&n.c(),t=Ie()},m(o,r){n&&n.m(o,r),W(o,t,r)},p(o,[r]){o[0]?n?n.p(o,r):(n=We(o),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:q,o:q,d(o){o&&B(t),n&&n.d(o)}}}function Ot(e,t,n){let o,r,s,u;U(e,K,d=>n(11,r=d)),U(e,Y,d=>n(12,s=d)),U(e,de,d=>n(7,u=d));let{isOpen:i=!1}=t;const l=[1,2,3,4,5],a=["red","yellow","blue","white","green"];let b=null;function C(){b&&(console.log("a hint!"),typeof b=="string"?y(b):typeof b=="number"&&v(b),Y.update(d=>(d=new Set,d)),L())}function y(d){switch(o){case"no-variant":p(d);break;case"rainbows":_(d);break;case"blacks":S(d);break;case"rainbows-and-blacks":O(d);break}}function p(d){const V=Array.from(s),N=a.findIndex(A=>A===d);K.updateCards(A=>A.map(c=>{const D=c.colourInformation.map((G,E)=>V.includes(c.id)?(c.isHinted=!0,E===N):E!==N?G:!1);return{...c,colourInformation:D}}))}function _(d){const V=Array.from(s),N=a.findIndex(A=>A===d);K.updateCards(A=>{let w=A;return w.forEach((c,D)=>{V.includes(c.id)?(c.isHinted=!0,c.colourInformation[5]===null&&c.colourInformation[N]===null?c.colourInformation.forEach((G,E)=>{E!=N&&E!=5&&(c.colourInformation[E]=!1)}):c.colourInformation[5]===null&&c.colourInformation[N]===!1?c.colourInformation.forEach((G,E)=>{E==5?c.colourInformation[E]=!0:c.colourInformation[E]=!1}):c.colourInformation[5]===!1&&c.colourInformation[N]===null&&c.colourInformation.forEach((G,E)=>{E==N?c.colourInformation[E]=!0:c.colourInformation[E]=!1})):c.colourInformation[5]!==!0&&(c.colourInformation[N]=!1,c.colourInformation[5]=!1)}),w})}function S(d){const V=Array.from(s),N=a.findIndex(A=>A===d);K.updateCards(A=>A.map(c=>{const D=c.colourInformation.map((G,E)=>V.includes(c.id)?(c.isHinted=!0,E===N):E!==N?G:!1);return{...c,colourInformation:D}}))}function O(d){const V=Array.from(s),N=a.findIndex(A=>A===d);K.updateCards(A=>{let w=A;return w.forEach((c,D)=>{V.includes(c.id)?(c.isHinted=!0,c.colourInformation[5]===null&&c.colourInformation[N]===null?c.colourInformation.forEach((G,E)=>{E!=N&&E!=5&&(c.colourInformation[E]=!1)}):c.colourInformation[5]===null&&c.colourInformation[N]===!1?c.colourInformation.forEach((G,E)=>{E==5?c.colourInformation[E]=!0:c.colourInformation[E]=!1}):c.colourInformation[5]===!1&&c.colourInformation[N]===null&&c.colourInformation.forEach((G,E)=>{E==N?c.colourInformation[E]=!0:c.colourInformation[E]=!1})):c.colourInformation[5]!==!0&&(c.colourInformation[N]=!1,c.colourInformation[5]=!1)}),w})}function v(d){const V=Array.from(s);K.updateCards(N=>N.map(w=>{const c=w.numberInformation.map((D,G)=>V.includes(w.id)?(w.isHinted=!0,G===d-1):G!==d-1?D:!1);return{...w,numberInformation:c}}))}function I(d){let V=!1;switch(o){case"no-variant":V=g(d);break;case"rainbows":V=m(d);break;case"blacks":V=h(d);break;case"rainbows-and-blacks":V=F(d);break}return V}function g(d){return Array.from(s).every(A=>{const w=r.find(c=>c.id===A);if(!w)return!1;if(typeof d=="string"){const c=a.indexOf(d);return w.colourInformation[c]===null||w.colourInformation[c]===!0}else if(typeof d=="number")return w.numberInformation[d-1]===null||w.numberInformation[d-1]===!0})}function m(d){return Array.from(s).every(A=>{const w=r.find(c=>c.id===A);if(!w)return!1;if(typeof d=="string"){if(w.colourInformation[5]===null||w.colourInformation[5]===!0)return!0;{const D=a.indexOf(d);return w.colourInformation[D]===null||w.colourInformation[D]===!0}}else if(typeof d=="number")return w.numberInformation[d-1]===null||w.numberInformation[d-1]===!0})}function h(d){return Array.from(s).every(A=>{const w=r.find(c=>c.id===A);if(!w)return!1;if(typeof d=="string"){const c=a.indexOf(d);return w.colourInformation[c]===null||w.colourInformation[c]===!0}else if(typeof d=="number")return w.numberInformation[d-1]===null||w.numberInformation[d-1]===!0})}function F(d){return Array.from(s).every(A=>{const w=r.find(c=>c.id===A);if(!w)return!1;if(typeof d=="string"){if(w.colourInformation[5]===null||w.colourInformation[5]===!0)return!0;{const D=a.indexOf(d);return w.colourInformation[D]===null||w.colourInformation[D]===!0}}else if(typeof d=="number")return w.numberInformation[d-1]===null||w.numberInformation[d-1]===!0})}function L(){n(0,i=!1),n(1,b=null)}const z=d=>n(1,b=d),R=d=>n(1,b=d);return e.$$set=d=>{"isOpen"in d&&n(0,i=d.isOpen)},e.$$.update=()=>{e.$$.dirty&128&&(o=u.variant)},[i,b,l,a,C,I,L,u,z,R]}class St extends oe{constructor(t){super(),ne(this,t,Ot,wt,x,{isOpen:0})}}function Je(e){let t,n,o,r,s,u,i,l,a,b,C,y,p,_,S,O,v;return{c(){t=k("div"),n=k("div"),o=k("div"),r=k("button"),r.textContent="Critical",s=P(),u=k("button"),u.textContent="Chop moved",i=P(),l=k("button"),l.textContent="Finessed",a=P(),b=k("div"),C=k("button"),y=T("Save"),_=P(),S=k("button"),S.textContent="Cancel",M(r,"class","btn"),M(u,"class","btn"),M(l,"class","btn"),M(o,"class","flags"),C.disabled=p=!e[1],M(b,"class","actions"),M(n,"class","mark-modal svelte-1fkqm3b"),M(t,"class","modal-overlay svelte-1fkqm3b")},m(I,g){W(I,t,g),f(t,n),f(n,o),f(o,r),f(o,s),f(o,u),f(o,i),f(o,l),f(n,a),f(n,b),f(b,C),f(C,y),f(b,_),f(b,S),O||(v=[j(r,"click",e[5]),j(u,"click",e[6]),j(l,"click",e[7]),j(C,"click",e[3]),j(S,"click",e[2])],O=!0)},p(I,g){g&2&&p!==(p=!I[1])&&(C.disabled=p)},d(I){I&&B(t),O=!1,Q(v)}}}function Ht(e){let t,n=e[0]&&Je(e);return{c(){n&&n.c(),t=Ie()},m(o,r){n&&n.m(o,r),W(o,t,r)},p(o,[r]){o[0]?n?n.p(o,r):(n=Je(o),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:q,o:q,d(o){o&&B(t),n&&n.d(o)}}}function Mt(e,t,n){let o,r,s;U(e,Y,p=>n(9,r=p)),U(e,K,p=>n(4,s=p));let{isOpen:u=!1}=t,i=null;function l(){n(1,i=null),n(0,u=!1)}function a(){const p=Array.from(r);o.map(_=>{if(p.includes(_.id))switch(i){case"critical":_.isCritical=!_.isCritical;break;case"chop-move":_.isChopMoved=!_.isChopMoved;break;case"finesse":_.isFinessed=!_.isFinessed;break}return _}),K.updateCards(_=>_),Y.update(_=>(_=new Set,_)),l()}const b=()=>n(1,i="critical"),C=()=>n(1,i="chop-move"),y=()=>n(1,i="finesse");return e.$$set=p=>{"isOpen"in p&&n(0,u=p.isOpen)},e.$$.update=()=>{e.$$.dirty&16&&(o=s)},[u,i,l,a,s,b,C,y]}class At extends oe{constructor(t){super(),ne(this,t,Mt,Ht,x,{isOpen:0})}}function Et(e){let t,n,o,r,s,u,i,l,a,b,C,y,p,_,S,O,v,I,g,m,h,F,L,z,R,d,V,N,A,w,c;i=new Ct({});function D(H){e[14](H)}let G={};e[1]!==void 0&&(G.isOpen=e[1]),h=new yt({props:G}),be.push(()=>Oe(h,"isOpen",D));function E(H){e[15](H)}let Ae={};e[2]!==void 0&&(Ae.isOpen=e[2]),z=new St({props:Ae}),be.push(()=>Oe(z,"isOpen",E));function $e(H){e[16](H)}let Ee={};return e[3]!==void 0&&(Ee.isOpen=e[3]),V=new At({props:Ee}),be.push(()=>Oe(V,"isOpen",$e)),{c(){t=k("div"),n=k("button"),n.textContent="Configure Game",o=P(),r=k("button"),s=T(e[0]),u=P(),le(i.$$.fragment),l=P(),a=k("button"),b=T("Record Hint"),y=P(),p=k("button"),_=T("Mark cards"),O=P(),v=k("button"),I=T("Undo"),m=P(),le(h.$$.fragment),L=P(),le(z.$$.fragment),d=P(),le(V.$$.fragment),M(n,"class","configure svelte-9e6wy5"),M(r,"class","wake-lock"),r.hidden=!e[6],M(a,"class","hint-panel svelte-9e6wy5"),a.disabled=C=e[5].size<1,M(p,"class","mark-panel"),p.disabled=S=e[5].size<1,M(v,"class","undo"),v.disabled=g=e[4]<1,M(t,"class","game-controls svelte-9e6wy5")},m(H,J){W(H,t,J),f(t,n),f(t,o),f(t,r),f(r,s),f(t,u),ee(i,t,null),f(t,l),f(t,a),f(a,b),f(t,y),f(t,p),f(p,_),f(t,O),f(t,v),f(v,I),W(H,m,J),ee(h,H,J),W(H,L,J),ee(z,H,J),W(H,d,J),ee(V,H,J),A=!0,w||(c=[j(n,"click",e[8]),j(r,"click",e[7]),j(a,"click",e[9]),j(p,"click",e[10]),j(v,"click",e[11])],w=!0)},p(H,[J]){(!A||J&1)&&Ce(s,H[0]),(!A||J&32&&C!==(C=H[5].size<1))&&(a.disabled=C),(!A||J&32&&S!==(S=H[5].size<1))&&(p.disabled=S),(!A||J&16&&g!==(g=H[4]<1))&&(v.disabled=g);const Le={};!F&&J&2&&(F=!0,Le.isOpen=H[1],ye(()=>F=!1)),h.$set(Le);const Ne={};!R&&J&4&&(R=!0,Ne.isOpen=H[2],ye(()=>R=!1)),z.$set(Ne);const ze={};!N&&J&8&&(N=!0,ze.isOpen=H[3],ye(()=>N=!1)),V.$set(ze)},i(H){A||(X(i.$$.fragment,H),X(h.$$.fragment,H),X(z.$$.fragment,H),X(V.$$.fragment,H),A=!0)},o(H){Z(i.$$.fragment,H),Z(h.$$.fragment,H),Z(z.$$.fragment,H),Z(V.$$.fragment,H),A=!1},d(H){H&&(B(t),B(m),B(L),B(d)),te(i),te(h,H),te(z,H),te(V,H),w=!1,Q(c)}}}function Lt(e,t,n){let o,r,s;U(e,me,m=>n(13,r=m)),U(e,Y,m=>n(5,s=m));let u=null,i="wakeLock"in navigator,l="Wake Lock Off";async function a(){if(u)u.release(),n(12,u=null),n(0,l="Wake Lock Off");else try{n(12,u=await navigator.wakeLock.request("screen")),u.addEventListener("release",()=>{n(12,u=null),n(0,l="Wake Lock Off")}),n(0,l="Wake Lock On")}catch(m){console.error(`Could not acquire wake lock: ${m}`)}}let b=!1;function C(){n(1,b=!0)}let y=!1;function p(){n(2,y=!0)}let _=!1;function S(){n(3,_=!0)}function O(){K.rollback()}function v(m){b=m,n(1,b)}function I(m){y=m,n(2,y)}function g(m){_=m,n(3,_)}return e.$$.update=()=>{e.$$.dirty&4096&&(u?n(0,l="Wake Lock On"):n(0,l="Wake Lock Off")),e.$$.dirty&8192&&n(4,o=r),e.$$.dirty&8192&&console.log(r)},[l,b,y,_,o,s,i,a,C,p,S,O,u,r,v,I,g]}class Nt extends oe{constructor(t){super(),ne(this,t,Lt,Et,x,{})}}function zt(e){let t,n,o,r=e[0]+1+"",s,u,i,l=Te(e[1])+"",a,b,C,y=e[6](e[2])+"",p,_,S,O;return{c(){t=k("div"),n=k("p"),o=T("Card "),s=T(r),u=P(),i=k("p"),a=T(l),b=P(),C=k("p"),p=T(y),M(t,"class",_="card no-"+e[5]+" svelte-yy599i"),M(t,"tabindex","0"),M(t,"role","button"),Fe(t,"border-color",e[4])},m(v,I){W(v,t,I),f(t,n),f(n,o),f(n,s),f(t,u),f(t,i),f(i,a),f(t,b),f(t,C),f(C,p),S||(O=[j(t,"click",e[13]),j(t,"keydown",e[14])],S=!0)},p(v,[I]){I&1&&r!==(r=v[0]+1+"")&&Ce(s,r),I&2&&l!==(l=Te(v[1])+"")&&Ce(a,l),I&4&&y!==(y=v[6](v[2])+"")&&Ce(p,y),I&32&&_!==(_="card no-"+v[5]+" svelte-yy599i")&&M(t,"class",_),I&16&&Fe(t,"border-color",v[4])},i:q,o:q,d(v){v&&B(t),S=!1,Q(O)}}}function Te(e){return e.map((n,o)=>n===!0||n===null?(o+1).toString():"").join(" ")}function Vt(e,t,n){let o,r,s,u;U(e,de,m=>n(12,u=m));let{id:i}=t,{numberInformation:l}=t,{colourInformation:a}=t,{selected:b=!1}=t,{isHinted:C}=t,{isFinessed:y}=t,{isChopMoved:p}=t,{isCritical:_}=t,{onSelect:S}=t;function O(m){return m.map((F,L)=>F===!0||F===null?v(L):"").join(" ")}function v(m){return m<5?["r","y","b","w","g"][m]:o=="blacks"&&m==5?"bl":o=="rainbows"&&m==5||o=="rainbows-and-blacks"&&m==5?"m":o=="rainbows-and-blacks"&&m==6?"bl":(console.log("Index {index} out of range for card {self.id} and variant {variant}"),"err")}const I=()=>S(i),g=m=>(m.key==="Enter"||m.key===" ")&&S(i);return e.$$set=m=>{"id"in m&&n(0,i=m.id),"numberInformation"in m&&n(1,l=m.numberInformation),"colourInformation"in m&&n(2,a=m.colourInformation),"selected"in m&&n(7,b=m.selected),"isHinted"in m&&n(8,C=m.isHinted),"isFinessed"in m&&n(9,y=m.isFinessed),"isChopMoved"in m&&n(10,p=m.isChopMoved),"isCritical"in m&&n(11,_=m.isCritical),"onSelect"in m&&n(3,S=m.onSelect)},e.$$.update=()=>{e.$$.dirty&4096&&(o=u.variant),e.$$.dirty&4096&&n(5,r=u.numberOfCards),e.$$.dirty&3968&&n(4,s=b?"blue":_?"red":C?"orange":y?"aqua":p?"white":"gray")},[i,l,a,S,s,r,O,b,C,y,p,_,u,I,g]}class Pt extends oe{constructor(t){super(),ne(this,t,Vt,zt,x,{id:0,numberInformation:1,colourInformation:2,selected:7,isHinted:8,isFinessed:9,isChopMoved:10,isCritical:11,onSelect:3})}}function Ue(e,t,n){const o=e.slice();return o[3]=t[n],o}function Ke(e,t){let n,o,r;return o=new Pt({props:{id:t[3].id,numberInformation:t[3].numberInformation,colourInformation:t[3].colourInformation,selected:t[1].has(t[3].id),isHinted:t[3].isHinted,isChopMoved:t[3].isChopMoved,isFinessed:t[3].isFinessed,isCritical:t[3].isCritical,onSelect:t[2]}}),{key:e,first:null,c(){n=Ie(),le(o.$$.fragment),this.first=n},m(s,u){W(s,n,u),ee(o,s,u),r=!0},p(s,u){t=s;const i={};u&1&&(i.id=t[3].id),u&1&&(i.numberInformation=t[3].numberInformation),u&1&&(i.colourInformation=t[3].colourInformation),u&3&&(i.selected=t[1].has(t[3].id)),u&1&&(i.isHinted=t[3].isHinted),u&1&&(i.isChopMoved=t[3].isChopMoved),u&1&&(i.isFinessed=t[3].isFinessed),u&1&&(i.isCritical=t[3].isCritical),o.$set(i)},i(s){r||(X(o.$$.fragment,s),r=!0)},o(s){Z(o.$$.fragment,s),r=!1},d(s){s&&B(n),te(o,s)}}}function Ft(e){let t,n=[],o=new Map,r,s=fe(e[0]);const u=i=>i[3].id;for(let i=0;i<s.length;i+=1){let l=Ue(e,s,i),a=u(l);o.set(a,n[i]=Ke(a,l))}return{c(){t=k("div");for(let i=0;i<n.length;i+=1)n[i].c();M(t,"class","hand svelte-insnbi")},m(i,l){W(i,t,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(t,null);r=!0},p(i,[l]){l&7&&(s=fe(i[0]),at(),n=dt(n,l,u,1,i,s,o,t,ct,Ke,null,Ue),ft())},i(i){if(!r){for(let l=0;l<s.length;l+=1)X(n[l]);r=!0}},o(i){for(let l=0;l<n.length;l+=1)Z(n[l]);r=!1},d(i){i&&B(t);for(let l=0;l<n.length;l+=1)n[l].d()}}}function Rt(e,t,n){let o,r;U(e,K,u=>n(0,o=u)),U(e,Y,u=>n(1,r=u));function s(u){r.has(u)?Y.update(i=>{const l=new Set(i);return l.delete(u),l}):Y.update(i=>{const l=new Set(i);return l.add(u),l})}return e.$$.update=()=>{e.$$.dirty&1&&console.log(o)},[o,r,s]}class jt extends oe{constructor(t){super(),ne(this,t,Rt,Ft,x,{})}}function Bt(e){let t,n,o,r,s,u,i;return n=new Nt({}),r=new jt({}),{c(){t=k("main"),le(n.$$.fragment),o=P(),le(r.$$.fragment),s=P(),u=k("a"),u.textContent="Check out my code!",M(u,"href","https://github.com/jparkhouse/hanabi-tracker/"),M(u,"target","_blank")},m(l,a){W(l,t,a),ee(n,t,null),f(t,o),ee(r,t,null),f(t,s),f(t,u),i=!0},p:q,i(l){i||(X(n.$$.fragment,l),X(r.$$.fragment,l),i=!0)},o(l){Z(n.$$.fragment,l),Z(r.$$.fragment,l),i=!1},d(l){l&&B(t),te(n),te(r)}}}class qt extends oe{constructor(t){super(),ne(this,t,null,Bt,x,{})}}new qt({target:document.getElementById("app")});
