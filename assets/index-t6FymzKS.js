var Ot=Object.defineProperty;var It=(e,t,n)=>t in e?Ot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ye=(e,t,n)=>(It(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const u of r)if(u.type==="childList")for(const o of u.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const u={};return r.integrity&&(u.integrity=r.integrity),r.referrerPolicy&&(u.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?u.credentials="include":r.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(r){if(r.ep)return;r.ep=!0;const u=n(r);fetch(r.href,u)}})();function q(){}function mt(e){return e()}function Ze(){return Object.create(null)}function D(e){e.forEach(mt)}function bt(e){return typeof e=="function"}function X(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let He;function xe(e,t){return e===t?!0:(He||(He=document.createElement("a")),He.href=t,e===He.href)}function St(e){return Object.keys(e).length===0}function Nt(e,...t){if(e==null){for(const i of t)i(void 0);return q}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function V(e,t,n){e.$$.on_destroy.push(Nt(t,n))}function f(e,t){e.appendChild(t)}function T(e,t,n){e.insertBefore(t,n||null)}function L(e){e.parentNode&&e.parentNode.removeChild(e)}function Pe(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function y(e){return document.createElement(e)}function j(e){return document.createTextNode(e)}function F(){return j(" ")}function Re(){return j("")}function z(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function qe(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function O(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Rt(e){return Array.from(e.childNodes)}function me(e,t){t=""+t,e.data!==t&&(e.data=t)}function ie(e,t){e.value=t??""}function $e(e,t,n,i){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function Me(e,t,n){for(let i=0;i<e.options.length;i+=1){const r=e.options[i];if(r.__value===t){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function et(e){const t=e.querySelector(":checked");return t&&t.__value}let je;function ke(e){je=e}function We(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(i=>i.call(this,t))}const de=[],Ce=[];let he=[];const Le=[],At=Promise.resolve();let Te=!1;function Bt(){Te||(Te=!0,At.then(_t))}function we(e){he.push(e)}function Be(e){Le.push(e)}const ze=new Set;let ce=0;function _t(){if(ce!==0)return;const e=je;do{try{for(;ce<de.length;){const t=de[ce];ce++,ke(t),zt(t.$$)}}catch(t){throw de.length=0,ce=0,t}for(ke(null),de.length=0,ce=0;Ce.length;)Ce.pop()();for(let t=0;t<he.length;t+=1){const n=he[t];ze.has(n)||(ze.add(n),n())}he.length=0}while(de.length);for(;Le.length;)Le.pop()();Te=!1,ze.clear(),ke(e)}function zt(e){if(e.fragment!==null){e.update(),D(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(we)}}function Ft(e){const t=[],n=[];he.forEach(i=>e.indexOf(i)===-1?t.push(i):n.push(i)),n.forEach(i=>i()),he=t}const Ie=new Set;let oe;function Pt(){oe={r:0,c:[],p:oe}}function Lt(){oe.r||D(oe.c),oe=oe.p}function Y(e,t){e&&e.i&&(Ie.delete(e),e.i(t))}function K(e,t,n,i){if(e&&e.o){if(Ie.has(e))return;Ie.add(e),oe.c.push(()=>{Ie.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}function x(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Tt(e,t){K(e,1,1,()=>{t.delete(e.key)})}function qt(e,t,n,i,r,u,o,s,l,c,d,m){let p=e.length,h=u.length,v=p;const C={};for(;v--;)C[e[v].key]=v;const _=[],b=new Map,H=new Map,a=[];for(v=h;v--;){const R=m(r,u,v),B=n(R);let k=o.get(B);k?i&&a.push(()=>k.p(R,t)):(k=c(B,R),k.c()),b.set(B,_[v]=k),B in C&&H.set(B,Math.abs(v-C[B]))}const I=new Set,g=new Set;function w(R){Y(R,1),R.m(s,d),o.set(R.key,R),d=R.first,h--}for(;p&&h;){const R=_[h-1],B=e[p-1],k=R.key,M=B.key;R===B?(d=R.first,p--,h--):b.has(M)?!o.has(k)||I.has(k)?w(R):g.has(M)?p--:H.get(k)>H.get(M)?(g.add(k),w(R)):(I.add(M),p--):(l(B,o),p--)}for(;p--;){const R=e[p];b.has(R.key)||l(R,o)}for(;h;)w(_[h-1]);return D(a),_}function Fe(e,t,n){const i=e.$$.props[t];i!==void 0&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function se(e){e&&e.c()}function $(e,t,n){const{fragment:i,after_update:r}=e.$$;i&&i.m(t,n),we(()=>{const u=e.$$.on_mount.map(mt).filter(bt);e.$$.on_destroy?e.$$.on_destroy.push(...u):D(u),e.$$.on_mount=[]}),r.forEach(we)}function ee(e,t){const n=e.$$;n.fragment!==null&&(Ft(n.after_update),D(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function jt(e,t){e.$$.dirty[0]===-1&&(de.push(e),Bt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function te(e,t,n,i,r,u,o=null,s=[-1]){const l=je;ke(e);const c=e.$$={fragment:null,ctx:[],props:u,update:q,not_equal:r,bound:Ze(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:Ze(),dirty:s,skip_bound:!1,root:t.target||l.$$.root};o&&o(c.root);let d=!1;if(c.ctx=n?n(e,t.props||{},(m,p,...h)=>{const v=h.length?h[0]:p;return c.ctx&&r(c.ctx[m],c.ctx[m]=v)&&(!c.skip_bound&&c.bound[m]&&c.bound[m](v),d&&jt(e,m)),p}):[],c.update(),d=!0,D(c.before_update),c.fragment=i?i(c.ctx):!1,t.target){if(t.hydrate){const m=Rt(t.target);c.fragment&&c.fragment.l(m),m.forEach(L)}else c.fragment&&c.fragment.c();t.intro&&Y(e.$$.fragment),$(e,t.target,t.anchor),_t()}ke(l)}class ne{constructor(){ye(this,"$$");ye(this,"$$set")}$destroy(){ee(this,1),this.$destroy=q}$on(t,n){if(!bt(n))return q;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(t){this.$$set&&!St(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Wt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Wt);const fe=[];function ve(e,t=q){let n;const i=new Set;function r(s){if(X(e,s)&&(e=s,n)){const l=!fe.length;for(const c of i)c[1](),fe.push(c,e);if(l){for(let c=0;c<fe.length;c+=2)fe[c][0](fe[c+1]);fe.length=0}}}function u(s){r(s(e))}function o(s,l=q){const c=[s,l];return i.add(c),i.size===1&&(n=t(r,u)||q),s(e),()=>{i.delete(c),i.size===0&&n&&(n(),n=null)}}return{set:r,update:u,subscribe:o}}const J=ve(new Set),gt=-1,Ae=0,Se=1,Ne=2,Ge=3,Ve=4,De=5,Ee=6,kt=7,Ct=8,tt=typeof self=="object"?self:globalThis,Gt=(e,t)=>{const n=(r,u)=>(e.set(u,r),r),i=r=>{if(e.has(r))return e.get(r);const[u,o]=t[r];switch(u){case Ae:case gt:return n(o,r);case Se:{const s=n([],r);for(const l of o)s.push(i(l));return s}case Ne:{const s=n({},r);for(const[l,c]of o)s[i(l)]=i(c);return s}case Ge:return n(new Date(o),r);case Ve:{const{source:s,flags:l}=o;return n(new RegExp(s,l),r)}case De:{const s=n(new Map,r);for(const[l,c]of o)s.set(i(l),i(c));return s}case Ee:{const s=n(new Set,r);for(const l of o)s.add(i(l));return s}case kt:{const{name:s,message:l}=o;return n(new tt[s](l),r)}case Ct:return n(BigInt(o),r);case"BigInt":return n(Object(BigInt(o)),r)}return n(new tt[u](o),r)};return i},nt=e=>Gt(new Map,e)(0),ae="",{toString:Vt}={},{keys:Dt}=Object,_e=e=>{const t=typeof e;if(t!=="object"||!e)return[Ae,t];const n=Vt.call(e).slice(8,-1);switch(n){case"Array":return[Se,ae];case"Object":return[Ne,ae];case"Date":return[Ge,ae];case"RegExp":return[Ve,ae];case"Map":return[De,ae];case"Set":return[Ee,ae]}return n.includes("Array")?[Se,n]:n.includes("Error")?[kt,n]:[Ne,n]},Oe=([e,t])=>e===Ae&&(t==="function"||t==="symbol"),Et=(e,t,n,i)=>{const r=(o,s)=>{const l=i.push(o)-1;return n.set(s,l),l},u=o=>{if(n.has(o))return n.get(o);let[s,l]=_e(o);switch(s){case Ae:{let d=o;switch(l){case"bigint":s=Ct,d=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+l);d=null;break;case"undefined":return r([gt],o)}return r([s,d],o)}case Se:{if(l)return r([l,[...o]],o);const d=[],m=r([s,d],o);for(const p of o)d.push(u(p));return m}case Ne:{if(l)switch(l){case"BigInt":return r([l,o.toString()],o);case"Boolean":case"Number":case"String":return r([l,o.valueOf()],o)}if(t&&"toJSON"in o)return u(o.toJSON());const d=[],m=r([s,d],o);for(const p of Dt(o))(e||!Oe(_e(o[p])))&&d.push([u(p),u(o[p])]);return m}case Ge:return r([s,o.toISOString()],o);case Ve:{const{source:d,flags:m}=o;return r([s,{source:d,flags:m}],o)}case De:{const d=[],m=r([s,d],o);for(const[p,h]of o)(e||!(Oe(_e(p))||Oe(_e(h))))&&d.push([u(p),u(h)]);return m}case Ee:{const d=[],m=r([s,d],o);for(const p of o)(e||!Oe(_e(p)))&&d.push(u(p));return m}}const{message:c}=o;return r([s,{name:l,message:c}],o)};return u},it=(e,{json:t,lossy:n}={})=>{const i=[];return Et(!(t||n),!!t,new Map,i)(e),i},Yt=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?nt(it(e,t)):structuredClone(e):(e,t)=>nt(it(e,t));var Z=(e=>(e[e.Red=1]="Red",e[e.Yellow=2]="Yellow",e[e.Blue=4]="Blue",e[e.White=8]="White",e[e.Green=16]="Green",e[e.Rainbow=32]="Rainbow",e[e.Black=64]="Black",e))(Z||{}),le=(e=>(e[e.NoVariant=31]="NoVariant",e[e.Rainbows=63]="Rainbows",e[e.Blacks=95]="Blacks",e[e.RainbowsAndBlacks=127]="RainbowsAndBlacks",e))(le||{});const re={1:{stringHint:"Red",colourHint:1,positiveColourHintModifier:null,negativeColourHintModifier:null,positiveNumberHintModifier:null,negativeNumberHintModifier:null},2:{stringHint:"Yellow",colourHint:2,positiveColourHintModifier:null,negativeColourHintModifier:null,positiveNumberHintModifier:null,negativeNumberHintModifier:null},4:{stringHint:"Blue",colourHint:4,positiveColourHintModifier:null,negativeColourHintModifier:null,positiveNumberHintModifier:null,negativeNumberHintModifier:null},8:{stringHint:"White",colourHint:8,positiveColourHintModifier:null,negativeColourHintModifier:null,positiveNumberHintModifier:null,negativeNumberHintModifier:null},16:{stringHint:"Green",colourHint:16,positiveColourHintModifier:null,negativeColourHintModifier:null,positiveNumberHintModifier:null,negativeNumberHintModifier:null},32:{stringHint:null,colourHint:null,positiveColourHintModifier:32,negativeColourHintModifier:32,positiveNumberHintModifier:null,negativeNumberHintModifier:null},64:{stringHint:null,colourHint:null,positiveColourHintModifier:null,negativeColourHintModifier:null,positiveNumberHintModifier:null,negativeNumberHintModifier:null}};function pe(e){let t=0,n=[];for(;1<<t<=e;)(1<<t&e)==1<<t&&n.push(1<<t),t=t+1;return n}const be=ve({numberOfCards:4,variant:le.NoVariant}),wt=ve(0);function vt(){let e=0;return wt.update(t=>(e=t,t+1)),e}class Jt{constructor(t=1/0){ye(this,"storage",[]);this.capacity=t}push(t){if(this.storage.length>=this.capacity){let n=this.storage.length-this.capacity+1;this.storage.splice(0,n)}this.storage.push(t)}pop(){if(this.size()>0)return this.storage.pop();throw console.error("empty stack popped")}peek(){return this.storage[this.storage.length-1]}size(){return this.storage.length}clear(){this.storage=[]}}var G=(e=>(e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=4]="Three",e[e.Four=8]="Four",e[e.Five=16]="Five",e[e.All=31]="All",e))(G||{});function Ut(e){let t=0,n=[];for(;1<<t<=e;)(1<<t&e)==1<<t&&n.push(1<<t),t=t+1;return n}const Q=new Jt(5),ge=ve(0);function Kt(){const{subscribe:e,set:t,update:n}=ve([]),i=()=>{n(s=>(Q.push(Yt(s)),s)),ge.set(Q.size())},r=()=>{if(Q.size()>0){const s=Q.pop();ge.set(Q.size()),s&&t(s)}else console.warn("No previous state available for rollback");ge.set(Q.size())},u=s=>{Q.clear(),ge.set(Q.size());const l=Array.from({length:s.numberOfCards},(c,d)=>({id:vt(),numberInformation:G.All,colourInformation:s.variant,isHinted:!1,isChopMoved:!1,isFinessed:!1,isCritical:!1}));t(l)},o=be.subscribe(s=>{wt.set(0),J.update(l=>(l=new Set,l)),u(s)});return{subscribe:e,updateCards:s=>{n(l=>(i(),s(l)))},rollback:r,saveState:i,cleanup:()=>o()}}const ue=Kt();function Xt(e){let t,n,i,r,u;return{c(){t=y("button"),n=j("Play/Discard"),t.disabled=i=e[0].size!==1},m(o,s){T(o,t,s),f(t,n),r||(u=z(t,"click",e[1]),r=!0)},p(o,[s]){s&1&&i!==(i=o[0].size!==1)&&(t.disabled=i)},i:q,o:q,d(o){o&&L(t),r=!1,u()}}}function Qt(e,t,n){let i,r;V(e,be,s=>n(2,i=s)),V(e,J,s=>n(0,r=s));function u(){if(r.size===1){const s=r.values().next().value;ue.updateCards(l=>{const c=l.filter(d=>d.id!==s);return c.push(o(vt())),c}),r.clear()}}function o(s){return{id:s,numberInformation:G.All,colourInformation:i.variant,isHinted:!1,isChopMoved:!1,isFinessed:!1,isCritical:!1}}return e.$$.update=()=>{e.$$.dirty&4&&i.variant},[r,u,i]}class Zt extends ne{constructor(t){super(),te(this,t,Qt,Xt,X,{})}}function rt(e){let t,n,i,r,u,o,s,l,c,d,m,p,h,v,C,_,b,H,a,I,g,w,R,B,k;return{c(){t=y("div"),n=y("div"),i=y("div"),r=y("label"),r.textContent="Number of Cards:",u=F(),o=y("select"),s=y("option"),s.textContent="3",l=y("option"),l.textContent="4",c=y("option"),c.textContent="5",d=F(),m=y("label"),m.textContent="Variant:",p=F(),h=y("select"),v=y("option"),v.textContent="No variant",C=y("option"),C.textContent="Rainbows",_=y("option"),_.textContent="Blacks",b=y("option"),b.textContent="Rainbows and Blacks",H=F(),a=y("button"),I=j(e[2]),g=F(),w=y("button"),R=j(e[3]),O(r,"for","numberOfCards"),s.__value="3",ie(s,s.__value),l.__value="4",ie(l,l.__value),c.__value="5",ie(c,c.__value),O(o,"id","numberOfCards"),e[1].numberOfCards===void 0&&we(()=>e[9].call(o)),O(m,"for","Variant"),v.__value=le.NoVariant,ie(v,v.__value),C.__value=le.Rainbows,ie(C,C.__value),_.__value=le.Blacks,ie(_,_.__value),b.__value=le.RainbowsAndBlacks,ie(b,b.__value),O(h,"id","Variant"),e[1].variant===void 0&&we(()=>e[10].call(h)),O(i,"class","config-form svelte-1s43tt7"),O(n,"class","config-modal svelte-1s43tt7"),O(t,"class","modal-overlay svelte-1s43tt7")},m(M,A){T(M,t,A),f(t,n),f(n,i),f(i,r),f(i,u),f(i,o),f(o,s),f(o,l),f(o,c),Me(o,e[1].numberOfCards,!0),f(i,d),f(i,m),f(i,p),f(i,h),f(h,v),f(h,C),f(h,_),f(h,b),Me(h,e[1].variant,!0),f(n,H),f(n,a),f(a,I),f(n,g),f(n,w),f(w,R),B||(k=[z(o,"change",e[9]),z(h,"change",e[10]),z(a,"click",e[5]),z(w,"click",e[4]),z(n,"click",qe(e[8])),z(t,"click",e[4])],B=!0)},p(M,A){A&2&&Me(o,M[1].numberOfCards),A&2&&Me(h,M[1].variant),A&4&&me(I,M[2]),A&8&&me(R,M[3])},d(M){M&&L(t),B=!1,D(k)}}}function xt(e){let t,n=e[0]&&rt(e);return{c(){n&&n.c(),t=Re()},m(i,r){n&&n.m(i,r),T(i,t,r)},p(i,[r]){i[0]?n?n.p(i,r):(n=rt(i),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:q,o:q,d(i){i&&L(t),n&&n.d(i)}}}function $t(e,t){return e.numberOfCards===t.numberOfCards&&e.variant===t.variant}function en(e,t,n){let i;V(e,be,v=>n(7,i=v));let{isOpen:r=!1}=t,u={numberOfCards:4,variant:le.NoVariant},o=!1;function s(){n(0,r=!1),n(6,o=!1)}function l(){be.set(u),s()}let c="Reset",d="Close";function m(v){We.call(this,e,v)}function p(){u.numberOfCards=et(this),n(1,u),n(0,r),n(6,o),n(7,i)}function h(){u.variant=et(this),n(1,u),n(0,r),n(6,o),n(7,i)}return e.$$set=v=>{"isOpen"in v&&n(0,r=v.isOpen)},e.$$.update=()=>{e.$$.dirty&193&&r&&!o&&(n(1,u={...i}),n(6,o=!0)),e.$$.dirty&130&&($t(i,u)?(n(2,c="Reset"),n(3,d="Close")):(n(2,c="Update"),n(3,d="Cancel")))},[r,u,c,d,s,l,o,i,m,p,h]}class tn extends ne{constructor(t){super(),te(this,t,en,xt,X,{isOpen:0})}}function ot(e,t,n){const i=e.slice();return i[22]=t[n],i}function st(e,t,n){const i=e.slice();return i[25]=t[n],i}function lt(e){let t,n,i,r,u,o,s,l,c,d,m,p,h,v,C=x([0,1,2,3,4]),_=[];for(let a=0;a<5;a+=1)_[a]=ut(st(e,C,a));let b=x(e[2]),H=[];for(let a=0;a<b.length;a+=1)H[a]=ct(ot(e,b,a));return{c(){t=y("div"),n=y("div"),i=y("div");for(let a=0;a<5;a+=1)_[a].c();r=F(),u=y("div");for(let a=0;a<H.length;a+=1)H[a].c();o=F(),s=y("div"),l=y("button"),c=j("Save"),m=F(),p=y("button"),p.textContent="Cancel",O(i,"class","numbers-hints svelte-cxqqya"),O(u,"class","colours-hints svelte-cxqqya"),l.disabled=d=!e[1],O(s,"class","actions"),O(n,"class","hint-modal svelte-cxqqya"),O(t,"class","modal-overlay svelte-cxqqya")},m(a,I){T(a,t,I),f(t,n),f(n,i);for(let g=0;g<5;g+=1)_[g]&&_[g].m(i,null);f(n,r),f(n,u);for(let g=0;g<H.length;g+=1)H[g]&&H[g].m(u,null);f(n,o),f(n,s),f(s,l),f(l,c),f(s,m),f(s,p),h||(v=[z(l,"click",e[7]),z(p,"click",e[8]),z(n,"click",qe(e[11])),z(t,"click",e[8])],h=!0)},p(a,I){if(I&90){C=x([0,1,2,3,4]);let g;for(g=0;g<5;g+=1){const w=st(a,C,g);_[g]?_[g].p(w,I):(_[g]=ut(w),_[g].c(),_[g].m(i,null))}for(;g<5;g+=1)_[g].d(1)}if(I&38){b=x(a[2]);let g;for(g=0;g<b.length;g+=1){const w=ot(a,b,g);H[g]?H[g].p(w,I):(H[g]=ct(w),H[g].c(),H[g].m(u,null))}for(;g<H.length;g+=1)H[g].d(1);H.length=b.length}I&2&&d!==(d=!a[1])&&(l.disabled=d)},d(a){a&&L(t),Pe(_,a),Pe(H,a),h=!1,D(v)}}}function ut(e){let t,n=e[3][e[25]]+"",i,r,u;function o(){return e[12](e[25])}return{c(){t=y("button"),i=j(n),O(t,"class","btn"),t.hidden=!e[6](e[4][e[25]])},m(s,l){T(s,t,l),f(t,i),r||(u=z(t,"click",o),r=!0)},p(s,l){e=s},d(s){s&&L(t),r=!1,u()}}}function ct(e){let t,n=re[e[22]].stringHint+"",i,r,u,o;function s(){return e[13](e[22])}return{c(){t=y("button"),i=j(n),O(t,"class","btn"),t.hidden=r=!e[5](e[22])},m(l,c){T(l,t,c),f(t,i),u||(o=z(t,"click",s),u=!0)},p(l,c){e=l,c&4&&n!==(n=re[e[22]].stringHint+"")&&me(i,n),c&4&&r!==(r=!e[5](e[22]))&&(t.hidden=r)},d(l){l&&L(t),u=!1,o()}}}function nn(e){let t,n=e[0]&&lt(e);return{c(){n&&n.c(),t=Re()},m(i,r){n&&n.m(i,r),T(i,t,r)},p(i,[r]){i[0]?n?n.p(i,r):(n=lt(i),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:q,o:q,d(i){i&&L(t),n&&n.d(i)}}}function rn(e,t,n){let i,r,u,o;V(e,J,k=>n(14,r=k)),V(e,ue,k=>n(15,u=k)),V(e,be,k=>n(10,o=k));let{isOpen:s=!1}=t,l={type:null,value:0},c=[],d=["1","2","3","4","5"],m=[G.One,G.Two,G.Three,G.Four,G.Five];function p(k){return Array.from(r).every(U=>{const N=u.find(P=>P.id===U);if(N){const P=v(N);return(N.colourInformation&(k|P))>0}else return!1})}function h(k){return Array.from(r).every(U=>{const N=u.find(P=>P.id===U);if(N){const P=C(N);return(N.numberInformation&(k|P))>0}else return!1})}function v(k){return pe(k.colourInformation).map(M=>re[M].positiveColourHintModifier).filter(M=>M!==null).reduce((M,A)=>M|A,0)}function C(k){return pe(k.colourInformation).map(M=>re[M].positiveNumberHintModifier).filter(M=>M!==null).reduce((M,A)=>M|A,0)}function _(k){return pe(k.colourInformation).map(M=>re[M].negativeColourHintModifier).filter(M=>M!==null).reduce((M,A)=>M|A,0)}function b(k){return pe(k.colourInformation).map(M=>re[M].negativeNumberHintModifier).filter(M=>M!==null).reduce((M,A)=>M|A,0)}function H(){l.type&&(l.type=="colour"?a(l.value):l.type=="number"&&I(l.value),J.update(k=>(k=new Set,k)),g())}function a(k){const M=Array.from(r);ue.updateCards(A=>A.map(N=>{if(M.includes(N.id)){const P=v(N),E=N.colourInformation&(k|P);return{...N,colourInformation:E,isHinted:!0}}else{const P=_(N),E=N.colourInformation&~(k|P);return{...N,colourInformation:E}}}))}function I(k){const M=Array.from(r);ue.updateCards(A=>A.map(N=>{if(M.includes(N.id)){const P=C(N),E=N.numberInformation&(k|P);return{...N,numberInformation:E,isHinted:!0}}else{const P=b(N),E=N.numberInformation&~(k|P);return{...N,numberInformation:E}}}))}function g(){n(0,s=!1),n(1,l={type:null,value:0})}function w(k){We.call(this,e,k)}const R=k=>n(1,l={type:"number",value:m[k]}),B=k=>n(1,l={type:"colour",value:k});return e.$$set=k=>{"isOpen"in k&&n(0,s=k.isOpen)},e.$$.update=()=>{e.$$.dirty&1024&&n(9,i=o.variant),e.$$.dirty&512&&n(2,c=pe(i).filter(k=>re[k].stringHint!=null))},[s,l,c,d,m,p,h,H,g,i,o,w,R,B]}class on extends ne{constructor(t){super(),te(this,t,rn,nn,X,{isOpen:0})}}function ft(e){let t,n,i,r,u,o,s,l,c,d,m,p,h,v,C,_,b;return{c(){t=y("div"),n=y("div"),i=y("div"),r=y("button"),r.textContent="Critical",u=F(),o=y("button"),o.textContent="Chop moved",s=F(),l=y("button"),l.textContent="Finessed",c=F(),d=y("div"),m=y("button"),p=j("Save"),v=F(),C=y("button"),C.textContent="Cancel",O(r,"class","btn"),O(o,"class","btn"),O(l,"class","btn"),O(i,"class","flags svelte-7kvbz8"),m.disabled=h=!e[1],O(d,"class","actions"),O(n,"class","mark-modal svelte-7kvbz8"),O(t,"class","modal-overlay svelte-7kvbz8")},m(H,a){T(H,t,a),f(t,n),f(n,i),f(i,r),f(i,u),f(i,o),f(i,s),f(i,l),f(n,c),f(n,d),f(d,m),f(m,p),f(d,v),f(d,C),_||(b=[z(r,"click",e[5]),z(o,"click",e[6]),z(l,"click",e[7]),z(m,"click",e[3]),z(C,"click",e[2]),z(n,"click",qe(e[4])),z(t,"click",e[2])],_=!0)},p(H,a){a&2&&h!==(h=!H[1])&&(m.disabled=h)},d(H){H&&L(t),_=!1,D(b)}}}function sn(e){let t,n=e[0]&&ft(e);return{c(){n&&n.c(),t=Re()},m(i,r){n&&n.m(i,r),T(i,t,r)},p(i,[r]){i[0]?n?n.p(i,r):(n=ft(i),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:q,o:q,d(i){i&&L(t),n&&n.d(i)}}}function ln(e,t,n){let i;V(e,J,p=>n(8,i=p));let{isOpen:r=!1}=t,u=null;function o(){n(1,u=null),n(0,r=!1)}function s(){const p=Array.from(i);ue.updateCards(h=>h.map(C=>{if(p.includes(C.id))switch(u){case"critical":C.isCritical=!C.isCritical;break;case"chop-move":C.isChopMoved=!C.isChopMoved;break;case"finesse":C.isFinessed=!C.isFinessed;break}return C})),J.update(h=>(h=new Set,h)),o()}function l(p){We.call(this,e,p)}const c=()=>n(1,u="critical"),d=()=>n(1,u="chop-move"),m=()=>n(1,u="finesse");return e.$$set=p=>{"isOpen"in p&&n(0,r=p.isOpen)},[r,u,o,s,l,c,d,m]}class un extends ne{constructor(t){super(),te(this,t,ln,sn,X,{isOpen:0})}}function cn(e){let t,n,i,r,u,o,s,l,c,d,m,p,h,v,C,_,b,H,a,I,g,w,R,B,k,M,A,U,N,P,E;s=new Zt({});function yt(S){e[14](S)}let Ye={};e[1]!==void 0&&(Ye.isOpen=e[1]),g=new tn({props:Ye}),Ce.push(()=>Fe(g,"isOpen",yt));function Ht(S){e[15](S)}let Je={};e[2]!==void 0&&(Je.isOpen=e[2]),B=new on({props:Je}),Ce.push(()=>Fe(B,"isOpen",Ht));function Mt(S){e[16](S)}let Ue={};return e[3]!==void 0&&(Ue.isOpen=e[3]),A=new un({props:Ue}),Ce.push(()=>Fe(A,"isOpen",Mt)),{c(){t=y("div"),n=y("button"),n.textContent="Configure Game",i=F(),r=y("button"),u=j(e[0]),o=F(),se(s.$$.fragment),l=F(),c=y("button"),d=j("Record Hint"),p=F(),h=y("button"),v=j("Mark cards"),_=F(),b=y("button"),H=j("Undo"),I=F(),se(g.$$.fragment),R=F(),se(B.$$.fragment),M=F(),se(A.$$.fragment),O(n,"class","configure svelte-9e6wy5"),O(r,"class","wake-lock"),r.hidden=!e[6],O(c,"class","hint-panel svelte-9e6wy5"),c.disabled=m=e[5].size<1,O(h,"class","mark-panel"),h.disabled=C=e[5].size<1,O(b,"class","undo"),b.disabled=a=e[4]<1,O(t,"class","game-controls svelte-9e6wy5")},m(S,W){T(S,t,W),f(t,n),f(t,i),f(t,r),f(r,u),f(t,o),$(s,t,null),f(t,l),f(t,c),f(c,d),f(t,p),f(t,h),f(h,v),f(t,_),f(t,b),f(b,H),T(S,I,W),$(g,S,W),T(S,R,W),$(B,S,W),T(S,M,W),$(A,S,W),N=!0,P||(E=[z(n,"click",e[8]),z(r,"click",e[7]),z(c,"click",e[9]),z(h,"click",e[10]),z(b,"click",e[11])],P=!0)},p(S,[W]){(!N||W&1)&&me(u,S[0]),(!N||W&32&&m!==(m=S[5].size<1))&&(c.disabled=m),(!N||W&32&&C!==(C=S[5].size<1))&&(h.disabled=C),(!N||W&16&&a!==(a=S[4]<1))&&(b.disabled=a);const Ke={};!w&&W&2&&(w=!0,Ke.isOpen=S[1],Be(()=>w=!1)),g.$set(Ke);const Xe={};!k&&W&4&&(k=!0,Xe.isOpen=S[2],Be(()=>k=!1)),B.$set(Xe);const Qe={};!U&&W&8&&(U=!0,Qe.isOpen=S[3],Be(()=>U=!1)),A.$set(Qe)},i(S){N||(Y(s.$$.fragment,S),Y(g.$$.fragment,S),Y(B.$$.fragment,S),Y(A.$$.fragment,S),N=!0)},o(S){K(s.$$.fragment,S),K(g.$$.fragment,S),K(B.$$.fragment,S),K(A.$$.fragment,S),N=!1},d(S){S&&(L(t),L(I),L(R),L(M)),ee(s),ee(g,S),ee(B,S),ee(A,S),P=!1,D(E)}}}function fn(e,t,n){let i,r,u;V(e,ge,I=>n(13,r=I)),V(e,J,I=>n(5,u=I));let o=null,s="wakeLock"in navigator,l="Wake Lock Off";async function c(){if(o)o.release(),n(12,o=null),n(0,l="Wake Lock Off");else try{n(12,o=await navigator.wakeLock.request("screen")),o.addEventListener("release",()=>{n(12,o=null),n(0,l="Wake Lock Off")}),n(0,l="Wake Lock On")}catch(I){console.error(`Could not acquire wake lock: ${I}`)}}let d=!1;function m(){n(1,d=!0)}let p=!1;function h(){n(2,p=!0)}let v=!1;function C(){n(3,v=!0)}function _(){ue.rollback()}function b(I){d=I,n(1,d)}function H(I){p=I,n(2,p)}function a(I){v=I,n(3,v)}return e.$$.update=()=>{e.$$.dirty&4096&&(o?n(0,l="Wake Lock On"):n(0,l="Wake Lock Off")),e.$$.dirty&8192&&n(4,i=r)},[l,d,p,v,i,u,s,c,m,h,C,_,o,r,b,H,a]}class an extends ne{constructor(t){super(),te(this,t,fn,cn,X,{})}}function at(e,t,n){const i=e.slice();return i[20]=t[n],i}function dt(e){let t,n;return{c(){t=y("img"),xe(t.src,n=e[20])||O(t,"src",n),O(t,"alt","colour icon"),O(t,"class","icon svelte-pr30kl")},m(i,r){T(i,t,r)},p(i,r){r&16&&!xe(t.src,n=i[20])&&O(t,"src",n)},d(i){i&&L(t)}}}function dn(e){let t,n,i,r=e[0]+1+"",u,o,s,l=e[7](e[1])+"",c,d,m,p,h,v,C=x(e[4]),_=[];for(let b=0;b<C.length;b+=1)_[b]=dt(at(e,C,b));return{c(){t=y("div"),n=y("p"),i=j("Card "),u=j(r),o=F(),s=y("p"),c=j(l),d=F(),m=y("div");for(let b=0;b<_.length;b+=1)_[b].c();O(m,"class","icons svelte-pr30kl"),O(t,"class",p="card no-"+e[6]+" "+(e[3]!=null?e[3]:"")+" svelte-pr30kl"),O(t,"tabindex","0"),O(t,"role","button"),$e(t,"border-color",e[5])},m(b,H){T(b,t,H),f(t,n),f(n,i),f(n,u),f(t,o),f(t,s),f(s,c),f(t,d),f(t,m);for(let a=0;a<_.length;a+=1)_[a]&&_[a].m(m,null);h||(v=[z(t,"click",e[15]),z(t,"keydown",e[16])],h=!0)},p(b,[H]){if(H&1&&r!==(r=b[0]+1+"")&&me(u,r),H&2&&l!==(l=b[7](b[1])+"")&&me(c,l),H&16){C=x(b[4]);let a;for(a=0;a<C.length;a+=1){const I=at(b,C,a);_[a]?_[a].p(I,H):(_[a]=dt(I),_[a].c(),_[a].m(m,null))}for(;a<_.length;a+=1)_[a].d(1);_.length=C.length}H&72&&p!==(p="card no-"+b[6]+" "+(b[3]!=null?b[3]:"")+" svelte-pr30kl")&&O(t,"class",p),H&32&&$e(t,"border-color",b[5])},i:q,o:q,d(b){b&&L(t),Pe(_,b),h=!1,D(v)}}}function pn(e,t,n){let i,r,u;V(e,be,w=>n(14,u=w));let{id:o}=t,{numberInformation:s}=t,{colourInformation:l}=t,{selected:c=!1}=t,{isHinted:d}=t,{isFinessed:m}=t,{isChopMoved:p}=t,{isCritical:h}=t,{onSelect:v}=t,C=null,_=[];function b(w){return Ut(w).map(B=>a(B)).join(" ")}function H(w){switch(w){case Z.Red:return"red";case Z.Yellow:return"yellow";case Z.Blue:return"blue";case Z.White:return"white";case Z.Green:return"green";case Z.Rainbow:return"rainbow";case Z.Black:return"black"}}function a(w){switch(w){case G.One:return"1";case G.Two:return"2";case G.Three:return"3";case G.Four:return"4";case G.Five:return"5";case G.All:return"1 2 3 4 5"}}const I=()=>v(o),g=w=>(w.key==="Enter"||w.key===" ")&&v(o);return e.$$set=w=>{"id"in w&&n(0,o=w.id),"numberInformation"in w&&n(1,s=w.numberInformation),"colourInformation"in w&&n(8,l=w.colourInformation),"selected"in w&&n(9,c=w.selected),"isHinted"in w&&n(10,d=w.isHinted),"isFinessed"in w&&n(11,m=w.isFinessed),"isChopMoved"in w&&n(12,p=w.isChopMoved),"isCritical"in w&&n(13,h=w.isCritical),"onSelect"in w&&n(2,v=w.onSelect)},e.$$.update=()=>{e.$$.dirty&16384&&u.variant,e.$$.dirty&16384&&n(6,i=u.numberOfCards),e.$$.dirty&15872&&n(5,r=c?"blue":h?"red":d?"orange":m?"aqua":p?"white":"gray"),e.$$.dirty&256&&(l&l-1?n(3,C=null):n(3,C=H(l))),e.$$.dirty&264&&(C=="rainbow"?n(4,_=["rainbow-empty.svg"]):C!==null?n(4,_=[`${C}.svg`]):n(4,_=pe(l).map(w=>`${H(w)}.svg`)))},[o,s,v,C,_,r,i,b,l,c,d,m,p,h,u,I,g]}class hn extends ne{constructor(t){super(),te(this,t,pn,dn,X,{id:0,numberInformation:1,colourInformation:8,selected:9,isHinted:10,isFinessed:11,isChopMoved:12,isCritical:13,onSelect:2})}}function pt(e,t,n){const i=e.slice();return i[3]=t[n],i}function ht(e,t){let n,i,r;return i=new hn({props:{id:t[3].id,numberInformation:t[3].numberInformation,colourInformation:t[3].colourInformation,selected:t[0].has(t[3].id),isHinted:t[3].isHinted,isChopMoved:t[3].isChopMoved,isFinessed:t[3].isFinessed,isCritical:t[3].isCritical,onSelect:t[2]}}),{key:e,first:null,c(){n=Re(),se(i.$$.fragment),this.first=n},m(u,o){T(u,n,o),$(i,u,o),r=!0},p(u,o){t=u;const s={};o&2&&(s.id=t[3].id),o&2&&(s.numberInformation=t[3].numberInformation),o&2&&(s.colourInformation=t[3].colourInformation),o&3&&(s.selected=t[0].has(t[3].id)),o&2&&(s.isHinted=t[3].isHinted),o&2&&(s.isChopMoved=t[3].isChopMoved),o&2&&(s.isFinessed=t[3].isFinessed),o&2&&(s.isCritical=t[3].isCritical),i.$set(s)},i(u){r||(Y(i.$$.fragment,u),r=!0)},o(u){K(i.$$.fragment,u),r=!1},d(u){u&&L(n),ee(i,u)}}}function mn(e){let t,n=[],i=new Map,r,u=x(e[1]);const o=s=>s[3].id;for(let s=0;s<u.length;s+=1){let l=pt(e,u,s),c=o(l);i.set(c,n[s]=ht(c,l))}return{c(){t=y("div");for(let s=0;s<n.length;s+=1)n[s].c();O(t,"class","hand svelte-insnbi")},m(s,l){T(s,t,l);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(t,null);r=!0},p(s,[l]){l&7&&(u=x(s[1]),Pt(),n=qt(n,l,o,1,s,u,i,t,Tt,ht,null,pt),Lt())},i(s){if(!r){for(let l=0;l<u.length;l+=1)Y(n[l]);r=!0}},o(s){for(let l=0;l<n.length;l+=1)K(n[l]);r=!1},d(s){s&&L(t);for(let l=0;l<n.length;l+=1)n[l].d()}}}function bn(e,t,n){let i,r;V(e,J,o=>n(0,i=o)),V(e,ue,o=>n(1,r=o));function u(o){i.has(o)?J.update(s=>{const l=new Set(s);return l.delete(o),l}):J.update(s=>{const l=new Set(s);return l.add(o),l})}return[i,r,u]}class _n extends ne{constructor(t){super(),te(this,t,bn,mn,X,{})}}function gn(e){let t,n,i,r,u,o,s;return n=new an({}),r=new _n({}),{c(){t=y("main"),se(n.$$.fragment),i=F(),se(r.$$.fragment),u=F(),o=y("a"),o.textContent="Check out my code!",O(o,"href","https://github.com/jparkhouse/hanabi-tracker/"),O(o,"target","_blank")},m(l,c){T(l,t,c),$(n,t,null),f(t,i),$(r,t,null),f(t,u),f(t,o),s=!0},p:q,i(l){s||(Y(n.$$.fragment,l),Y(r.$$.fragment,l),s=!0)},o(l){K(n.$$.fragment,l),K(r.$$.fragment,l),s=!1},d(l){l&&L(t),ee(n),ee(r)}}}class kn extends ne{constructor(t){super(),te(this,t,null,gn,X,{})}}new kn({target:document.getElementById("app")});
