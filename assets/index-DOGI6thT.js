var wt=Object.defineProperty;var vt=(e,t,n)=>t in e?wt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ie=(e,t,n)=>(vt(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const u of r)if(u.type==="childList")for(const s of u.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const u={};return r.integrity&&(u.integrity=r.integrity),r.referrerPolicy&&(u.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?u.credentials="include":r.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(r){if(r.ep)return;r.ep=!0;const u=n(r);fetch(r.href,u)}})();function G(){}function pt(e){return e()}function Xe(){return Object.create(null)}function X(e){e.forEach(pt)}function bt(e){return typeof e=="function"}function $(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let we;function Qe(e,t){return e===t?!0:(we||(we=document.createElement("a")),we.href=t,e===we.href)}function Ot(e){return Object.keys(e).length===0}function St(e,...t){if(e==null){for(const o of t)o(void 0);return G}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Y(e,t,n){e.$$.on_destroy.push(St(t,n))}function m(e,t){e.appendChild(t)}function W(e,t,n){e.insertBefore(t,n||null)}function D(e){e.parentNode&&e.parentNode.removeChild(e)}function Be(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function w(e){return document.createElement(e)}function J(e){return document.createTextNode(e)}function B(){return J(" ")}function Ae(){return J("")}function N(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function qe(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function S(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Mt(e){return Array.from(e.childNodes)}function ke(e,t){t=""+t,e.data!==t&&(e.data=t)}function ie(e,t){e.value=t??""}function Ze(e,t,n,o){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function ve(e,t,n){for(let o=0;o<e.options.length;o+=1){const r=e.options[o];if(r.__value===t){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function xe(e){const t=e.querySelector(":checked");return t&&t.__value}let Fe;function _e(e){Fe=e}function Te(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(o=>o.call(this,t))}const de=[],ge=[];let me=[];const Le=[],Et=Promise.resolve();let Ve=!1;function Ht(){Ve||(Ve=!0,Et.then(ht))}function Ce(e){me.push(e)}function Ne(e){Le.push(e)}const Re=new Set;let ce=0;function ht(){if(ce!==0)return;const e=Fe;do{try{for(;ce<de.length;){const t=de[ce];ce++,_e(t),At(t.$$)}}catch(t){throw de.length=0,ce=0,t}for(_e(null),de.length=0,ce=0;ge.length;)ge.pop()();for(let t=0;t<me.length;t+=1){const n=me[t];Re.has(n)||(Re.add(n),n())}me.length=0}while(de.length);for(;Le.length;)Le.pop()();Ve=!1,Re.clear(),_e(e)}function At(e){if(e.fragment!==null){e.update(),X(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Ce)}}function zt(e){const t=[],n=[];me.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),me=t}const Me=new Set;let le;function Nt(){le={r:0,c:[],p:le}}function Rt(){le.r||X(le.c),le=le.p}function Q(e,t){e&&e.i&&(Me.delete(e),e.i(t))}function x(e,t,n,o){if(e&&e.o){if(Me.has(e))return;Me.add(e),le.c.push(()=>{Me.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function te(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Pt(e,t){x(e,1,1,()=>{t.delete(e.key)})}function Bt(e,t,n,o,r,u,s,i,l,c,d,g){let k=e.length,b=u.length,y=k;const O={};for(;y--;)O[e[y].key]=y;const h=[],C=new Map,v=new Map,p=[];for(y=b;y--;){const A=g(r,u,y),R=n(A);let F=s.get(R);F?o&&p.push(()=>F.p(A,t)):(F=c(R,A),F.c()),C.set(R,h[y]=F),R in O&&v.set(R,Math.abs(y-O[R]))}const M=new Set,a=new Set;function P(A){Q(A,1),A.m(i,d),s.set(A.key,A),d=A.first,b--}for(;k&&b;){const A=h[b-1],R=e[k-1],F=A.key,T=R.key;A===R?(d=A.first,k--,b--):C.has(T)?!s.has(F)||M.has(F)?P(A):a.has(T)?k--:v.get(F)>v.get(T)?(a.add(F),P(A)):(M.add(T),k--):(l(R,s),k--)}for(;k--;){const A=e[k];C.has(A.key)||l(A,s)}for(;b;)P(h[b-1]);return X(p),h}function Pe(e,t,n){const o=e.$$.props[t];o!==void 0&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function ue(e){e&&e.c()}function ne(e,t,n){const{fragment:o,after_update:r}=e.$$;o&&o.m(t,n),Ce(()=>{const u=e.$$.on_mount.map(pt).filter(bt);e.$$.on_destroy?e.$$.on_destroy.push(...u):X(u),e.$$.on_mount=[]}),r.forEach(Ce)}function oe(e,t){const n=e.$$;n.fragment!==null&&(zt(n.after_update),X(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Lt(e,t){e.$$.dirty[0]===-1&&(de.push(e),Ht(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function re(e,t,n,o,r,u,s=null,i=[-1]){const l=Fe;_e(e);const c=e.$$={fragment:null,ctx:[],props:u,update:G,not_equal:r,bound:Xe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:Xe(),dirty:i,skip_bound:!1,root:t.target||l.$$.root};s&&s(c.root);let d=!1;if(c.ctx=n?n(e,t.props||{},(g,k,...b)=>{const y=b.length?b[0]:k;return c.ctx&&r(c.ctx[g],c.ctx[g]=y)&&(!c.skip_bound&&c.bound[g]&&c.bound[g](y),d&&Lt(e,g)),k}):[],c.update(),d=!0,X(c.before_update),c.fragment=o?o(c.ctx):!1,t.target){if(t.hydrate){const g=Mt(t.target);c.fragment&&c.fragment.l(g),g.forEach(D)}else c.fragment&&c.fragment.c();t.intro&&Q(e.$$.fragment),ne(e,t.target,t.anchor),ht()}_e(l)}class se{constructor(){Ie(this,"$$");Ie(this,"$$set")}$destroy(){oe(this,1),this.$destroy=G}$on(t,n){if(!bt(n))return G;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const r=o.indexOf(n);r!==-1&&o.splice(r,1)}}$set(t){this.$$set&&!Ot(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Vt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Vt);const ae=[];function ye(e,t=G){let n;const o=new Set;function r(i){if($(e,i)&&(e=i,n)){const l=!ae.length;for(const c of o)c[1](),ae.push(c,e);if(l){for(let c=0;c<ae.length;c+=2)ae[c][0](ae[c+1]);ae.length=0}}}function u(i){r(i(e))}function s(i,l=G){const c=[i,l];return o.add(c),o.size===1&&(n=t(r,u)||G),i(e),()=>{o.delete(c),o.size===0&&n&&(n(),n=null)}}return{set:r,update:u,subscribe:s}}const Z=ye(new Set),_t=-1,ze=0,Ee=1,He=2,je=3,De=4,We=5,Ge=6,gt=7,kt=8,$e=typeof self=="object"?self:globalThis,qt=(e,t)=>{const n=(r,u)=>(e.set(u,r),r),o=r=>{if(e.has(r))return e.get(r);const[u,s]=t[r];switch(u){case ze:case _t:return n(s,r);case Ee:{const i=n([],r);for(const l of s)i.push(o(l));return i}case He:{const i=n({},r);for(const[l,c]of s)i[o(l)]=o(c);return i}case je:return n(new Date(s),r);case De:{const{source:i,flags:l}=s;return n(new RegExp(i,l),r)}case We:{const i=n(new Map,r);for(const[l,c]of s)i.set(o(l),o(c));return i}case Ge:{const i=n(new Set,r);for(const l of s)i.add(o(l));return i}case gt:{const{name:i,message:l}=s;return n(new $e[i](l),r)}case kt:return n(BigInt(s),r);case"BigInt":return n(Object(BigInt(s)),r)}return n(new $e[u](s),r)};return o},et=e=>qt(new Map,e)(0),fe="",{toString:Ft}={},{keys:Tt}=Object,be=e=>{const t=typeof e;if(t!=="object"||!e)return[ze,t];const n=Ft.call(e).slice(8,-1);switch(n){case"Array":return[Ee,fe];case"Object":return[He,fe];case"Date":return[je,fe];case"RegExp":return[De,fe];case"Map":return[We,fe];case"Set":return[Ge,fe]}return n.includes("Array")?[Ee,n]:n.includes("Error")?[gt,n]:[He,n]},Oe=([e,t])=>e===ze&&(t==="function"||t==="symbol"),jt=(e,t,n,o)=>{const r=(s,i)=>{const l=o.push(s)-1;return n.set(i,l),l},u=s=>{if(n.has(s))return n.get(s);let[i,l]=be(s);switch(i){case ze:{let d=s;switch(l){case"bigint":i=kt,d=s.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+l);d=null;break;case"undefined":return r([_t],s)}return r([i,d],s)}case Ee:{if(l)return r([l,[...s]],s);const d=[],g=r([i,d],s);for(const k of s)d.push(u(k));return g}case He:{if(l)switch(l){case"BigInt":return r([l,s.toString()],s);case"Boolean":case"Number":case"String":return r([l,s.valueOf()],s)}if(t&&"toJSON"in s)return u(s.toJSON());const d=[],g=r([i,d],s);for(const k of Tt(s))(e||!Oe(be(s[k])))&&d.push([u(k),u(s[k])]);return g}case je:return r([i,s.toISOString()],s);case De:{const{source:d,flags:g}=s;return r([i,{source:d,flags:g}],s)}case We:{const d=[],g=r([i,d],s);for(const[k,b]of s)(e||!(Oe(be(k))||Oe(be(b))))&&d.push([u(k),u(b)]);return g}case Ge:{const d=[],g=r([i,d],s);for(const k of s)(e||!Oe(be(k)))&&d.push(u(k));return g}}const{message:c}=s;return r([i,{name:l,message:c}],s)};return u},tt=(e,{json:t,lossy:n}={})=>{const o=[];return jt(!(t||n),!!t,new Map,o)(e),o},Dt=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?et(tt(e,t)):structuredClone(e):(e,t)=>et(tt(e,t)),pe=ye({numberOfCards:4,variant:"no-variant"}),Ct=ye(0);function yt(){let e=0;return Ct.update(t=>(e=t,t+1)),e}class Wt{constructor(t=1/0){Ie(this,"storage",[]);this.capacity=t}push(t){if(this.storage.length>=this.capacity){let n=this.storage.length-this.capacity+1;this.storage.splice(0,n)}this.storage.push(t)}pop(){if(this.size()>0)return this.storage.pop();throw console.error("empty stack popped")}peek(){return this.storage[this.storage.length-1]}size(){return this.storage.length}clear(){this.storage=[]}}const ee=new Wt(5),he=ye(0);function Gt(){const{subscribe:e,set:t,update:n}=ye([]),o=()=>{n(i=>(ee.push(Dt(i)),i)),he.set(ee.size())},r=()=>{if(ee.size()>0){const i=ee.pop();he.set(ee.size()),i&&t(i)}else console.warn("No previous state available for rollback");he.set(ee.size())},u=i=>{ee.clear(),he.set(ee.size());const l=Array.from({length:i.numberOfCards},(c,d)=>({id:yt(),numberInformation:Array(5).fill(null),colourInformation:Array(i.variant==="no-variant"?5:i.variant==="rainbows"||i.variant==="blacks"?6:7).fill(null),isHinted:!1,isChopMoved:!1,isFinessed:!1,isCritical:!1}));t(l)},s=pe.subscribe(i=>{Ct.set(0),Z.update(l=>(l=new Set,l)),u(i)});return{subscribe:e,updateCards:i=>{n(l=>(o(),i(l)))},rollback:r,saveState:o,cleanup:()=>s()}}const K=Gt();function Jt(e){let t,n,o,r,u;return{c(){t=w("button"),n=J("Play/Discard"),t.disabled=o=e[0].size!==1},m(s,i){W(s,t,i),m(t,n),r||(u=N(t,"click",e[1]),r=!0)},p(s,[i]){i&1&&o!==(o=s[0].size!==1)&&(t.disabled=o)},i:G,o:G,d(s){s&&D(t),r=!1,u()}}}function Ut(e,t,n){let o,r,u;Y(e,Z,l=>n(0,r=l)),Y(e,pe,l=>n(2,u=l));function s(){if(r.size===1){const l=r.values().next().value;K.updateCards(c=>{const d=c.filter(g=>g.id!==l);return d.push(i(yt())),d}),r.clear()}}function i(l){return{id:l,numberInformation:Array(5).fill(null),colourInformation:Array(o==="no-variant"?5:o==="rainbows"||o==="blacks"?6:7).fill(null),isHinted:!1,isChopMoved:!1,isFinessed:!1,isCritical:!1}}return e.$$.update=()=>{e.$$.dirty&4&&(o=u.variant)},[r,s,u]}class Yt extends se{constructor(t){super(),re(this,t,Ut,Jt,$,{})}}function nt(e){let t,n,o,r,u,s,i,l,c,d,g,k,b,y,O,h,C,v,p,M,a,P,A,R,F;return{c(){t=w("div"),n=w("div"),o=w("div"),r=w("label"),r.textContent="Number of Cards:",u=B(),s=w("select"),i=w("option"),i.textContent="3",l=w("option"),l.textContent="4",c=w("option"),c.textContent="5",d=B(),g=w("label"),g.textContent="Variant:",k=B(),b=w("select"),y=w("option"),y.textContent="No variant",O=w("option"),O.textContent="Rainbows",h=w("option"),h.textContent="Blacks",C=w("option"),C.textContent="Rainbows and Blacks",v=B(),p=w("button"),M=J(e[2]),a=B(),P=w("button"),A=J(e[3]),S(r,"for","numberOfCards"),i.__value="3",ie(i,i.__value),l.__value="4",ie(l,l.__value),c.__value="5",ie(c,c.__value),S(s,"id","numberOfCards"),e[1].numberOfCards===void 0&&Ce(()=>e[9].call(s)),S(g,"for","Variant"),y.__value="no-variant",ie(y,y.__value),O.__value="rainbows",ie(O,O.__value),h.__value="blacks",ie(h,h.__value),C.__value="rainbows-and-blacks",ie(C,C.__value),S(b,"id","Variant"),e[1].variant===void 0&&Ce(()=>e[10].call(b)),S(o,"class","config-form svelte-1s43tt7"),S(n,"class","config-modal svelte-1s43tt7"),S(t,"class","modal-overlay svelte-1s43tt7")},m(T,f){W(T,t,f),m(t,n),m(n,o),m(o,r),m(o,u),m(o,s),m(s,i),m(s,l),m(s,c),ve(s,e[1].numberOfCards,!0),m(o,d),m(o,g),m(o,k),m(o,b),m(b,y),m(b,O),m(b,h),m(b,C),ve(b,e[1].variant,!0),m(n,v),m(n,p),m(p,M),m(n,a),m(n,P),m(P,A),R||(F=[N(s,"change",e[9]),N(b,"change",e[10]),N(p,"click",e[5]),N(P,"click",e[4]),N(n,"click",qe(e[8])),N(t,"click",e[4])],R=!0)},p(T,f){f&2&&ve(s,T[1].numberOfCards),f&2&&ve(b,T[1].variant),f&4&&ke(M,T[2]),f&8&&ke(A,T[3])},d(T){T&&D(t),R=!1,X(F)}}}function Kt(e){let t,n=e[0]&&nt(e);return{c(){n&&n.c(),t=Ae()},m(o,r){n&&n.m(o,r),W(o,t,r)},p(o,[r]){o[0]?n?n.p(o,r):(n=nt(o),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:G,o:G,d(o){o&&D(t),n&&n.d(o)}}}function Xt(e,t){return e.numberOfCards===t.numberOfCards&&e.variant===t.variant}function Qt(e,t,n){let o;Y(e,pe,y=>n(7,o=y));let{isOpen:r=!1}=t,u={numberOfCards:4,variant:"no-variant"},s=!1;function i(){n(0,r=!1),n(6,s=!1)}function l(){pe.set(u),i()}let c="Reset",d="Close";function g(y){Te.call(this,e,y)}function k(){u.numberOfCards=xe(this),n(1,u),n(0,r),n(6,s),n(7,o)}function b(){u.variant=xe(this),n(1,u),n(0,r),n(6,s),n(7,o)}return e.$$set=y=>{"isOpen"in y&&n(0,r=y.isOpen)},e.$$.update=()=>{e.$$.dirty&193&&r&&!s&&(n(1,u={...o}),n(6,s=!0)),e.$$.dirty&130&&(Xt(o,u)?(n(2,c="Reset"),n(3,d="Close")):(n(2,c="Update"),n(3,d="Cancel")))},[r,u,c,d,i,l,s,o,g,k,b]}class Zt extends se{constructor(t){super(),re(this,t,Qt,Kt,$,{isOpen:0})}}function ot(e,t,n){const o=e.slice();return o[24]=t[n],o}function rt(e,t,n){const o=e.slice();return o[27]=t[n],o}function st(e){let t,n,o,r,u,s,i,l,c,d,g,k,b,y,O=te(e[2]),h=[];for(let p=0;p<O.length;p+=1)h[p]=it(rt(e,O,p));let C=te(e[3]),v=[];for(let p=0;p<C.length;p+=1)v[p]=lt(ot(e,C,p));return{c(){t=w("div"),n=w("div"),o=w("div");for(let p=0;p<h.length;p+=1)h[p].c();r=B(),u=w("div");for(let p=0;p<v.length;p+=1)v[p].c();s=B(),i=w("div"),l=w("button"),c=J("Save"),g=B(),k=w("button"),k.textContent="Cancel",S(o,"class","numbers-hints svelte-cxqqya"),S(u,"class","colours-hints svelte-cxqqya"),l.disabled=d=!e[1],S(i,"class","actions"),S(n,"class","hint-modal svelte-cxqqya"),S(t,"class","modal-overlay svelte-cxqqya")},m(p,M){W(p,t,M),m(t,n),m(n,o);for(let a=0;a<h.length;a+=1)h[a]&&h[a].m(o,null);m(n,r),m(n,u);for(let a=0;a<v.length;a+=1)v[a]&&v[a].m(u,null);m(n,s),m(n,i),m(i,l),m(l,c),m(i,g),m(i,k),b||(y=[N(l,"click",e[4]),N(k,"click",e[6]),N(n,"click",qe(e[8])),N(t,"click",e[6])],b=!0)},p(p,M){if(M&38){O=te(p[2]);let a;for(a=0;a<O.length;a+=1){const P=rt(p,O,a);h[a]?h[a].p(P,M):(h[a]=it(P),h[a].c(),h[a].m(o,null))}for(;a<h.length;a+=1)h[a].d(1);h.length=O.length}if(M&42){C=te(p[3]);let a;for(a=0;a<C.length;a+=1){const P=ot(p,C,a);v[a]?v[a].p(P,M):(v[a]=lt(P),v[a].c(),v[a].m(u,null))}for(;a<v.length;a+=1)v[a].d(1);v.length=C.length}M&2&&d!==(d=!p[1])&&(l.disabled=d)},d(p){p&&D(t),Be(h,p),Be(v,p),b=!1,X(y)}}}function it(e){let t,n=e[27]+"",o,r,u;function s(){return e[9](e[27])}return{c(){t=w("button"),o=J(n),S(t,"class","btn"),t.hidden=!e[5](e[27])},m(i,l){W(i,t,l),m(t,o),r||(u=N(t,"click",s),r=!0)},p(i,l){e=i},d(i){i&&D(t),r=!1,u()}}}function lt(e){let t,n=e[24]+"",o,r,u;function s(){return e[10](e[24])}return{c(){t=w("button"),o=J(n),S(t,"class","btn"),t.hidden=!e[5](e[24])},m(i,l){W(i,t,l),m(t,o),r||(u=N(t,"click",s),r=!0)},p(i,l){e=i},d(i){i&&D(t),r=!1,u()}}}function xt(e){let t,n=e[0]&&st(e);return{c(){n&&n.c(),t=Ae()},m(o,r){n&&n.m(o,r),W(o,t,r)},p(o,[r]){o[0]?n?n.p(o,r):(n=st(o),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:G,o:G,d(o){o&&D(t),n&&n.d(o)}}}function Se(e){const t=e.filter(o=>o===null).length,n=e.filter(o=>o===!1).length;if(t===1&&n===e.length-1){const o=e.findIndex(r=>r===null);e[o]=!0}}function $t(e,t,n){let o,r,u,s;Y(e,K,f=>n(12,r=f)),Y(e,Z,f=>n(13,u=f)),Y(e,pe,f=>n(7,s=f));let{isOpen:i=!1}=t;const l=[1,2,3,4,5],c=["red","yellow","blue","white","green"];let d=null;function g(){d&&(console.log("a hint!"),typeof d=="string"?k(d):typeof d=="number"&&C(d),Z.update(f=>(f=new Set,f)),A())}function k(f){switch(o){case"no-variant":b(f);break;case"rainbows":y(f);break;case"blacks":O(f);break;case"rainbows-and-blacks":h(f);break}}function b(f){const L=Array.from(u),H=c.findIndex(z=>z===f);K.updateCards(z=>z.map(_=>{const V=_.colourInformation.map((j,q)=>L.includes(_.id)?(_.isHinted=!0,q===H):q!==H?j:!1);return Se(V),{..._,colourInformation:V}}))}function y(f){const L=Array.from(u),H=c.findIndex(z=>z===f);K.updateCards(z=>{let I=z;return I.forEach((_,V)=>{L.includes(_.id)?(_.isHinted=!0,_.colourInformation[5]===null&&_.colourInformation[H]===null?_.colourInformation.forEach((j,q)=>{q!=H&&q!=5&&(_.colourInformation[q]=!1)}):_.colourInformation[5]===null&&_.colourInformation[H]===!1?_.colourInformation.forEach((j,q)=>{q==5?_.colourInformation[q]=!0:_.colourInformation[q]=!1}):_.colourInformation[5]===!1&&_.colourInformation[H]===null&&_.colourInformation.forEach((j,q)=>{q==H?_.colourInformation[q]=!0:_.colourInformation[q]=!1})):_.colourInformation[5]!==!0&&(_.colourInformation[H]=!1,_.colourInformation[5]=!1,Se(_.colourInformation))}),I})}function O(f){const L=Array.from(u),H=c.findIndex(z=>z===f);K.updateCards(z=>z.map(_=>{let V;return L.includes(_.id)?(_.isHinted=!0,V=_.colourInformation.map((j,q)=>q===H)):V=_.colourInformation.map((j,q)=>q!==H?j:!1),Se(V),{..._,colourInformation:V}}))}function h(f){const L=Array.from(u),H=c.findIndex(z=>z===f);K.updateCards(z=>z.map(I=>{let _=[...I.colourInformation];return L.includes(I.id)?(I.isHinted=!0,I.colourInformation[5]===null&&I.colourInformation[H]===null?_=_.map((V,j)=>j===H||j===5?null:!1):I.colourInformation[5]===null&&I.colourInformation[H]===!1?_=_.map((V,j)=>j===5):I.colourInformation[5]===!1&&I.colourInformation[H]===null&&(_=_.map((V,j)=>j===H))):(_[H]=!1,_[5]=!1),Se(_),{...I,colourInformation:_}}))}function C(f){const L=Array.from(u);K.updateCards(H=>H.map(I=>{const _=I.numberInformation.map((V,j)=>L.includes(I.id)?(I.isHinted=!0,j===f-1):j!==f-1?V:!1);return{...I,numberInformation:_}}))}function v(f){let L=!1;switch(o){case"no-variant":L=p(f);break;case"rainbows":L=M(f);break;case"blacks":L=a(f);break;case"rainbows-and-blacks":L=P(f);break}return L}function p(f){return Array.from(u).every(z=>{const I=r.find(_=>_.id===z);if(!I)return!1;if(typeof f=="string"){const _=c.indexOf(f);return I.colourInformation[_]===null||I.colourInformation[_]===!0}else if(typeof f=="number")return I.numberInformation[f-1]===null||I.numberInformation[f-1]===!0})}function M(f){return Array.from(u).every(z=>{const I=r.find(_=>_.id===z);if(!I)return!1;if(typeof f=="string"){if(I.colourInformation[5]===null||I.colourInformation[5]===!0)return!0;{const V=c.indexOf(f);return I.colourInformation[V]===null||I.colourInformation[V]===!0}}else if(typeof f=="number")return I.numberInformation[f-1]===null||I.numberInformation[f-1]===!0})}function a(f){return Array.from(u).every(z=>{const I=r.find(_=>_.id===z);if(!I)return!1;if(typeof f=="string"){const _=c.indexOf(f);return I.colourInformation[_]===null||I.colourInformation[_]===!0}else if(typeof f=="number")return I.numberInformation[f-1]===null||I.numberInformation[f-1]===!0})}function P(f){return Array.from(u).every(z=>{const I=r.find(_=>_.id===z);if(!I)return!1;if(typeof f=="string"){if(I.colourInformation[5]===null||I.colourInformation[5]===!0)return!0;{const V=c.indexOf(f);return I.colourInformation[V]===null||I.colourInformation[V]===!0}}else if(typeof f=="number")return I.numberInformation[f-1]===null||I.numberInformation[f-1]===!0})}function A(){n(0,i=!1),n(1,d=null)}function R(f){Te.call(this,e,f)}const F=f=>n(1,d=f),T=f=>n(1,d=f);return e.$$set=f=>{"isOpen"in f&&n(0,i=f.isOpen)},e.$$.update=()=>{e.$$.dirty&128&&(o=s.variant)},[i,d,l,c,g,v,A,s,R,F,T]}class en extends se{constructor(t){super(),re(this,t,$t,xt,$,{isOpen:0})}}function ut(e){let t,n,o,r,u,s,i,l,c,d,g,k,b,y,O,h,C;return{c(){t=w("div"),n=w("div"),o=w("div"),r=w("button"),r.textContent="Critical",u=B(),s=w("button"),s.textContent="Chop moved",i=B(),l=w("button"),l.textContent="Finessed",c=B(),d=w("div"),g=w("button"),k=J("Save"),y=B(),O=w("button"),O.textContent="Cancel",S(r,"class","btn"),S(s,"class","btn"),S(l,"class","btn"),S(o,"class","flags svelte-1ixggfy"),g.disabled=b=!e[1],S(d,"class","actions"),S(n,"class","mark-modal svelte-1ixggfy"),S(t,"class","modal-overlay svelte-1ixggfy")},m(v,p){W(v,t,p),m(t,n),m(n,o),m(o,r),m(o,u),m(o,s),m(o,i),m(o,l),m(n,c),m(n,d),m(d,g),m(g,k),m(d,y),m(d,O),h||(C=[N(r,"click",e[6]),N(s,"click",e[7]),N(l,"click",e[8]),N(g,"click",e[3]),N(O,"click",e[2]),N(n,"click",qe(e[5])),N(t,"click",e[2])],h=!0)},p(v,p){p&2&&b!==(b=!v[1])&&(g.disabled=b)},d(v){v&&D(t),h=!1,X(C)}}}function tn(e){let t,n=e[0]&&ut(e);return{c(){n&&n.c(),t=Ae()},m(o,r){n&&n.m(o,r),W(o,t,r)},p(o,[r]){o[0]?n?n.p(o,r):(n=ut(o),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:G,o:G,d(o){o&&D(t),n&&n.d(o)}}}function nn(e,t,n){let o,r;Y(e,Z,b=>n(10,o=b)),Y(e,K,b=>n(4,r=b));let{isOpen:u=!1}=t,s=null;function i(){n(1,s=null),n(0,u=!1)}function l(){const b=Array.from(o);K.updateCards(y=>y.map(h=>{if(b.includes(h.id))switch(s){case"critical":h.isCritical=!h.isCritical;break;case"chop-move":h.isChopMoved=!h.isChopMoved;break;case"finesse":h.isFinessed=!h.isFinessed;break}return h})),Z.update(y=>(y=new Set,y)),i()}function c(b){Te.call(this,e,b)}const d=()=>n(1,s="critical"),g=()=>n(1,s="chop-move"),k=()=>n(1,s="finesse");return e.$$set=b=>{"isOpen"in b&&n(0,u=b.isOpen)},e.$$.update=()=>{e.$$.dirty&16},[u,s,i,l,r,c,d,g,k]}class on extends se{constructor(t){super(),re(this,t,nn,tn,$,{isOpen:0})}}function rn(e){let t,n,o,r,u,s,i,l,c,d,g,k,b,y,O,h,C,v,p,M,a,P,A,R,F,T,f,L,H,z,I;i=new Yt({});function _(E){e[14](E)}let V={};e[1]!==void 0&&(V.isOpen=e[1]),a=new Zt({props:V}),ge.push(()=>Pe(a,"isOpen",_));function j(E){e[15](E)}let q={};e[2]!==void 0&&(q.isOpen=e[2]),R=new en({props:q}),ge.push(()=>Pe(R,"isOpen",j));function It(E){e[16](E)}let Je={};return e[3]!==void 0&&(Je.isOpen=e[3]),f=new on({props:Je}),ge.push(()=>Pe(f,"isOpen",It)),{c(){t=w("div"),n=w("button"),n.textContent="Configure Game",o=B(),r=w("button"),u=J(e[0]),s=B(),ue(i.$$.fragment),l=B(),c=w("button"),d=J("Record Hint"),k=B(),b=w("button"),y=J("Mark cards"),h=B(),C=w("button"),v=J("Undo"),M=B(),ue(a.$$.fragment),A=B(),ue(R.$$.fragment),T=B(),ue(f.$$.fragment),S(n,"class","configure svelte-9e6wy5"),S(r,"class","wake-lock"),r.hidden=!e[6],S(c,"class","hint-panel svelte-9e6wy5"),c.disabled=g=e[5].size<1,S(b,"class","mark-panel"),b.disabled=O=e[5].size<1,S(C,"class","undo"),C.disabled=p=e[4]<1,S(t,"class","game-controls svelte-9e6wy5")},m(E,U){W(E,t,U),m(t,n),m(t,o),m(t,r),m(r,u),m(t,s),ne(i,t,null),m(t,l),m(t,c),m(c,d),m(t,k),m(t,b),m(b,y),m(t,h),m(t,C),m(C,v),W(E,M,U),ne(a,E,U),W(E,A,U),ne(R,E,U),W(E,T,U),ne(f,E,U),H=!0,z||(I=[N(n,"click",e[8]),N(r,"click",e[7]),N(c,"click",e[9]),N(b,"click",e[10]),N(C,"click",e[11])],z=!0)},p(E,[U]){(!H||U&1)&&ke(u,E[0]),(!H||U&32&&g!==(g=E[5].size<1))&&(c.disabled=g),(!H||U&32&&O!==(O=E[5].size<1))&&(b.disabled=O),(!H||U&16&&p!==(p=E[4]<1))&&(C.disabled=p);const Ue={};!P&&U&2&&(P=!0,Ue.isOpen=E[1],Ne(()=>P=!1)),a.$set(Ue);const Ye={};!F&&U&4&&(F=!0,Ye.isOpen=E[2],Ne(()=>F=!1)),R.$set(Ye);const Ke={};!L&&U&8&&(L=!0,Ke.isOpen=E[3],Ne(()=>L=!1)),f.$set(Ke)},i(E){H||(Q(i.$$.fragment,E),Q(a.$$.fragment,E),Q(R.$$.fragment,E),Q(f.$$.fragment,E),H=!0)},o(E){x(i.$$.fragment,E),x(a.$$.fragment,E),x(R.$$.fragment,E),x(f.$$.fragment,E),H=!1},d(E){E&&(D(t),D(M),D(A),D(T)),oe(i),oe(a,E),oe(R,E),oe(f,E),z=!1,X(I)}}}function sn(e,t,n){let o,r,u;Y(e,he,M=>n(13,r=M)),Y(e,Z,M=>n(5,u=M));let s=null,i="wakeLock"in navigator,l="Wake Lock Off";async function c(){if(s)s.release(),n(12,s=null),n(0,l="Wake Lock Off");else try{n(12,s=await navigator.wakeLock.request("screen")),s.addEventListener("release",()=>{n(12,s=null),n(0,l="Wake Lock Off")}),n(0,l="Wake Lock On")}catch(M){console.error(`Could not acquire wake lock: ${M}`)}}let d=!1;function g(){n(1,d=!0)}let k=!1;function b(){n(2,k=!0)}let y=!1;function O(){n(3,y=!0)}function h(){K.rollback()}function C(M){d=M,n(1,d)}function v(M){k=M,n(2,k)}function p(M){y=M,n(3,y)}return e.$$.update=()=>{e.$$.dirty&4096&&(s?n(0,l="Wake Lock On"):n(0,l="Wake Lock Off")),e.$$.dirty&8192&&n(4,o=r),e.$$.dirty&8192&&console.log(r)},[l,d,k,y,o,u,i,c,g,b,O,h,s,r,C,v,p]}class ln extends se{constructor(t){super(),re(this,t,sn,rn,$,{})}}function ct(e,t,n){const o=e.slice();return o[19]=t[n],o}function at(e){let t,n;return{c(){t=w("img"),Qe(t.src,n=e[19])||S(t,"src",n),S(t,"alt","colour icon"),S(t,"class","icon svelte-1m7u1up")},m(o,r){W(o,t,r)},p(o,r){r&16&&!Qe(t.src,n=o[19])&&S(t,"src",n)},d(o){o&&D(t)}}}function un(e){let t,n,o,r=e[0]+1+"",u,s,i,l=ft(e[1])+"",c,d,g,k,b,y,O=te(e[4]),h=[];for(let C=0;C<O.length;C+=1)h[C]=at(ct(e,O,C));return{c(){t=w("div"),n=w("p"),o=J("Card "),u=J(r),s=B(),i=w("p"),c=J(l),d=B(),g=w("div");for(let C=0;C<h.length;C+=1)h[C].c();S(g,"class","icons svelte-1m7u1up"),S(t,"class",k="card no-"+e[6]+" "+(e[3]!=null?e[3]:"")+" svelte-1m7u1up"),S(t,"tabindex","0"),S(t,"role","button"),Ze(t,"border-color",e[5])},m(C,v){W(C,t,v),m(t,n),m(n,o),m(n,u),m(t,s),m(t,i),m(i,c),m(t,d),m(t,g);for(let p=0;p<h.length;p+=1)h[p]&&h[p].m(g,null);b||(y=[N(t,"click",e[14]),N(t,"keydown",e[15])],b=!0)},p(C,[v]){if(v&1&&r!==(r=C[0]+1+"")&&ke(u,r),v&2&&l!==(l=ft(C[1])+"")&&ke(c,l),v&16){O=te(C[4]);let p;for(p=0;p<O.length;p+=1){const M=ct(C,O,p);h[p]?h[p].p(M,v):(h[p]=at(M),h[p].c(),h[p].m(g,null))}for(;p<h.length;p+=1)h[p].d(1);h.length=O.length}v&72&&k!==(k="card no-"+C[6]+" "+(C[3]!=null?C[3]:"")+" svelte-1m7u1up")&&S(t,"class",k),v&32&&Ze(t,"border-color",C[5])},i:G,o:G,d(C){C&&D(t),Be(h,C),b=!1,X(y)}}}function ft(e){return e.map((n,o)=>n===!0||n===null?(o+1).toString():"").join(" ")}function cn(e,t,n){let o,r,u,s;Y(e,pe,a=>n(13,s=a));let{id:i}=t,{numberInformation:l}=t,{colourInformation:c}=t,{selected:d=!1}=t,{isHinted:g}=t,{isFinessed:k}=t,{isChopMoved:b}=t,{isCritical:y}=t,{onSelect:O}=t,h=null,C=[];function v(a){return a<5?["red","yellow","blue","white","green"][a]:o=="blacks"&&a==5?"black":o=="rainbows"&&a==5||o=="rainbows-and-blacks"&&a==5?"rainbow":o=="rainbows-and-blacks"&&a==6?"black":(console.log("Index {index} out of range for card {self.id} and variant {variant}"),"err")}const p=()=>O(i),M=a=>(a.key==="Enter"||a.key===" ")&&O(i);return e.$$set=a=>{"id"in a&&n(0,i=a.id),"numberInformation"in a&&n(1,l=a.numberInformation),"colourInformation"in a&&n(7,c=a.colourInformation),"selected"in a&&n(8,d=a.selected),"isHinted"in a&&n(9,g=a.isHinted),"isFinessed"in a&&n(10,k=a.isFinessed),"isChopMoved"in a&&n(11,b=a.isChopMoved),"isCritical"in a&&n(12,y=a.isCritical),"onSelect"in a&&n(2,O=a.onSelect)},e.$$.update=()=>{if(e.$$.dirty&8192&&(o=s.variant),e.$$.dirty&8192&&n(6,r=s.numberOfCards),e.$$.dirty&7936&&n(5,u=d?"blue":y?"red":g?"orange":k?"aqua":b?"white":"gray"),e.$$.dirty&128){const a=c.findIndex(P=>P===!0);a===-1?n(3,h=null):n(3,h=v(a))}e.$$.dirty&128&&n(4,C=c.map((a,P)=>a===!0||a===null?`public/${v(P)}.svg`:null).filter(Boolean))},[i,l,O,h,C,u,r,c,d,g,k,b,y,s,p,M]}class an extends se{constructor(t){super(),re(this,t,cn,un,$,{id:0,numberInformation:1,colourInformation:7,selected:8,isHinted:9,isFinessed:10,isChopMoved:11,isCritical:12,onSelect:2})}}function dt(e,t,n){const o=e.slice();return o[3]=t[n],o}function mt(e,t){let n,o,r;return o=new an({props:{id:t[3].id,numberInformation:t[3].numberInformation,colourInformation:t[3].colourInformation,selected:t[1].has(t[3].id),isHinted:t[3].isHinted,isChopMoved:t[3].isChopMoved,isFinessed:t[3].isFinessed,isCritical:t[3].isCritical,onSelect:t[2]}}),{key:e,first:null,c(){n=Ae(),ue(o.$$.fragment),this.first=n},m(u,s){W(u,n,s),ne(o,u,s),r=!0},p(u,s){t=u;const i={};s&1&&(i.id=t[3].id),s&1&&(i.numberInformation=t[3].numberInformation),s&1&&(i.colourInformation=t[3].colourInformation),s&3&&(i.selected=t[1].has(t[3].id)),s&1&&(i.isHinted=t[3].isHinted),s&1&&(i.isChopMoved=t[3].isChopMoved),s&1&&(i.isFinessed=t[3].isFinessed),s&1&&(i.isCritical=t[3].isCritical),o.$set(i)},i(u){r||(Q(o.$$.fragment,u),r=!0)},o(u){x(o.$$.fragment,u),r=!1},d(u){u&&D(n),oe(o,u)}}}function fn(e){let t,n=[],o=new Map,r,u=te(e[0]);const s=i=>i[3].id;for(let i=0;i<u.length;i+=1){let l=dt(e,u,i),c=s(l);o.set(c,n[i]=mt(c,l))}return{c(){t=w("div");for(let i=0;i<n.length;i+=1)n[i].c();S(t,"class","hand svelte-insnbi")},m(i,l){W(i,t,l);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(t,null);r=!0},p(i,[l]){l&7&&(u=te(i[0]),Nt(),n=Bt(n,l,s,1,i,u,o,t,Pt,mt,null,dt),Rt())},i(i){if(!r){for(let l=0;l<u.length;l+=1)Q(n[l]);r=!0}},o(i){for(let l=0;l<n.length;l+=1)x(n[l]);r=!1},d(i){i&&D(t);for(let l=0;l<n.length;l+=1)n[l].d()}}}function dn(e,t,n){let o,r;Y(e,K,s=>n(0,o=s)),Y(e,Z,s=>n(1,r=s));function u(s){r.has(s)?Z.update(i=>{const l=new Set(i);return l.delete(s),l}):Z.update(i=>{const l=new Set(i);return l.add(s),l})}return e.$$.update=()=>{e.$$.dirty&1&&console.log(o)},[o,r,u]}class mn extends se{constructor(t){super(),re(this,t,dn,fn,$,{})}}function pn(e){let t,n,o,r,u,s,i;return n=new ln({}),r=new mn({}),{c(){t=w("main"),ue(n.$$.fragment),o=B(),ue(r.$$.fragment),u=B(),s=w("a"),s.textContent="Check out my code!",S(s,"href","https://github.com/jparkhouse/hanabi-tracker/"),S(s,"target","_blank")},m(l,c){W(l,t,c),ne(n,t,null),m(t,o),ne(r,t,null),m(t,u),m(t,s),i=!0},p:G,i(l){i||(Q(n.$$.fragment,l),Q(r.$$.fragment,l),i=!0)},o(l){x(n.$$.fragment,l),x(r.$$.fragment,l),i=!1},d(l){l&&D(t),oe(n),oe(r)}}}class bn extends se{constructor(t){super(),re(this,t,null,pn,$,{})}}new bn({target:document.getElementById("app")});
