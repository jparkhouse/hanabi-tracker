var Ue=Object.defineProperty;var Je=(e,t,n)=>t in e?Ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var he=(e,t,n)=>(Je(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function q(){}function qe(e){return e()}function Se(){return Object.create(null)}function U(e){e.forEach(qe)}function De(e){return typeof e=="function"}function Y(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Qe(e){return Object.keys(e).length===0}function We(e,...t){if(e==null){for(const o of t)o(void 0);return q}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function T(e,t,n){e.$$.on_destroy.push(We(t,n))}function d(e,t){e.appendChild(t)}function D(e,t,n){e.insertBefore(t,n||null)}function L(e){e.parentNode&&e.parentNode.removeChild(e)}function Me(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function C(e){return document.createElement(e)}function K(e){return document.createTextNode(e)}function R(){return K(" ")}function pe(){return K("")}function z(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function H(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Xe(e){return Array.from(e.childNodes)}function ge(e,t){t=""+t,e.data!==t&&(e.data=t)}function te(e,t){e.value=t??""}function He(e,t,n,o){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function me(e,t,n){for(let o=0;o<e.options.length;o+=1){const r=e.options[o];if(r.__value===t){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Ae(e){const t=e.querySelector(":checked");return t&&t.__value}let we;function ae(e){we=e}const le=[],ce=[];let ue=[];const ye=[],Ye=Promise.resolve();let ke=!1;function Ze(){ke||(ke=!0,Ye.then(Ge))}function de(e){ue.push(e)}function Ce(e){ye.push(e)}const ve=new Set;let re=0;function Ge(){if(re!==0)return;const e=we;do{try{for(;re<le.length;){const t=le[re];re++,ae(t),xe(t.$$)}}catch(t){throw le.length=0,re=0,t}for(ae(null),le.length=0,re=0;ce.length;)ce.pop()();for(let t=0;t<ue.length;t+=1){const n=ue[t];ve.has(n)||(ve.add(n),n())}ue.length=0}while(le.length);for(;ye.length;)ye.pop()();ke=!1,ve.clear(),ae(e)}function xe(e){if(e.fragment!==null){e.update(),U(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(de)}}function $e(e){const t=[],n=[];ue.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),ue=t}const be=new Set;let ne;function et(){ne={r:0,c:[],p:ne}}function tt(){ne.r||U(ne.c),ne=ne.p}function Q(e,t){e&&e.i&&(be.delete(e),e.i(t))}function X(e,t,n,o){if(e&&e.o){if(be.has(e))return;be.add(e),ne.c.push(()=>{be.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function se(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function nt(e,t){X(e,1,1,()=>{t.delete(e.key)})}function ot(e,t,n,o,r,i,l,s,u,a,b,v){let k=e.length,m=i.length,p=k;const S={};for(;p--;)S[e[p].key]=p;const O=[],I=new Map,y=new Map,g=[];for(p=m;p--;){const A=v(r,i,p),F=n(A);let B=l.get(F);B?o&&g.push(()=>B.p(A,t)):(B=a(F,A),B.c()),I.set(F,O[p]=B),F in S&&y.set(F,Math.abs(p-S[F]))}const _=new Set,h=new Set;function P(A){Q(A,1),A.m(s,b),l.set(A.key,A),b=A.first,m--}for(;k&&m;){const A=O[m-1],F=e[k-1],B=A.key,c=F.key;A===F?(b=A.first,k--,m--):I.has(c)?!l.has(B)||_.has(B)?P(A):h.has(c)?k--:y.get(B)>y.get(c)?(h.add(B),P(A)):(_.add(c),k--):(u(F,l),k--)}for(;k--;){const A=e[k];I.has(A.key)||u(A,l)}for(;m;)P(O[m-1]);return U(g),O}function Ie(e,t,n){const o=e.$$.props[t];o!==void 0&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function oe(e){e&&e.c()}function Z(e,t,n){const{fragment:o,after_update:r}=e.$$;o&&o.m(t,n),de(()=>{const i=e.$$.on_mount.map(qe).filter(De);e.$$.on_destroy?e.$$.on_destroy.push(...i):U(i),e.$$.on_mount=[]}),r.forEach(de)}function x(e,t){const n=e.$$;n.fragment!==null&&($e(n.after_update),U(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function rt(e,t){e.$$.dirty[0]===-1&&(le.push(e),Ze(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function $(e,t,n,o,r,i,l=null,s=[-1]){const u=we;ae(e);const a=e.$$={fragment:null,ctx:[],props:i,update:q,not_equal:r,bound:Se(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:Se(),dirty:s,skip_bound:!1,root:t.target||u.$$.root};l&&l(a.root);let b=!1;if(a.ctx=n?n(e,t.props||{},(v,k,...m)=>{const p=m.length?m[0]:k;return a.ctx&&r(a.ctx[v],a.ctx[v]=p)&&(!a.skip_bound&&a.bound[v]&&a.bound[v](p),b&&rt(e,v)),k}):[],a.update(),b=!0,U(a.before_update),a.fragment=o?o(a.ctx):!1,t.target){if(t.hydrate){const v=Xe(t.target);a.fragment&&a.fragment.l(v),v.forEach(L)}else a.fragment&&a.fragment.c();t.intro&&Q(e.$$.fragment),Z(e,t.target,t.anchor),Ge()}ae(u)}class ee{constructor(){he(this,"$$");he(this,"$$set")}$destroy(){x(this,1),this.$destroy=q}$on(t,n){if(!De(n))return q;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const r=o.indexOf(n);r!==-1&&o.splice(r,1)}}$set(t){this.$$set&&!Qe(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const it="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(it);const ie=[];function _e(e,t=q){let n;const o=new Set;function r(s){if(Y(e,s)&&(e=s,n)){const u=!ie.length;for(const a of o)a[1](),ie.push(a,e);if(u){for(let a=0;a<ie.length;a+=2)ie[a][0](ie[a+1]);ie.length=0}}}function i(s){r(s(e))}function l(s,u=q){const a=[s,u];return o.add(a),o.size===1&&(n=t(r,i)||q),s(e),()=>{o.delete(a),o.size===0&&n&&(n(),n=null)}}return{set:r,update:i,subscribe:l}}const W=_e(new Set),fe=_e({numberOfCards:4,variant:"no-variant"}),Ke=_e(0);function Te(){let e=0;return Ke.update(t=>(e=t,t+1)),e}function lt(){const{subscribe:e,set:t,update:n}=_e([]),o=i=>{const l=Array.from({length:i.numberOfCards},(s,u)=>({id:Te(),numberInformation:Array(5).fill(null),colourInformation:Array(i.variant==="no-variant"?5:i.variant==="rainbows"||i.variant==="blacks"?6:7).fill(null),isHinted:!1,isChopMoved:!1,isFinessed:!1,isCritical:!1}));t(l)},r=fe.subscribe(i=>{Ke.set(0),W.update(l=>(l=new Set,l)),o(i)});return{subscribe:e,updateCards:i=>{n(l=>i(l))},cleanup:()=>r()}}const J=lt();function st(e){let t,n,o,r,i;return{c(){t=C("button"),n=K("Play/Discard"),t.disabled=o=e[0].size!==1},m(l,s){D(l,t,s),d(t,n),r||(i=z(t,"click",e[1]),r=!0)},p(l,[s]){s&1&&o!==(o=l[0].size!==1)&&(t.disabled=o)},i:q,o:q,d(l){l&&L(t),r=!1,i()}}}function ut(e,t,n){let o,r,i;T(e,W,u=>n(0,r=u)),T(e,fe,u=>n(2,i=u));function l(){if(r.size===1){const u=r.values().next().value;J.updateCards(a=>{const b=a.filter(v=>v.id!==u);return b.push(s(Te())),b}),r.clear()}}function s(u){return{id:u,numberInformation:Array(5).fill(null),colourInformation:Array(o==="no-variant"?5:o==="rainbows"||o==="blacks"?6:7).fill(null),isHinted:!1,isChopMoved:!1,isFinessed:!1,isCritical:!1}}return e.$$.update=()=>{e.$$.dirty&4&&(o=i.variant)},[r,l,i]}class ft extends ee{constructor(t){super(),$(this,t,ut,st,Y,{})}}function Ee(e){let t,n,o,r,i,l,s,u,a,b,v,k,m,p,S,O,I,y,g,_,h,P,A;return{c(){t=C("div"),n=C("div"),o=C("div"),r=C("label"),r.textContent="Number of Cards:",i=R(),l=C("select"),s=C("option"),s.textContent="3",u=C("option"),u.textContent="4",a=C("option"),a.textContent="5",b=R(),v=C("label"),v.textContent="Variant:",k=R(),m=C("select"),p=C("option"),p.textContent="No variant",S=C("option"),S.textContent="Rainbows",O=C("option"),O.textContent="Blacks",I=C("option"),I.textContent="Rainbows and Blacks",y=R(),g=C("button"),g.textContent="Save",_=R(),h=C("button"),h.textContent="Cancel",H(r,"for","numberOfCards"),s.__value="3",te(s,s.__value),u.__value="4",te(u,u.__value),a.__value="5",te(a,a.__value),H(l,"id","numberOfCards"),e[1].numberOfCards===void 0&&de(()=>e[5].call(l)),H(v,"for","Variant"),p.__value="no-variant",te(p,p.__value),S.__value="rainbows",te(S,S.__value),O.__value="blacks",te(O,O.__value),I.__value="rainbows-and-blacks",te(I,I.__value),H(m,"id","Variant"),e[1].variant===void 0&&de(()=>e[6].call(m)),H(o,"class","config-form svelte-16v23fx"),H(n,"class","config-modal svelte-16v23fx"),H(t,"class","modal-overlay svelte-16v23fx")},m(F,B){D(F,t,B),d(t,n),d(n,o),d(o,r),d(o,i),d(o,l),d(l,s),d(l,u),d(l,a),me(l,e[1].numberOfCards,!0),d(o,b),d(o,v),d(o,k),d(o,m),d(m,p),d(m,S),d(m,O),d(m,I),me(m,e[1].variant,!0),d(n,y),d(n,g),d(n,_),d(n,h),P||(A=[z(l,"change",e[5]),z(m,"change",e[6]),z(g,"click",e[3]),z(h,"click",e[2])],P=!0)},p(F,B){B&2&&me(l,F[1].numberOfCards),B&2&&me(m,F[1].variant)},d(F){F&&L(t),P=!1,U(A)}}}function at(e){let t,n=e[0]&&Ee(e);return{c(){n&&n.c(),t=pe()},m(o,r){n&&n.m(o,r),D(o,t,r)},p(o,[r]){o[0]?n?n.p(o,r):(n=Ee(o),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:q,o:q,d(o){o&&L(t),n&&n.d(o)}}}function ct(e,t,n){let o;T(e,fe,b=>n(4,o=b));let{isOpen:r=!1}=t,i={numberOfCards:4,variant:"no-variant"};function l(){n(0,r=!1)}function s(){fe.set(i),l()}function u(){i.numberOfCards=Ae(this),n(1,i),n(0,r),n(4,o)}function a(){i.variant=Ae(this),n(1,i),n(0,r),n(4,o)}return e.$$set=b=>{"isOpen"in b&&n(0,r=b.isOpen)},e.$$.update=()=>{e.$$.dirty&17&&r&&n(1,i=o),e.$$.dirty&1&&console.log(r)},[r,i,l,s,o,u,a]}class dt extends ee{constructor(t){super(),$(this,t,ct,at,Y,{isOpen:0})}}function Ve(e,t,n){const o=e.slice();return o[23]=t[n],o}function Ne(e,t,n){const o=e.slice();return o[26]=t[n],o}function Pe(e){let t,n,o,r,i,l,s,u,a,b,v,k,m,p,S=se(e[2]),O=[];for(let g=0;g<S.length;g+=1)O[g]=Fe(Ne(e,S,g));let I=se(e[3]),y=[];for(let g=0;g<I.length;g+=1)y[g]=Re(Ve(e,I,g));return{c(){t=C("div"),n=C("div"),o=C("div");for(let g=0;g<O.length;g+=1)O[g].c();r=R(),i=C("div");for(let g=0;g<y.length;g+=1)y[g].c();l=R(),s=C("div"),u=C("button"),a=K("Save"),v=R(),k=C("button"),k.textContent="Cancel",H(o,"class","numbers-hints svelte-17jwble"),H(i,"class","colours-hints svelte-17jwble"),u.disabled=b=!e[1],H(s,"class","actions"),H(n,"class","hint-modal svelte-17jwble"),H(t,"class","modal-overlay svelte-17jwble")},m(g,_){D(g,t,_),d(t,n),d(n,o);for(let h=0;h<O.length;h+=1)O[h]&&O[h].m(o,null);d(n,r),d(n,i);for(let h=0;h<y.length;h+=1)y[h]&&y[h].m(i,null);d(n,l),d(n,s),d(s,u),d(u,a),d(s,v),d(s,k),m||(p=[z(u,"click",e[4]),z(k,"click",e[6])],m=!0)},p(g,_){if(_&38){S=se(g[2]);let h;for(h=0;h<S.length;h+=1){const P=Ne(g,S,h);O[h]?O[h].p(P,_):(O[h]=Fe(P),O[h].c(),O[h].m(o,null))}for(;h<O.length;h+=1)O[h].d(1);O.length=S.length}if(_&42){I=se(g[3]);let h;for(h=0;h<I.length;h+=1){const P=Ve(g,I,h);y[h]?y[h].p(P,_):(y[h]=Re(P),y[h].c(),y[h].m(i,null))}for(;h<y.length;h+=1)y[h].d(1);y.length=I.length}_&2&&b!==(b=!g[1])&&(u.disabled=b)},d(g){g&&L(t),Me(O,g),Me(y,g),m=!1,U(p)}}}function Fe(e){let t,n=e[26]+"",o,r,i;function l(){return e[8](e[26])}return{c(){t=C("button"),o=K(n),H(t,"class","btn"),t.hidden=!e[5](e[26])},m(s,u){D(s,t,u),d(t,o),r||(i=z(t,"click",l),r=!0)},p(s,u){e=s},d(s){s&&L(t),r=!1,i()}}}function Re(e){let t,n=e[23]+"",o,r,i;function l(){return e[9](e[23])}return{c(){t=C("button"),o=K(n),H(t,"class","btn"),t.hidden=!e[5](e[23])},m(s,u){D(s,t,u),d(t,o),r||(i=z(t,"click",l),r=!0)},p(s,u){e=s},d(s){s&&L(t),r=!1,i()}}}function mt(e){let t,n=e[0]&&Pe(e);return{c(){n&&n.c(),t=pe()},m(o,r){n&&n.m(o,r),D(o,t,r)},p(o,[r]){o[0]?n?n.p(o,r):(n=Pe(o),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:q,o:q,d(o){o&&L(t),n&&n.d(o)}}}function bt(e,t,n){let o,r,i,l;T(e,J,c=>n(11,r=c)),T(e,W,c=>n(12,i=c)),T(e,fe,c=>n(7,l=c));let{isOpen:s=!1}=t;const u=[1,2,3,4,5],a=["red","yellow","blue","white","green"];let b=null;function v(){b&&(console.log("a hint!"),typeof b=="string"?k(b):typeof b=="number"&&I(b),W.update(c=>(c=new Set,c)),A())}function k(c){switch(o){case"no-variant":m(c);break;case"rainbows":p(c);break;case"blacks":S(c);break;case"rainbows-and-blacks":O(c);break}}function m(c){const j=Array.from(i),E=a.findIndex(N=>N===c);J.updateCards(N=>N.map(f=>{const V=f.colourInformation.map((G,M)=>j.includes(f.id)?(f.isHinted=!0,M===E):M!==E?G:!1);return{...f,colourInformation:V}}))}function p(c){const j=Array.from(i),E=a.findIndex(N=>N===c);J.updateCards(N=>{let w=N;return w.forEach((f,V)=>{j.includes(f.id)?(f.isHinted=!0,f.colourInformation[5]===null&&f.colourInformation[E]===null?f.colourInformation.forEach((G,M)=>{M!=E&&M!=5&&(f.colourInformation[M]=!1)}):f.colourInformation[5]===null&&f.colourInformation[E]===!1?f.colourInformation.forEach((G,M)=>{M==5?f.colourInformation[M]=!0:f.colourInformation[M]=!1}):f.colourInformation[5]===!1&&f.colourInformation[E]===null&&f.colourInformation.forEach((G,M)=>{M==E?f.colourInformation[M]=!0:f.colourInformation[M]=!1})):f.colourInformation[5]!==!0&&(f.colourInformation[E]=!1,f.colourInformation[5]=!1)}),w})}function S(c){const j=Array.from(i),E=a.findIndex(N=>N===c);J.updateCards(N=>N.map(f=>{const V=f.colourInformation.map((G,M)=>j.includes(f.id)?(f.isHinted=!0,M===E):M!==E?G:!1);return{...f,colourInformation:V}}))}function O(c){const j=Array.from(i),E=a.findIndex(N=>N===c);J.updateCards(N=>{let w=N;return w.forEach((f,V)=>{j.includes(f.id)?(f.isHinted=!0,f.colourInformation[5]===null&&f.colourInformation[E]===null?f.colourInformation.forEach((G,M)=>{M!=E&&M!=5&&(f.colourInformation[M]=!1)}):f.colourInformation[5]===null&&f.colourInformation[E]===!1?f.colourInformation.forEach((G,M)=>{M==5?f.colourInformation[M]=!0:f.colourInformation[M]=!1}):f.colourInformation[5]===!1&&f.colourInformation[E]===null&&f.colourInformation.forEach((G,M)=>{M==E?f.colourInformation[M]=!0:f.colourInformation[M]=!1})):f.colourInformation[5]!==!0&&(f.colourInformation[E]=!1,f.colourInformation[5]=!1)}),w})}function I(c){const j=Array.from(i);J.updateCards(E=>E.map(w=>{const f=w.numberInformation.map((V,G)=>j.includes(w.id)?(w.isHinted=!0,G===c-1):G!==c-1?V:!1);return{...w,numberInformation:f}}))}function y(c){let j=!1;switch(o){case"no-variant":j=g(c);break;case"rainbows":j=_(c);break;case"blacks":j=h(c);break;case"rainbows-and-blacks":j=P(c);break}return j}function g(c){return Array.from(i).every(N=>{const w=r.find(f=>f.id===N);if(!w)return!1;if(typeof c=="string"){const f=a.indexOf(c);return w.colourInformation[f]===null||w.colourInformation[f]===!0}else if(typeof c=="number")return w.numberInformation[c-1]===null||w.numberInformation[c-1]===!0})}function _(c){return Array.from(i).every(N=>{const w=r.find(f=>f.id===N);if(!w)return!1;if(typeof c=="string"){if(w.colourInformation[5]===null||w.colourInformation[5]===!0)return!0;{const V=a.indexOf(c);return w.colourInformation[V]===null||w.colourInformation[V]===!0}}else if(typeof c=="number")return w.numberInformation[c-1]===null||w.numberInformation[c-1]===!0})}function h(c){return Array.from(i).every(N=>{const w=r.find(f=>f.id===N);if(!w)return!1;if(typeof c=="string"){const f=a.indexOf(c);return w.colourInformation[f]===null||w.colourInformation[f]===!0}else if(typeof c=="number")return w.numberInformation[c-1]===null||w.numberInformation[c-1]===!0})}function P(c){return Array.from(i).every(N=>{const w=r.find(f=>f.id===N);if(!w)return!1;if(typeof c=="string"){if(w.colourInformation[5]===null||w.colourInformation[5]===!0)return!0;{const V=a.indexOf(c);return w.colourInformation[V]===null||w.colourInformation[V]===!0}}else if(typeof c=="number")return w.numberInformation[c-1]===null||w.numberInformation[c-1]===!0})}function A(){n(0,s=!1),n(1,b=null)}const F=c=>n(1,b=c),B=c=>n(1,b=c);return e.$$set=c=>{"isOpen"in c&&n(0,s=c.isOpen)},e.$$.update=()=>{e.$$.dirty&128&&(o=l.variant)},[s,b,u,a,v,y,A,l,F,B]}class pt extends ee{constructor(t){super(),$(this,t,bt,mt,Y,{isOpen:0})}}function je(e){let t,n,o,r,i,l,s,u,a,b,v,k,m,p,S,O,I;return{c(){t=C("div"),n=C("div"),o=C("div"),r=C("button"),r.textContent="Critical",i=R(),l=C("button"),l.textContent="Chop moved",s=R(),u=C("button"),u.textContent="Finessed",a=R(),b=C("div"),v=C("button"),k=K("Save"),p=R(),S=C("button"),S.textContent="Cancel",H(r,"class","btn"),H(l,"class","btn"),H(u,"class","btn"),H(o,"class","flags"),v.disabled=m=!e[1],H(b,"class","actions"),H(n,"class","mark-modal svelte-1fkqm3b"),H(t,"class","modal-overlay svelte-1fkqm3b")},m(y,g){D(y,t,g),d(t,n),d(n,o),d(o,r),d(o,i),d(o,l),d(o,s),d(o,u),d(n,a),d(n,b),d(b,v),d(v,k),d(b,p),d(b,S),O||(I=[z(r,"click",e[5]),z(l,"click",e[6]),z(u,"click",e[7]),z(v,"click",e[3]),z(S,"click",e[2])],O=!0)},p(y,g){g&2&&m!==(m=!y[1])&&(v.disabled=m)},d(y){y&&L(t),O=!1,U(I)}}}function _t(e){let t,n=e[0]&&je(e);return{c(){n&&n.c(),t=pe()},m(o,r){n&&n.m(o,r),D(o,t,r)},p(o,[r]){o[0]?n?n.p(o,r):(n=je(o),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:q,o:q,d(o){o&&L(t),n&&n.d(o)}}}function ht(e,t,n){let o,r,i;T(e,W,m=>n(9,r=m)),T(e,J,m=>n(4,i=m));let{isOpen:l=!1}=t,s=null;function u(){n(1,s=null),n(0,l=!1)}function a(){const m=Array.from(r);o.map(p=>{if(m.includes(p.id))switch(s){case"critical":p.isCritical=!p.isCritical;break;case"chop-move":p.isChopMoved=!p.isChopMoved;break;case"finesse":p.isFinessed=!p.isFinessed;break}return p}),J.updateCards(p=>p),W.update(p=>(p=new Set,p)),u()}const b=()=>n(1,s="critical"),v=()=>n(1,s="chop-move"),k=()=>n(1,s="finesse");return e.$$set=m=>{"isOpen"in m&&n(0,l=m.isOpen)},e.$$.update=()=>{e.$$.dirty&16&&(o=i)},[l,s,u,a,i,b,v,k]}class gt extends ee{constructor(t){super(),$(this,t,ht,_t,Y,{isOpen:0})}}function Ct(e){let t,n,o,r,i,l,s,u,a,b,v,k,m,p,S,O,I,y,g,_,h,P,A,F;r=new ft({});function B(f){e[7](f)}let c={};e[0]!==void 0&&(c.isOpen=e[0]),p=new dt({props:c}),ce.push(()=>Ie(p,"isOpen",B));function j(f){e[8](f)}let E={};e[1]!==void 0&&(E.isOpen=e[1]),I=new pt({props:E}),ce.push(()=>Ie(I,"isOpen",j));function N(f){e[9](f)}let w={};return e[2]!==void 0&&(w.isOpen=e[2]),_=new gt({props:w}),ce.push(()=>Ie(_,"isOpen",N)),{c(){t=C("div"),n=C("button"),n.textContent="Configure Game",o=R(),oe(r.$$.fragment),i=R(),l=C("button"),s=K("Record Hint"),a=R(),b=C("button"),v=K("Mark cards"),m=R(),oe(p.$$.fragment),O=R(),oe(I.$$.fragment),g=R(),oe(_.$$.fragment),H(n,"class","configure svelte-9e6wy5"),H(l,"class","hint-panel svelte-9e6wy5"),l.disabled=u=e[3].size<1,H(b,"class","mark-panel"),b.disabled=k=e[3].size<1,H(t,"class","game-controls svelte-9e6wy5")},m(f,V){D(f,t,V),d(t,n),d(t,o),Z(r,t,null),d(t,i),d(t,l),d(l,s),d(t,a),d(t,b),d(b,v),D(f,m,V),Z(p,f,V),D(f,O,V),Z(I,f,V),D(f,g,V),Z(_,f,V),P=!0,A||(F=[z(n,"click",e[4]),z(l,"click",e[5]),z(b,"click",e[6])],A=!0)},p(f,[V]){(!P||V&8&&u!==(u=f[3].size<1))&&(l.disabled=u),(!P||V&8&&k!==(k=f[3].size<1))&&(b.disabled=k);const G={};!S&&V&1&&(S=!0,G.isOpen=f[0],Ce(()=>S=!1)),p.$set(G);const M={};!y&&V&2&&(y=!0,M.isOpen=f[1],Ce(()=>y=!1)),I.$set(M);const Oe={};!h&&V&4&&(h=!0,Oe.isOpen=f[2],Ce(()=>h=!1)),_.$set(Oe)},i(f){P||(Q(r.$$.fragment,f),Q(p.$$.fragment,f),Q(I.$$.fragment,f),Q(_.$$.fragment,f),P=!0)},o(f){X(r.$$.fragment,f),X(p.$$.fragment,f),X(I.$$.fragment,f),X(_.$$.fragment,f),P=!1},d(f){f&&(L(t),L(m),L(O),L(g)),x(r),x(p,f),x(I,f),x(_,f),A=!1,U(F)}}}function vt(e,t,n){let o;T(e,W,m=>n(3,o=m));let r=!1;function i(){n(0,r=!0)}let l=!1;function s(){n(1,l=!0)}let u=!1;function a(){n(2,u=!0)}function b(m){r=m,n(0,r)}function v(m){l=m,n(1,l)}function k(m){u=m,n(2,u)}return[r,l,u,o,i,s,a,b,v,k]}class It extends ee{constructor(t){super(),$(this,t,vt,Ct,Y,{})}}function yt(e){let t,n,o,r=e[0]+1+"",i,l,s,u=Be(e[1])+"",a,b,v,k=e[6](e[2])+"",m,p,S,O;return{c(){t=C("div"),n=C("p"),o=K("Card "),i=K(r),l=R(),s=C("p"),a=K(u),b=R(),v=C("p"),m=K(k),H(t,"class",p="card no-"+e[5]+" svelte-yy599i"),H(t,"tabindex","0"),H(t,"role","button"),He(t,"border-color",e[4])},m(I,y){D(I,t,y),d(t,n),d(n,o),d(n,i),d(t,l),d(t,s),d(s,a),d(t,b),d(t,v),d(v,m),S||(O=[z(t,"click",e[13]),z(t,"keydown",e[14])],S=!0)},p(I,[y]){y&1&&r!==(r=I[0]+1+"")&&ge(i,r),y&2&&u!==(u=Be(I[1])+"")&&ge(a,u),y&4&&k!==(k=I[6](I[2])+"")&&ge(m,k),y&32&&p!==(p="card no-"+I[5]+" svelte-yy599i")&&H(t,"class",p),y&16&&He(t,"border-color",I[4])},i:q,o:q,d(I){I&&L(t),S=!1,U(O)}}}function Be(e){return e.map((n,o)=>n===!0||n===null?(o+1).toString():"").join(" ")}function kt(e,t,n){let o,r,i,l;T(e,fe,_=>n(12,l=_));let{id:s}=t,{numberInformation:u}=t,{colourInformation:a}=t,{selected:b=!1}=t,{isHinted:v}=t,{isFinessed:k}=t,{isChopMoved:m}=t,{isCritical:p}=t,{onSelect:S}=t;function O(_){return _.map((P,A)=>P===!0||P===null?I(A):"").join(" ")}function I(_){return _<5?["r","y","b","w","g"][_]:o=="blacks"&&_==5?"bl":o=="rainbows"&&_==5||o=="rainbows-and-blacks"&&_==5?"m":o=="rainbows-and-blacks"&&_==6?"bl":(console.log("Index {index} out of range for card {self.id} and variant {variant}"),"err")}const y=()=>S(s),g=_=>(_.key==="Enter"||_.key===" ")&&S(s);return e.$$set=_=>{"id"in _&&n(0,s=_.id),"numberInformation"in _&&n(1,u=_.numberInformation),"colourInformation"in _&&n(2,a=_.colourInformation),"selected"in _&&n(7,b=_.selected),"isHinted"in _&&n(8,v=_.isHinted),"isFinessed"in _&&n(9,k=_.isFinessed),"isChopMoved"in _&&n(10,m=_.isChopMoved),"isCritical"in _&&n(11,p=_.isCritical),"onSelect"in _&&n(3,S=_.onSelect)},e.$$.update=()=>{e.$$.dirty&4096&&(o=l.variant),e.$$.dirty&4096&&n(5,r=l.numberOfCards),e.$$.dirty&3968&&n(4,i=b?"blue":p?"red":v?"orange":k?"aqua":m?"white":"gray")},[s,u,a,S,i,r,O,b,v,k,m,p,l,y,g]}class wt extends ee{constructor(t){super(),$(this,t,kt,yt,Y,{id:0,numberInformation:1,colourInformation:2,selected:7,isHinted:8,isFinessed:9,isChopMoved:10,isCritical:11,onSelect:3})}}function ze(e,t,n){const o=e.slice();return o[3]=t[n],o}function Le(e,t){let n,o,r;return o=new wt({props:{id:t[3].id,numberInformation:t[3].numberInformation,colourInformation:t[3].colourInformation,selected:t[1].has(t[3].id),isHinted:t[3].isHinted,isChopMoved:t[3].isChopMoved,isFinessed:t[3].isFinessed,isCritical:t[3].isCritical,onSelect:t[2]}}),{key:e,first:null,c(){n=pe(),oe(o.$$.fragment),this.first=n},m(i,l){D(i,n,l),Z(o,i,l),r=!0},p(i,l){t=i;const s={};l&1&&(s.id=t[3].id),l&1&&(s.numberInformation=t[3].numberInformation),l&1&&(s.colourInformation=t[3].colourInformation),l&3&&(s.selected=t[1].has(t[3].id)),l&1&&(s.isHinted=t[3].isHinted),l&1&&(s.isChopMoved=t[3].isChopMoved),l&1&&(s.isFinessed=t[3].isFinessed),l&1&&(s.isCritical=t[3].isCritical),o.$set(s)},i(i){r||(Q(o.$$.fragment,i),r=!0)},o(i){X(o.$$.fragment,i),r=!1},d(i){i&&L(n),x(o,i)}}}function Ot(e){let t,n=[],o=new Map,r,i=se(e[0]);const l=s=>s[3].id;for(let s=0;s<i.length;s+=1){let u=ze(e,i,s),a=l(u);o.set(a,n[s]=Le(a,u))}return{c(){t=C("div");for(let s=0;s<n.length;s+=1)n[s].c();H(t,"class","hand svelte-insnbi")},m(s,u){D(s,t,u);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(t,null);r=!0},p(s,[u]){u&7&&(i=se(s[0]),et(),n=ot(n,u,l,1,s,i,o,t,nt,Le,null,ze),tt())},i(s){if(!r){for(let u=0;u<i.length;u+=1)Q(n[u]);r=!0}},o(s){for(let u=0;u<n.length;u+=1)X(n[u]);r=!1},d(s){s&&L(t);for(let u=0;u<n.length;u+=1)n[u].d()}}}function St(e,t,n){let o,r;T(e,J,l=>n(0,o=l)),T(e,W,l=>n(1,r=l));function i(l){r.has(l)?W.update(s=>{const u=new Set(s);return u.delete(l),u}):W.update(s=>{const u=new Set(s);return u.add(l),u})}return e.$$.update=()=>{e.$$.dirty&1&&console.log(o)},[o,r,i]}class Mt extends ee{constructor(t){super(),$(this,t,St,Ot,Y,{})}}function Ht(e){let t,n,o,r,i,l,s;return n=new It({}),r=new Mt({}),{c(){t=C("main"),oe(n.$$.fragment),o=R(),oe(r.$$.fragment),i=R(),l=C("a"),l.textContent="Check out my code!",H(l,"href","https://github.com/jparkhouse/hanabi-tracker/"),H(l,"target","_blank")},m(u,a){D(u,t,a),Z(n,t,null),d(t,o),Z(r,t,null),d(t,i),d(t,l),s=!0},p:q,i(u){s||(Q(n.$$.fragment,u),Q(r.$$.fragment,u),s=!0)},o(u){X(n.$$.fragment,u),X(r.$$.fragment,u),s=!1},d(u){u&&L(t),x(n),x(r)}}}class At extends ee{constructor(t){super(),$(this,t,null,Ht,Y,{})}}new At({target:document.getElementById("app")});
