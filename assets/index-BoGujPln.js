var tt=Object.defineProperty;var nt=(e,t,n)=>t in e?tt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ge=(e,t,n)=>(nt(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function D(){}function Xe(e){return e()}function Ee(){return Object.create(null)}function Q(e){e.forEach(Xe)}function Ye(e){return typeof e=="function"}function x(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function ot(e){return Object.keys(e).length===0}function rt(e,...t){if(e==null){for(const o of t)o(void 0);return D}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function U(e,t,n){e.$$.on_destroy.push(rt(t,n))}function c(e,t){e.appendChild(t)}function G(e,t,n){e.insertBefore(t,n||null)}function W(e){e.parentNode&&e.parentNode.removeChild(e)}function Pe(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function k(e){return document.createElement(e)}function J(e){return document.createTextNode(e)}function V(){return J(" ")}function Ie(){return J("")}function R(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function H(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function it(e){return Array.from(e.childNodes)}function ve(e,t){t=""+t,e.data!==t&&(e.data=t)}function re(e,t){e.value=t??""}function Fe(e,t,n,o){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function ke(e,t,n){for(let o=0;o<e.options.length;o+=1){const r=e.options[o];if(r.__value===t){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Re(e){const t=e.querySelector(":checked");return t&&t.__value}let Ae;function pe(e){Ae=e}const ae=[],be=[];let ce=[];const He=[],lt=Promise.resolve();let Me=!1;function st(){Me||(Me=!0,lt.then(Ze))}function _e(e){ce.push(e)}function we(e){He.push(e)}const Oe=new Set;let se=0;function Ze(){if(se!==0)return;const e=Ae;do{try{for(;se<ae.length;){const t=ae[se];se++,pe(t),ut(t.$$)}}catch(t){throw ae.length=0,se=0,t}for(pe(null),ae.length=0,se=0;be.length;)be.pop()();for(let t=0;t<ce.length;t+=1){const n=ce[t];Oe.has(n)||(Oe.add(n),n())}ce.length=0}while(ae.length);for(;He.length;)He.pop()();Me=!1,Oe.clear(),pe(e)}function ut(e){if(e.fragment!==null){e.update(),Q(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(_e)}}function at(e){const t=[],n=[];ce.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),ce=t}const ye=new Set;let ie;function ft(){ie={r:0,c:[],p:ie}}function ct(){ie.r||Q(ie.c),ie=ie.p}function X(e,t){e&&e.i&&(ye.delete(e),e.i(t))}function Z(e,t,n,o){if(e&&e.o){if(ye.has(e))return;ye.add(e),ie.c.push(()=>{ye.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function fe(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function dt(e,t){Z(e,1,1,()=>{t.delete(e.key)})}function mt(e,t,n,o,r,s,u,i,l,f,b,v){let w=e.length,p=s.length,_=w;const O={};for(;_--;)O[e[_].key]=_;const I=[],C=new Map,y=new Map,h=[];for(_=p;_--;){const N=v(r,s,_),q=n(N);let P=u.get(q);P?o&&h.push(()=>P.p(N,t)):(P=f(q,N),P.c()),C.set(q,I[_]=P),q in O&&y.set(q,Math.abs(_-O[q]))}const M=new Set,a=new Set;function E(N){X(N,1),N.m(i,b),u.set(N.key,N),b=N.first,p--}for(;w&&p;){const N=I[p-1],q=e[w-1],P=N.key,d=q.key;N===q?(b=N.first,w--,p--):C.has(d)?!u.has(P)||M.has(P)?E(N):a.has(d)?w--:y.get(P)>y.get(d)?(a.add(P),E(N)):(M.add(d),w--):(l(q,u),w--)}for(;w--;){const N=e[w];C.has(N.key)||l(N,u)}for(;p;)E(I[p-1]);return Q(h),I}function Se(e,t,n){const o=e.$$.props[t];o!==void 0&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function le(e){e&&e.c()}function ee(e,t,n){const{fragment:o,after_update:r}=e.$$;o&&o.m(t,n),_e(()=>{const s=e.$$.on_mount.map(Xe).filter(Ye);e.$$.on_destroy?e.$$.on_destroy.push(...s):Q(s),e.$$.on_mount=[]}),r.forEach(_e)}function te(e,t){const n=e.$$;n.fragment!==null&&(at(n.after_update),Q(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function pt(e,t){e.$$.dirty[0]===-1&&(ae.push(e),st(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ne(e,t,n,o,r,s,u=null,i=[-1]){const l=Ae;pe(e);const f=e.$$={fragment:null,ctx:[],props:s,update:D,not_equal:r,bound:Ee(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:Ee(),dirty:i,skip_bound:!1,root:t.target||l.$$.root};u&&u(f.root);let b=!1;if(f.ctx=n?n(e,t.props||{},(v,w,...p)=>{const _=p.length?p[0]:w;return f.ctx&&r(f.ctx[v],f.ctx[v]=_)&&(!f.skip_bound&&f.bound[v]&&f.bound[v](_),b&&pt(e,v)),w}):[],f.update(),b=!0,Q(f.before_update),f.fragment=o?o(f.ctx):!1,t.target){if(t.hydrate){const v=it(t.target);f.fragment&&f.fragment.l(v),v.forEach(W)}else f.fragment&&f.fragment.c();t.intro&&X(e.$$.fragment),ee(e,t.target,t.anchor),Ze()}pe(l)}class oe{constructor(){ge(this,"$$");ge(this,"$$set")}$destroy(){te(this,1),this.$destroy=D}$on(t,n){if(!Ye(n))return D;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const r=o.indexOf(n);r!==-1&&o.splice(r,1)}}$set(t){this.$$set&&!ot(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const bt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(bt);const ue=[];function he(e,t=D){let n;const o=new Set;function r(i){if(x(e,i)&&(e=i,n)){const l=!ue.length;for(const f of o)f[1](),ue.push(f,e);if(l){for(let f=0;f<ue.length;f+=2)ue[f][0](ue[f+1]);ue.length=0}}}function s(i){r(i(e))}function u(i,l=D){const f=[i,l];return o.add(f),o.size===1&&(n=t(r,s)||D),i(e),()=>{o.delete(f),o.size===0&&n&&(n(),n=null)}}return{set:r,update:s,subscribe:u}}const Y=he(new Set),de=he({numberOfCards:4,variant:"no-variant"}),xe=he(0);function $e(){let e=0;return xe.update(t=>(e=t,t+1)),e}class _t{constructor(t=1/0){ge(this,"storage",[]);this.capacity=t}push(t){if(this.storage.length>=this.capacity){let n=this.storage.length-this.capacity+1;this.storage.splice(0,n)}this.storage.push(t)}pop(){if(this.size()>0)return this.storage.pop();throw console.error("empty stack popped")}peek(){return this.storage[this.storage.length-1]}size(){return this.storage.length}clear(){this.storage=[]}}function ht(e){const t=JSON.stringify(e);return JSON.parse(t)}const $=new _t(5),me=he(0);function gt(){const{subscribe:e,set:t,update:n}=he([]),o=()=>{n(i=>($.push(ht(i)),i)),me.set($.size())},r=()=>{if($.size()>0){const i=$.pop();me.set($.size()),i&&t(i)}else console.warn("No previous state available for rollback");me.set($.size())},s=i=>{$.clear(),me.set($.size());const l=Array.from({length:i.numberOfCards},(f,b)=>({id:$e(),numberInformation:Array(5).fill(null),colourInformation:Array(i.variant==="no-variant"?5:i.variant==="rainbows"||i.variant==="blacks"?6:7).fill(null),isHinted:!1,isChopMoved:!1,isFinessed:!1,isCritical:!1}));t(l)},u=de.subscribe(i=>{xe.set(0),Y.update(l=>(l=new Set,l)),s(i)});return{subscribe:e,updateCards:i=>{n(l=>(o(),i(l)))},rollback:r,saveState:o,cleanup:()=>u()}}const K=gt();function kt(e){let t,n,o,r,s;return{c(){t=k("button"),n=J("Play/Discard"),t.disabled=o=e[0].size!==1},m(u,i){G(u,t,i),c(t,n),r||(s=R(t,"click",e[1]),r=!0)},p(u,[i]){i&1&&o!==(o=u[0].size!==1)&&(t.disabled=o)},i:D,o:D,d(u){u&&W(t),r=!1,s()}}}function Ct(e,t,n){let o,r,s;U(e,Y,l=>n(0,r=l)),U(e,de,l=>n(2,s=l));function u(){if(r.size===1){const l=r.values().next().value;K.updateCards(f=>{const b=f.filter(v=>v.id!==l);return b.push(i($e())),b}),r.clear()}}function i(l){return{id:l,numberInformation:Array(5).fill(null),colourInformation:Array(o==="no-variant"?5:o==="rainbows"||o==="blacks"?6:7).fill(null),isHinted:!1,isChopMoved:!1,isFinessed:!1,isCritical:!1}}return e.$$.update=()=>{e.$$.dirty&4&&(o=s.variant)},[r,u,s]}class vt extends oe{constructor(t){super(),ne(this,t,Ct,kt,x,{})}}function Be(e){let t,n,o,r,s,u,i,l,f,b,v,w,p,_,O,I,C,y,h,M,a,E,N;return{c(){t=k("div"),n=k("div"),o=k("div"),r=k("label"),r.textContent="Number of Cards:",s=V(),u=k("select"),i=k("option"),i.textContent="3",l=k("option"),l.textContent="4",f=k("option"),f.textContent="5",b=V(),v=k("label"),v.textContent="Variant:",w=V(),p=k("select"),_=k("option"),_.textContent="No variant",O=k("option"),O.textContent="Rainbows",I=k("option"),I.textContent="Blacks",C=k("option"),C.textContent="Rainbows and Blacks",y=V(),h=k("button"),h.textContent="Save",M=V(),a=k("button"),a.textContent="Cancel",H(r,"for","numberOfCards"),i.__value="3",re(i,i.__value),l.__value="4",re(l,l.__value),f.__value="5",re(f,f.__value),H(u,"id","numberOfCards"),e[1].numberOfCards===void 0&&_e(()=>e[5].call(u)),H(v,"for","Variant"),_.__value="no-variant",re(_,_.__value),O.__value="rainbows",re(O,O.__value),I.__value="blacks",re(I,I.__value),C.__value="rainbows-and-blacks",re(C,C.__value),H(p,"id","Variant"),e[1].variant===void 0&&_e(()=>e[6].call(p)),H(o,"class","config-form svelte-16v23fx"),H(n,"class","config-modal svelte-16v23fx"),H(t,"class","modal-overlay svelte-16v23fx")},m(q,P){G(q,t,P),c(t,n),c(n,o),c(o,r),c(o,s),c(o,u),c(u,i),c(u,l),c(u,f),ke(u,e[1].numberOfCards,!0),c(o,b),c(o,v),c(o,w),c(o,p),c(p,_),c(p,O),c(p,I),c(p,C),ke(p,e[1].variant,!0),c(n,y),c(n,h),c(n,M),c(n,a),E||(N=[R(u,"change",e[5]),R(p,"change",e[6]),R(h,"click",e[3]),R(a,"click",e[2])],E=!0)},p(q,P){P&2&&ke(u,q[1].numberOfCards),P&2&&ke(p,q[1].variant)},d(q){q&&W(t),E=!1,Q(N)}}}function yt(e){let t,n=e[0]&&Be(e);return{c(){n&&n.c(),t=Ie()},m(o,r){n&&n.m(o,r),G(o,t,r)},p(o,[r]){o[0]?n?n.p(o,r):(n=Be(o),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:D,o:D,d(o){o&&W(t),n&&n.d(o)}}}function It(e,t,n){let o;U(e,de,b=>n(4,o=b));let{isOpen:r=!1}=t,s={numberOfCards:4,variant:"no-variant"};function u(){n(0,r=!1)}function i(){de.set(s),u()}function l(){s.numberOfCards=Re(this),n(1,s),n(0,r),n(4,o)}function f(){s.variant=Re(this),n(1,s),n(0,r),n(4,o)}return e.$$set=b=>{"isOpen"in b&&n(0,r=b.isOpen)},e.$$.update=()=>{e.$$.dirty&17&&r&&n(1,s=o),e.$$.dirty&1&&console.log(r)},[r,s,u,i,o,l,f]}class wt extends oe{constructor(t){super(),ne(this,t,It,yt,x,{isOpen:0})}}function je(e,t,n){const o=e.slice();return o[23]=t[n],o}function We(e,t,n){const o=e.slice();return o[26]=t[n],o}function De(e){let t,n,o,r,s,u,i,l,f,b,v,w,p,_,O=fe(e[2]),I=[];for(let h=0;h<O.length;h+=1)I[h]=Ge(We(e,O,h));let C=fe(e[3]),y=[];for(let h=0;h<C.length;h+=1)y[h]=Te(je(e,C,h));return{c(){t=k("div"),n=k("div"),o=k("div");for(let h=0;h<I.length;h+=1)I[h].c();r=V(),s=k("div");for(let h=0;h<y.length;h+=1)y[h].c();u=V(),i=k("div"),l=k("button"),f=J("Save"),v=V(),w=k("button"),w.textContent="Cancel",H(o,"class","numbers-hints svelte-cxqqya"),H(s,"class","colours-hints svelte-cxqqya"),l.disabled=b=!e[1],H(i,"class","actions"),H(n,"class","hint-modal svelte-cxqqya"),H(t,"class","modal-overlay svelte-cxqqya")},m(h,M){G(h,t,M),c(t,n),c(n,o);for(let a=0;a<I.length;a+=1)I[a]&&I[a].m(o,null);c(n,r),c(n,s);for(let a=0;a<y.length;a+=1)y[a]&&y[a].m(s,null);c(n,u),c(n,i),c(i,l),c(l,f),c(i,v),c(i,w),p||(_=[R(l,"click",e[4]),R(w,"click",e[6])],p=!0)},p(h,M){if(M&38){O=fe(h[2]);let a;for(a=0;a<O.length;a+=1){const E=We(h,O,a);I[a]?I[a].p(E,M):(I[a]=Ge(E),I[a].c(),I[a].m(o,null))}for(;a<I.length;a+=1)I[a].d(1);I.length=O.length}if(M&42){C=fe(h[3]);let a;for(a=0;a<C.length;a+=1){const E=je(h,C,a);y[a]?y[a].p(E,M):(y[a]=Te(E),y[a].c(),y[a].m(s,null))}for(;a<y.length;a+=1)y[a].d(1);y.length=C.length}M&2&&b!==(b=!h[1])&&(l.disabled=b)},d(h){h&&W(t),Pe(I,h),Pe(y,h),p=!1,Q(_)}}}function Ge(e){let t,n=e[26]+"",o,r,s;function u(){return e[8](e[26])}return{c(){t=k("button"),o=J(n),H(t,"class","btn"),t.hidden=!e[5](e[26])},m(i,l){G(i,t,l),c(t,o),r||(s=R(t,"click",u),r=!0)},p(i,l){e=i},d(i){i&&W(t),r=!1,s()}}}function Te(e){let t,n=e[23]+"",o,r,s;function u(){return e[9](e[23])}return{c(){t=k("button"),o=J(n),H(t,"class","btn"),t.hidden=!e[5](e[23])},m(i,l){G(i,t,l),c(t,o),r||(s=R(t,"click",u),r=!0)},p(i,l){e=i},d(i){i&&W(t),r=!1,s()}}}function Ot(e){let t,n=e[0]&&De(e);return{c(){n&&n.c(),t=Ie()},m(o,r){n&&n.m(o,r),G(o,t,r)},p(o,[r]){o[0]?n?n.p(o,r):(n=De(o),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:D,o:D,d(o){o&&W(t),n&&n.d(o)}}}function Ce(e){const t=e.filter(o=>o===null).length,n=e.filter(o=>o===!1).length;if(t===1&&n===e.length-1){const o=e.findIndex(r=>r===null);e[o]=!0}}function St(e,t,n){let o,r,s,u;U(e,K,d=>n(11,r=d)),U(e,Y,d=>n(12,s=d)),U(e,de,d=>n(7,u=d));let{isOpen:i=!1}=t;const l=[1,2,3,4,5],f=["red","yellow","blue","white","green"];let b=null;function v(){b&&(console.log("a hint!"),typeof b=="string"?w(b):typeof b=="number"&&C(b),Y.update(d=>(d=new Set,d)),N())}function w(d){switch(o){case"no-variant":p(d);break;case"rainbows":_(d);break;case"blacks":O(d);break;case"rainbows-and-blacks":I(d);break}}function p(d){const z=Array.from(s),L=f.findIndex(A=>A===d);K.updateCards(A=>A.map(m=>{const F=m.colourInformation.map((B,j)=>z.includes(m.id)?(m.isHinted=!0,j===L):j!==L?B:!1);return Ce(F),{...m,colourInformation:F}}))}function _(d){const z=Array.from(s),L=f.findIndex(A=>A===d);K.updateCards(A=>{let g=A;return g.forEach((m,F)=>{z.includes(m.id)?(m.isHinted=!0,m.colourInformation[5]===null&&m.colourInformation[L]===null?m.colourInformation.forEach((B,j)=>{j!=L&&j!=5&&(m.colourInformation[j]=!1)}):m.colourInformation[5]===null&&m.colourInformation[L]===!1?m.colourInformation.forEach((B,j)=>{j==5?m.colourInformation[j]=!0:m.colourInformation[j]=!1}):m.colourInformation[5]===!1&&m.colourInformation[L]===null&&m.colourInformation.forEach((B,j)=>{j==L?m.colourInformation[j]=!0:m.colourInformation[j]=!1})):m.colourInformation[5]!==!0&&(m.colourInformation[L]=!1,m.colourInformation[5]=!1,Ce(m.colourInformation))}),g})}function O(d){const z=Array.from(s),L=f.findIndex(A=>A===d);K.updateCards(A=>A.map(m=>{let F;return z.includes(m.id)?(m.isHinted=!0,F=m.colourInformation.map((B,j)=>j===L)):F=m.colourInformation.map((B,j)=>j!==L?B:!1),Ce(F),{...m,colourInformation:F}}))}function I(d){const z=Array.from(s),L=f.findIndex(A=>A===d);K.updateCards(A=>A.map(g=>{let m=[...g.colourInformation];return z.includes(g.id)?(g.isHinted=!0,g.colourInformation[5]===null&&g.colourInformation[L]===null?m=m.map((F,B)=>B===L||B===5?null:!1):g.colourInformation[5]===null&&g.colourInformation[L]===!1?m=m.map((F,B)=>B===5):g.colourInformation[5]===!1&&g.colourInformation[L]===null&&(m=m.map((F,B)=>B===L))):(m[L]=!1,m[5]=!1),Ce(m),{...g,colourInformation:m}}))}function C(d){const z=Array.from(s);K.updateCards(L=>L.map(g=>{const m=g.numberInformation.map((F,B)=>z.includes(g.id)?(g.isHinted=!0,B===d-1):B!==d-1?F:!1);return{...g,numberInformation:m}}))}function y(d){let z=!1;switch(o){case"no-variant":z=h(d);break;case"rainbows":z=M(d);break;case"blacks":z=a(d);break;case"rainbows-and-blacks":z=E(d);break}return z}function h(d){return Array.from(s).every(A=>{const g=r.find(m=>m.id===A);if(!g)return!1;if(typeof d=="string"){const m=f.indexOf(d);return g.colourInformation[m]===null||g.colourInformation[m]===!0}else if(typeof d=="number")return g.numberInformation[d-1]===null||g.numberInformation[d-1]===!0})}function M(d){return Array.from(s).every(A=>{const g=r.find(m=>m.id===A);if(!g)return!1;if(typeof d=="string"){if(g.colourInformation[5]===null||g.colourInformation[5]===!0)return!0;{const F=f.indexOf(d);return g.colourInformation[F]===null||g.colourInformation[F]===!0}}else if(typeof d=="number")return g.numberInformation[d-1]===null||g.numberInformation[d-1]===!0})}function a(d){return Array.from(s).every(A=>{const g=r.find(m=>m.id===A);if(!g)return!1;if(typeof d=="string"){const m=f.indexOf(d);return g.colourInformation[m]===null||g.colourInformation[m]===!0}else if(typeof d=="number")return g.numberInformation[d-1]===null||g.numberInformation[d-1]===!0})}function E(d){return Array.from(s).every(A=>{const g=r.find(m=>m.id===A);if(!g)return!1;if(typeof d=="string"){if(g.colourInformation[5]===null||g.colourInformation[5]===!0)return!0;{const F=f.indexOf(d);return g.colourInformation[F]===null||g.colourInformation[F]===!0}}else if(typeof d=="number")return g.numberInformation[d-1]===null||g.numberInformation[d-1]===!0})}function N(){n(0,i=!1),n(1,b=null)}const q=d=>n(1,b=d),P=d=>n(1,b=d);return e.$$set=d=>{"isOpen"in d&&n(0,i=d.isOpen)},e.$$.update=()=>{e.$$.dirty&128&&(o=u.variant)},[i,b,l,f,v,y,N,u,q,P]}class Ht extends oe{constructor(t){super(),ne(this,t,St,Ot,x,{isOpen:0})}}function Je(e){let t,n,o,r,s,u,i,l,f,b,v,w,p,_,O,I,C;return{c(){t=k("div"),n=k("div"),o=k("div"),r=k("button"),r.textContent="Critical",s=V(),u=k("button"),u.textContent="Chop moved",i=V(),l=k("button"),l.textContent="Finessed",f=V(),b=k("div"),v=k("button"),w=J("Save"),_=V(),O=k("button"),O.textContent="Cancel",H(r,"class","btn"),H(u,"class","btn"),H(l,"class","btn"),H(o,"class","flags"),v.disabled=p=!e[1],H(b,"class","actions"),H(n,"class","mark-modal svelte-1fkqm3b"),H(t,"class","modal-overlay svelte-1fkqm3b")},m(y,h){G(y,t,h),c(t,n),c(n,o),c(o,r),c(o,s),c(o,u),c(o,i),c(o,l),c(n,f),c(n,b),c(b,v),c(v,w),c(b,_),c(b,O),I||(C=[R(r,"click",e[5]),R(u,"click",e[6]),R(l,"click",e[7]),R(v,"click",e[3]),R(O,"click",e[2])],I=!0)},p(y,h){h&2&&p!==(p=!y[1])&&(v.disabled=p)},d(y){y&&W(t),I=!1,Q(C)}}}function Mt(e){let t,n=e[0]&&Je(e);return{c(){n&&n.c(),t=Ie()},m(o,r){n&&n.m(o,r),G(o,t,r)},p(o,[r]){o[0]?n?n.p(o,r):(n=Je(o),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:D,o:D,d(o){o&&W(t),n&&n.d(o)}}}function At(e,t,n){let o,r,s;U(e,Y,p=>n(9,r=p)),U(e,K,p=>n(4,s=p));let{isOpen:u=!1}=t,i=null;function l(){n(1,i=null),n(0,u=!1)}function f(){const p=Array.from(r);o.map(_=>{if(p.includes(_.id))switch(i){case"critical":_.isCritical=!_.isCritical;break;case"chop-move":_.isChopMoved=!_.isChopMoved;break;case"finesse":_.isFinessed=!_.isFinessed;break}return _}),K.updateCards(_=>_),Y.update(_=>(_=new Set,_)),l()}const b=()=>n(1,i="critical"),v=()=>n(1,i="chop-move"),w=()=>n(1,i="finesse");return e.$$set=p=>{"isOpen"in p&&n(0,u=p.isOpen)},e.$$.update=()=>{e.$$.dirty&16&&(o=s)},[u,i,l,f,s,b,v,w]}class Nt extends oe{constructor(t){super(),ne(this,t,At,Mt,x,{isOpen:0})}}function qt(e){let t,n,o,r,s,u,i,l,f,b,v,w,p,_,O,I,C,y,h,M,a,E,N,q,P,d,z,L,A,g,m;i=new vt({});function F(S){e[14](S)}let B={};e[1]!==void 0&&(B.isOpen=e[1]),a=new wt({props:B}),be.push(()=>Se(a,"isOpen",F));function j(S){e[15](S)}let Ne={};e[2]!==void 0&&(Ne.isOpen=e[2]),q=new Ht({props:Ne}),be.push(()=>Se(q,"isOpen",j));function et(S){e[16](S)}let qe={};return e[3]!==void 0&&(qe.isOpen=e[3]),z=new Nt({props:qe}),be.push(()=>Se(z,"isOpen",et)),{c(){t=k("div"),n=k("button"),n.textContent="Configure Game",o=V(),r=k("button"),s=J(e[0]),u=V(),le(i.$$.fragment),l=V(),f=k("button"),b=J("Record Hint"),w=V(),p=k("button"),_=J("Mark cards"),I=V(),C=k("button"),y=J("Undo"),M=V(),le(a.$$.fragment),N=V(),le(q.$$.fragment),d=V(),le(z.$$.fragment),H(n,"class","configure svelte-9e6wy5"),H(r,"class","wake-lock"),r.hidden=!e[6],H(f,"class","hint-panel svelte-9e6wy5"),f.disabled=v=e[5].size<1,H(p,"class","mark-panel"),p.disabled=O=e[5].size<1,H(C,"class","undo"),C.disabled=h=e[4]<1,H(t,"class","game-controls svelte-9e6wy5")},m(S,T){G(S,t,T),c(t,n),c(t,o),c(t,r),c(r,s),c(t,u),ee(i,t,null),c(t,l),c(t,f),c(f,b),c(t,w),c(t,p),c(p,_),c(t,I),c(t,C),c(C,y),G(S,M,T),ee(a,S,T),G(S,N,T),ee(q,S,T),G(S,d,T),ee(z,S,T),A=!0,g||(m=[R(n,"click",e[8]),R(r,"click",e[7]),R(f,"click",e[9]),R(p,"click",e[10]),R(C,"click",e[11])],g=!0)},p(S,[T]){(!A||T&1)&&ve(s,S[0]),(!A||T&32&&v!==(v=S[5].size<1))&&(f.disabled=v),(!A||T&32&&O!==(O=S[5].size<1))&&(p.disabled=O),(!A||T&16&&h!==(h=S[4]<1))&&(C.disabled=h);const Le={};!E&&T&2&&(E=!0,Le.isOpen=S[1],we(()=>E=!1)),a.$set(Le);const ze={};!P&&T&4&&(P=!0,ze.isOpen=S[2],we(()=>P=!1)),q.$set(ze);const Ve={};!L&&T&8&&(L=!0,Ve.isOpen=S[3],we(()=>L=!1)),z.$set(Ve)},i(S){A||(X(i.$$.fragment,S),X(a.$$.fragment,S),X(q.$$.fragment,S),X(z.$$.fragment,S),A=!0)},o(S){Z(i.$$.fragment,S),Z(a.$$.fragment,S),Z(q.$$.fragment,S),Z(z.$$.fragment,S),A=!1},d(S){S&&(W(t),W(M),W(N),W(d)),te(i),te(a,S),te(q,S),te(z,S),g=!1,Q(m)}}}function Lt(e,t,n){let o,r,s;U(e,me,M=>n(13,r=M)),U(e,Y,M=>n(5,s=M));let u=null,i="wakeLock"in navigator,l="Wake Lock Off";async function f(){if(u)u.release(),n(12,u=null),n(0,l="Wake Lock Off");else try{n(12,u=await navigator.wakeLock.request("screen")),u.addEventListener("release",()=>{n(12,u=null),n(0,l="Wake Lock Off")}),n(0,l="Wake Lock On")}catch(M){console.error(`Could not acquire wake lock: ${M}`)}}let b=!1;function v(){n(1,b=!0)}let w=!1;function p(){n(2,w=!0)}let _=!1;function O(){n(3,_=!0)}function I(){K.rollback()}function C(M){b=M,n(1,b)}function y(M){w=M,n(2,w)}function h(M){_=M,n(3,_)}return e.$$.update=()=>{e.$$.dirty&4096&&(u?n(0,l="Wake Lock On"):n(0,l="Wake Lock Off")),e.$$.dirty&8192&&n(4,o=r),e.$$.dirty&8192&&console.log(r)},[l,b,w,_,o,s,i,f,v,p,O,I,u,r,C,y,h]}class zt extends oe{constructor(t){super(),ne(this,t,Lt,qt,x,{})}}function Vt(e){let t,n,o,r=e[0]+1+"",s,u,i,l=Ue(e[1])+"",f,b,v,w=e[7](e[2])+"",p,_,O,I;return{c(){t=k("div"),n=k("p"),o=J("Card "),s=J(r),u=V(),i=k("p"),f=J(l),b=V(),v=k("p"),p=J(w),H(t,"class",_="card no-"+e[6]+" "+(e[4]!=null?e[4]:"")+" svelte-5qmqfn"),H(t,"tabindex","0"),H(t,"role","button"),Fe(t,"border-color",e[5])},m(C,y){G(C,t,y),c(t,n),c(n,o),c(n,s),c(t,u),c(t,i),c(i,f),c(t,b),c(t,v),c(v,p),O||(I=[R(t,"click",e[14]),R(t,"keydown",e[15])],O=!0)},p(C,[y]){y&1&&r!==(r=C[0]+1+"")&&ve(s,r),y&2&&l!==(l=Ue(C[1])+"")&&ve(f,l),y&4&&w!==(w=C[7](C[2])+"")&&ve(p,w),y&80&&_!==(_="card no-"+C[6]+" "+(C[4]!=null?C[4]:"")+" svelte-5qmqfn")&&H(t,"class",_),y&32&&Fe(t,"border-color",C[5])},i:D,o:D,d(C){C&&W(t),O=!1,Q(I)}}}function Ue(e){return e.map((n,o)=>n===!0||n===null?(o+1).toString():"").join(" ")}function Et(e,t,n){let o,r,s,u;U(e,de,a=>n(13,u=a));let{id:i}=t,{numberInformation:l}=t,{colourInformation:f}=t,{selected:b=!1}=t,{isHinted:v}=t,{isFinessed:w}=t,{isChopMoved:p}=t,{isCritical:_}=t,{onSelect:O}=t,I=null;function C(a){return a.map((N,q)=>N===!0||N===null?y(q):"").join(" ")}function y(a){return a<5?["r","y","b","w","g"][a]:o=="blacks"&&a==5?"bl":o=="rainbows"&&a==5||o=="rainbows-and-blacks"&&a==5?"m":o=="rainbows-and-blacks"&&a==6?"bl":(console.log("Index {index} out of range for card {self.id} and variant {variant}"),"err")}const h=()=>O(i),M=a=>(a.key==="Enter"||a.key===" ")&&O(i);return e.$$set=a=>{"id"in a&&n(0,i=a.id),"numberInformation"in a&&n(1,l=a.numberInformation),"colourInformation"in a&&n(2,f=a.colourInformation),"selected"in a&&n(8,b=a.selected),"isHinted"in a&&n(9,v=a.isHinted),"isFinessed"in a&&n(10,w=a.isFinessed),"isChopMoved"in a&&n(11,p=a.isChopMoved),"isCritical"in a&&n(12,_=a.isCritical),"onSelect"in a&&n(3,O=a.onSelect)},e.$$.update=()=>{if(e.$$.dirty&8192&&(o=u.variant),e.$$.dirty&8192&&n(6,r=u.numberOfCards),e.$$.dirty&7936&&n(5,s=b?"blue":_?"red":v?"orange":w?"aqua":p?"white":"gray"),e.$$.dirty&4){const a=f.findIndex(E=>E===!0);a===-1?n(4,I=null):n(4,I=y(a))}},[i,l,f,O,I,s,r,C,b,v,w,p,_,u,h,M]}class Pt extends oe{constructor(t){super(),ne(this,t,Et,Vt,x,{id:0,numberInformation:1,colourInformation:2,selected:8,isHinted:9,isFinessed:10,isChopMoved:11,isCritical:12,onSelect:3})}}function Ke(e,t,n){const o=e.slice();return o[3]=t[n],o}function Qe(e,t){let n,o,r;return o=new Pt({props:{id:t[3].id,numberInformation:t[3].numberInformation,colourInformation:t[3].colourInformation,selected:t[1].has(t[3].id),isHinted:t[3].isHinted,isChopMoved:t[3].isChopMoved,isFinessed:t[3].isFinessed,isCritical:t[3].isCritical,onSelect:t[2]}}),{key:e,first:null,c(){n=Ie(),le(o.$$.fragment),this.first=n},m(s,u){G(s,n,u),ee(o,s,u),r=!0},p(s,u){t=s;const i={};u&1&&(i.id=t[3].id),u&1&&(i.numberInformation=t[3].numberInformation),u&1&&(i.colourInformation=t[3].colourInformation),u&3&&(i.selected=t[1].has(t[3].id)),u&1&&(i.isHinted=t[3].isHinted),u&1&&(i.isChopMoved=t[3].isChopMoved),u&1&&(i.isFinessed=t[3].isFinessed),u&1&&(i.isCritical=t[3].isCritical),o.$set(i)},i(s){r||(X(o.$$.fragment,s),r=!0)},o(s){Z(o.$$.fragment,s),r=!1},d(s){s&&W(n),te(o,s)}}}function Ft(e){let t,n=[],o=new Map,r,s=fe(e[0]);const u=i=>i[3].id;for(let i=0;i<s.length;i+=1){let l=Ke(e,s,i),f=u(l);o.set(f,n[i]=Qe(f,l))}return{c(){t=k("div");for(let i=0;i<n.length;i+=1)n[i].c();H(t,"class","hand svelte-insnbi")},m(i,l){G(i,t,l);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(t,null);r=!0},p(i,[l]){l&7&&(s=fe(i[0]),ft(),n=mt(n,l,u,1,i,s,o,t,dt,Qe,null,Ke),ct())},i(i){if(!r){for(let l=0;l<s.length;l+=1)X(n[l]);r=!0}},o(i){for(let l=0;l<n.length;l+=1)Z(n[l]);r=!1},d(i){i&&W(t);for(let l=0;l<n.length;l+=1)n[l].d()}}}function Rt(e,t,n){let o,r;U(e,K,u=>n(0,o=u)),U(e,Y,u=>n(1,r=u));function s(u){r.has(u)?Y.update(i=>{const l=new Set(i);return l.delete(u),l}):Y.update(i=>{const l=new Set(i);return l.add(u),l})}return e.$$.update=()=>{e.$$.dirty&1&&console.log(o)},[o,r,s]}class Bt extends oe{constructor(t){super(),ne(this,t,Rt,Ft,x,{})}}function jt(e){let t,n,o,r,s,u,i;return n=new zt({}),r=new Bt({}),{c(){t=k("main"),le(n.$$.fragment),o=V(),le(r.$$.fragment),s=V(),u=k("a"),u.textContent="Check out my code!",H(u,"href","https://github.com/jparkhouse/hanabi-tracker/"),H(u,"target","_blank")},m(l,f){G(l,t,f),ee(n,t,null),c(t,o),ee(r,t,null),c(t,s),c(t,u),i=!0},p:D,i(l){i||(X(n.$$.fragment,l),X(r.$$.fragment,l),i=!0)},o(l){Z(n.$$.fragment,l),Z(r.$$.fragment,l),i=!1},d(l){l&&W(t),te(n),te(r)}}}class Wt extends oe{constructor(t){super(),ne(this,t,null,jt,x,{})}}new Wt({target:document.getElementById("app")});
