var Ze=Object.defineProperty;var xe=(e,t,n)=>t in e?Ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ge=(e,t,n)=>(xe(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const u of i)if(u.type==="childList")for(const s of u.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const u={};return i.integrity&&(u.integrity=i.integrity),i.referrerPolicy&&(u.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?u.credentials="include":i.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(i){if(i.ep)return;i.ep=!0;const u=n(i);fetch(i.href,u)}})();function q(){}function Te(e){return e()}function ze(){return Object.create(null)}function W(e){e.forEach(Te)}function Qe(e){return typeof e=="function"}function x(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function $e(e){return Object.keys(e).length===0}function et(e,...t){if(e==null){for(const o of t)o(void 0);return q}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function T(e,t,n){e.$$.on_destroy.push(et(t,n))}function d(e,t){e.appendChild(t)}function D(e,t,n){e.insertBefore(t,n||null)}function L(e){e.parentNode&&e.parentNode.removeChild(e)}function Ve(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function I(e){return document.createElement(e)}function K(e){return document.createTextNode(e)}function F(){return K(" ")}function Ie(){return K("")}function B(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function M(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function tt(e){return Array.from(e.childNodes)}function ye(e,t){t=""+t,e.data!==t&&(e.data=t)}function ie(e,t){e.value=t??""}function Pe(e,t,n,o){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function Ce(e,t,n){for(let o=0;o<e.options.length;o+=1){const i=e.options[o];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Fe(e){const t=e.querySelector(":checked");return t&&t.__value}let Me;function pe(e){Me=e}const ae=[],be=[];let ce=[];const Se=[],nt=Promise.resolve();let He=!1;function ot(){He||(He=!0,nt.then(We))}function _e(e){ce.push(e)}function ke(e){Se.push(e)}const we=new Set;let se=0;function We(){if(se!==0)return;const e=Me;do{try{for(;se<ae.length;){const t=ae[se];se++,pe(t),it(t.$$)}}catch(t){throw ae.length=0,se=0,t}for(pe(null),ae.length=0,se=0;be.length;)be.pop()();for(let t=0;t<ce.length;t+=1){const n=ce[t];we.has(n)||(we.add(n),n())}ce.length=0}while(ae.length);for(;Se.length;)Se.pop()();He=!1,we.clear(),pe(e)}function it(e){if(e.fragment!==null){e.update(),W(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(_e)}}function rt(e){const t=[],n=[];ce.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),ce=t}const ve=new Set;let re;function lt(){re={r:0,c:[],p:re}}function st(){re.r||W(re.c),re=re.p}function X(e,t){e&&e.i&&(ve.delete(e),e.i(t))}function Z(e,t,n,o){if(e&&e.o){if(ve.has(e))return;ve.add(e),re.c.push(()=>{ve.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function fe(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function ut(e,t){Z(e,1,1,()=>{t.delete(e.key)})}function at(e,t,n,o,i,u,s,r,l,a,m,y){let k=e.length,b=u.length,p=k;const S={};for(;p--;)S[e[p].key]=p;const h=[],O=new Map,C=new Map,v=[];for(p=b;p--;){const E=y(i,u,p),N=n(E);let j=s.get(N);j?o&&v.push(()=>j.p(E,t)):(j=a(N,E),j.c()),O.set(N,h[p]=j),N in S&&C.set(N,Math.abs(p-S[N]))}const g=new Set,_=new Set;function R(E){X(E,1),E.m(r,m),s.set(E.key,E),m=E.first,b--}for(;k&&b;){const E=h[b-1],N=e[k-1],j=E.key,f=N.key;E===N?(m=E.first,k--,b--):O.has(f)?!s.has(j)||g.has(j)?R(E):_.has(f)?k--:C.get(j)>C.get(f)?(_.add(j),R(E)):(g.add(f),k--):(l(N,s),k--)}for(;k--;){const E=e[k];O.has(E.key)||l(E,s)}for(;b;)R(h[b-1]);return W(v),h}function Oe(e,t,n){const o=e.$$.props[t];o!==void 0&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function le(e){e&&e.c()}function ee(e,t,n){const{fragment:o,after_update:i}=e.$$;o&&o.m(t,n),_e(()=>{const u=e.$$.on_mount.map(Te).filter(Qe);e.$$.on_destroy?e.$$.on_destroy.push(...u):W(u),e.$$.on_mount=[]}),i.forEach(_e)}function te(e,t){const n=e.$$;n.fragment!==null&&(rt(n.after_update),W(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ft(e,t){e.$$.dirty[0]===-1&&(ae.push(e),ot(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ne(e,t,n,o,i,u,s=null,r=[-1]){const l=Me;pe(e);const a=e.$$={fragment:null,ctx:[],props:u,update:q,not_equal:i,bound:ze(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:ze(),dirty:r,skip_bound:!1,root:t.target||l.$$.root};s&&s(a.root);let m=!1;if(a.ctx=n?n(e,t.props||{},(y,k,...b)=>{const p=b.length?b[0]:k;return a.ctx&&i(a.ctx[y],a.ctx[y]=p)&&(!a.skip_bound&&a.bound[y]&&a.bound[y](p),m&&ft(e,y)),k}):[],a.update(),m=!0,W(a.before_update),a.fragment=o?o(a.ctx):!1,t.target){if(t.hydrate){const y=tt(t.target);a.fragment&&a.fragment.l(y),y.forEach(L)}else a.fragment&&a.fragment.c();t.intro&&X(e.$$.fragment),ee(e,t.target,t.anchor),We()}pe(l)}class oe{constructor(){ge(this,"$$");ge(this,"$$set")}$destroy(){te(this,1),this.$destroy=q}$on(t,n){if(!Qe(n))return q;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const i=o.indexOf(n);i!==-1&&o.splice(i,1)}}$set(t){this.$$set&&!$e(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ct="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ct);const ue=[];function he(e,t=q){let n;const o=new Set;function i(r){if(x(e,r)&&(e=r,n)){const l=!ue.length;for(const a of o)a[1](),ue.push(a,e);if(l){for(let a=0;a<ue.length;a+=2)ue[a][0](ue[a+1]);ue.length=0}}}function u(r){i(r(e))}function s(r,l=q){const a=[r,l];return o.add(a),o.size===1&&(n=t(i,u)||q),r(e),()=>{o.delete(a),o.size===0&&n&&(n(),n=null)}}return{set:i,update:u,subscribe:s}}const Y=he(new Set),de=he({numberOfCards:4,variant:"no-variant"}),Xe=he(0);function Ye(){let e=0;return Xe.update(t=>(e=t,t+1)),e}class dt{constructor(t=1/0){ge(this,"storage",[]);this.capacity=t}push(t){if(this.storage.length>=this.capacity){let n=this.storage.length-this.capacity+1;this.storage.splice(0,n)}this.storage.push(t)}pop(){if(this.size()>0)return this.storage.pop();throw console.error("empty stack popped")}peek(){return this.storage[this.storage.length-1]}size(){return this.storage.length}clear(){this.storage=[]}}function mt(e){const t=JSON.stringify(e);return JSON.parse(t)}const $=new dt(5),me=he(0);function pt(){const{subscribe:e,set:t,update:n}=he([]),o=()=>{n(r=>($.push(mt(r)),r)),me.set($.size())},i=()=>{if($.size()>0){const r=$.pop();me.set($.size()),r&&t(r)}else console.warn("No previous state available for rollback");me.set($.size())},u=r=>{$.clear(),me.set($.size());const l=Array.from({length:r.numberOfCards},(a,m)=>({id:Ye(),numberInformation:Array(5).fill(null),colourInformation:Array(r.variant==="no-variant"?5:r.variant==="rainbows"||r.variant==="blacks"?6:7).fill(null),isHinted:!1,isChopMoved:!1,isFinessed:!1,isCritical:!1}));t(l)},s=de.subscribe(r=>{Xe.set(0),Y.update(l=>(l=new Set,l)),u(r)});return{subscribe:e,updateCards:r=>{n(l=>(o(),r(l)))},rollback:i,saveState:o,cleanup:()=>s()}}const Q=pt();function bt(e){let t,n,o,i,u;return{c(){t=I("button"),n=K("Play/Discard"),t.disabled=o=e[0].size!==1},m(s,r){D(s,t,r),d(t,n),i||(u=B(t,"click",e[1]),i=!0)},p(s,[r]){r&1&&o!==(o=s[0].size!==1)&&(t.disabled=o)},i:q,o:q,d(s){s&&L(t),i=!1,u()}}}function _t(e,t,n){let o,i,u;T(e,Y,l=>n(0,i=l)),T(e,de,l=>n(2,u=l));function s(){if(i.size===1){const l=i.values().next().value;Q.updateCards(a=>{const m=a.filter(y=>y.id!==l);return m.push(r(Ye())),m}),i.clear()}}function r(l){return{id:l,numberInformation:Array(5).fill(null),colourInformation:Array(o==="no-variant"?5:o==="rainbows"||o==="blacks"?6:7).fill(null),isHinted:!1,isChopMoved:!1,isFinessed:!1,isCritical:!1}}return e.$$.update=()=>{e.$$.dirty&4&&(o=u.variant)},[i,s,u]}class ht extends oe{constructor(t){super(),ne(this,t,_t,bt,x,{})}}function Re(e){let t,n,o,i,u,s,r,l,a,m,y,k,b,p,S,h,O,C,v,g,_,R,E;return{c(){t=I("div"),n=I("div"),o=I("div"),i=I("label"),i.textContent="Number of Cards:",u=F(),s=I("select"),r=I("option"),r.textContent="3",l=I("option"),l.textContent="4",a=I("option"),a.textContent="5",m=F(),y=I("label"),y.textContent="Variant:",k=F(),b=I("select"),p=I("option"),p.textContent="No variant",S=I("option"),S.textContent="Rainbows",h=I("option"),h.textContent="Blacks",O=I("option"),O.textContent="Rainbows and Blacks",C=F(),v=I("button"),v.textContent="Save",g=F(),_=I("button"),_.textContent="Cancel",M(i,"for","numberOfCards"),r.__value="3",ie(r,r.__value),l.__value="4",ie(l,l.__value),a.__value="5",ie(a,a.__value),M(s,"id","numberOfCards"),e[1].numberOfCards===void 0&&_e(()=>e[5].call(s)),M(y,"for","Variant"),p.__value="no-variant",ie(p,p.__value),S.__value="rainbows",ie(S,S.__value),h.__value="blacks",ie(h,h.__value),O.__value="rainbows-and-blacks",ie(O,O.__value),M(b,"id","Variant"),e[1].variant===void 0&&_e(()=>e[6].call(b)),M(o,"class","config-form svelte-16v23fx"),M(n,"class","config-modal svelte-16v23fx"),M(t,"class","modal-overlay svelte-16v23fx")},m(N,j){D(N,t,j),d(t,n),d(n,o),d(o,i),d(o,u),d(o,s),d(s,r),d(s,l),d(s,a),Ce(s,e[1].numberOfCards,!0),d(o,m),d(o,y),d(o,k),d(o,b),d(b,p),d(b,S),d(b,h),d(b,O),Ce(b,e[1].variant,!0),d(n,C),d(n,v),d(n,g),d(n,_),R||(E=[B(s,"change",e[5]),B(b,"change",e[6]),B(v,"click",e[3]),B(_,"click",e[2])],R=!0)},p(N,j){j&2&&Ce(s,N[1].numberOfCards),j&2&&Ce(b,N[1].variant)},d(N){N&&L(t),R=!1,W(E)}}}function gt(e){let t,n=e[0]&&Re(e);return{c(){n&&n.c(),t=Ie()},m(o,i){n&&n.m(o,i),D(o,t,i)},p(o,[i]){o[0]?n?n.p(o,i):(n=Re(o),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:q,o:q,d(o){o&&L(t),n&&n.d(o)}}}function Ct(e,t,n){let o;T(e,de,m=>n(4,o=m));let{isOpen:i=!1}=t,u={numberOfCards:4,variant:"no-variant"};function s(){n(0,i=!1)}function r(){de.set(u),s()}function l(){u.numberOfCards=Fe(this),n(1,u),n(0,i),n(4,o)}function a(){u.variant=Fe(this),n(1,u),n(0,i),n(4,o)}return e.$$set=m=>{"isOpen"in m&&n(0,i=m.isOpen)},e.$$.update=()=>{e.$$.dirty&17&&i&&n(1,u=o),e.$$.dirty&1&&console.log(i)},[i,u,s,r,o,l,a]}class vt extends oe{constructor(t){super(),ne(this,t,Ct,gt,x,{isOpen:0})}}function je(e,t,n){const o=e.slice();return o[23]=t[n],o}function Be(e,t,n){const o=e.slice();return o[26]=t[n],o}function Le(e){let t,n,o,i,u,s,r,l,a,m,y,k,b,p,S=fe(e[2]),h=[];for(let v=0;v<S.length;v+=1)h[v]=qe(Be(e,S,v));let O=fe(e[3]),C=[];for(let v=0;v<O.length;v+=1)C[v]=De(je(e,O,v));return{c(){t=I("div"),n=I("div"),o=I("div");for(let v=0;v<h.length;v+=1)h[v].c();i=F(),u=I("div");for(let v=0;v<C.length;v+=1)C[v].c();s=F(),r=I("div"),l=I("button"),a=K("Save"),y=F(),k=I("button"),k.textContent="Cancel",M(o,"class","numbers-hints svelte-17jwble"),M(u,"class","colours-hints svelte-17jwble"),l.disabled=m=!e[1],M(r,"class","actions"),M(n,"class","hint-modal svelte-17jwble"),M(t,"class","modal-overlay svelte-17jwble")},m(v,g){D(v,t,g),d(t,n),d(n,o);for(let _=0;_<h.length;_+=1)h[_]&&h[_].m(o,null);d(n,i),d(n,u);for(let _=0;_<C.length;_+=1)C[_]&&C[_].m(u,null);d(n,s),d(n,r),d(r,l),d(l,a),d(r,y),d(r,k),b||(p=[B(l,"click",e[4]),B(k,"click",e[6])],b=!0)},p(v,g){if(g&38){S=fe(v[2]);let _;for(_=0;_<S.length;_+=1){const R=Be(v,S,_);h[_]?h[_].p(R,g):(h[_]=qe(R),h[_].c(),h[_].m(o,null))}for(;_<h.length;_+=1)h[_].d(1);h.length=S.length}if(g&42){O=fe(v[3]);let _;for(_=0;_<O.length;_+=1){const R=je(v,O,_);C[_]?C[_].p(R,g):(C[_]=De(R),C[_].c(),C[_].m(u,null))}for(;_<C.length;_+=1)C[_].d(1);C.length=O.length}g&2&&m!==(m=!v[1])&&(l.disabled=m)},d(v){v&&L(t),Ve(h,v),Ve(C,v),b=!1,W(p)}}}function qe(e){let t,n=e[26]+"",o,i,u;function s(){return e[8](e[26])}return{c(){t=I("button"),o=K(n),M(t,"class","btn"),t.hidden=!e[5](e[26])},m(r,l){D(r,t,l),d(t,o),i||(u=B(t,"click",s),i=!0)},p(r,l){e=r},d(r){r&&L(t),i=!1,u()}}}function De(e){let t,n=e[23]+"",o,i,u;function s(){return e[9](e[23])}return{c(){t=I("button"),o=K(n),M(t,"class","btn"),t.hidden=!e[5](e[23])},m(r,l){D(r,t,l),d(t,o),i||(u=B(t,"click",s),i=!0)},p(r,l){e=r},d(r){r&&L(t),i=!1,u()}}}function It(e){let t,n=e[0]&&Le(e);return{c(){n&&n.c(),t=Ie()},m(o,i){n&&n.m(o,i),D(o,t,i)},p(o,[i]){o[0]?n?n.p(o,i):(n=Le(o),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:q,o:q,d(o){o&&L(t),n&&n.d(o)}}}function yt(e,t,n){let o,i,u,s;T(e,Q,f=>n(11,i=f)),T(e,Y,f=>n(12,u=f)),T(e,de,f=>n(7,s=f));let{isOpen:r=!1}=t;const l=[1,2,3,4,5],a=["red","yellow","blue","white","green"];let m=null;function y(){m&&(console.log("a hint!"),typeof m=="string"?k(m):typeof m=="number"&&O(m),Y.update(f=>(f=new Set,f)),E())}function k(f){switch(o){case"no-variant":b(f);break;case"rainbows":p(f);break;case"blacks":S(f);break;case"rainbows-and-blacks":h(f);break}}function b(f){const P=Array.from(u),z=a.findIndex(V=>V===f);Q.updateCards(V=>V.map(c=>{const G=c.colourInformation.map((J,A)=>P.includes(c.id)?(c.isHinted=!0,A===z):A!==z?J:!1);return{...c,colourInformation:G}}))}function p(f){const P=Array.from(u),z=a.findIndex(V=>V===f);Q.updateCards(V=>{let w=V;return w.forEach((c,G)=>{P.includes(c.id)?(c.isHinted=!0,c.colourInformation[5]===null&&c.colourInformation[z]===null?c.colourInformation.forEach((J,A)=>{A!=z&&A!=5&&(c.colourInformation[A]=!1)}):c.colourInformation[5]===null&&c.colourInformation[z]===!1?c.colourInformation.forEach((J,A)=>{A==5?c.colourInformation[A]=!0:c.colourInformation[A]=!1}):c.colourInformation[5]===!1&&c.colourInformation[z]===null&&c.colourInformation.forEach((J,A)=>{A==z?c.colourInformation[A]=!0:c.colourInformation[A]=!1})):c.colourInformation[5]!==!0&&(c.colourInformation[z]=!1,c.colourInformation[5]=!1)}),w})}function S(f){const P=Array.from(u),z=a.findIndex(V=>V===f);Q.updateCards(V=>V.map(c=>{const G=c.colourInformation.map((J,A)=>P.includes(c.id)?(c.isHinted=!0,A===z):A!==z?J:!1);return{...c,colourInformation:G}}))}function h(f){const P=Array.from(u),z=a.findIndex(V=>V===f);Q.updateCards(V=>{let w=V;return w.forEach((c,G)=>{P.includes(c.id)?(c.isHinted=!0,c.colourInformation[5]===null&&c.colourInformation[z]===null?c.colourInformation.forEach((J,A)=>{A!=z&&A!=5&&(c.colourInformation[A]=!1)}):c.colourInformation[5]===null&&c.colourInformation[z]===!1?c.colourInformation.forEach((J,A)=>{A==5?c.colourInformation[A]=!0:c.colourInformation[A]=!1}):c.colourInformation[5]===!1&&c.colourInformation[z]===null&&c.colourInformation.forEach((J,A)=>{A==z?c.colourInformation[A]=!0:c.colourInformation[A]=!1})):c.colourInformation[5]!==!0&&(c.colourInformation[z]=!1,c.colourInformation[5]=!1)}),w})}function O(f){const P=Array.from(u);Q.updateCards(z=>z.map(w=>{const c=w.numberInformation.map((G,J)=>P.includes(w.id)?(w.isHinted=!0,J===f-1):J!==f-1?G:!1);return{...w,numberInformation:c}}))}function C(f){let P=!1;switch(o){case"no-variant":P=v(f);break;case"rainbows":P=g(f);break;case"blacks":P=_(f);break;case"rainbows-and-blacks":P=R(f);break}return P}function v(f){return Array.from(u).every(V=>{const w=i.find(c=>c.id===V);if(!w)return!1;if(typeof f=="string"){const c=a.indexOf(f);return w.colourInformation[c]===null||w.colourInformation[c]===!0}else if(typeof f=="number")return w.numberInformation[f-1]===null||w.numberInformation[f-1]===!0})}function g(f){return Array.from(u).every(V=>{const w=i.find(c=>c.id===V);if(!w)return!1;if(typeof f=="string"){if(w.colourInformation[5]===null||w.colourInformation[5]===!0)return!0;{const G=a.indexOf(f);return w.colourInformation[G]===null||w.colourInformation[G]===!0}}else if(typeof f=="number")return w.numberInformation[f-1]===null||w.numberInformation[f-1]===!0})}function _(f){return Array.from(u).every(V=>{const w=i.find(c=>c.id===V);if(!w)return!1;if(typeof f=="string"){const c=a.indexOf(f);return w.colourInformation[c]===null||w.colourInformation[c]===!0}else if(typeof f=="number")return w.numberInformation[f-1]===null||w.numberInformation[f-1]===!0})}function R(f){return Array.from(u).every(V=>{const w=i.find(c=>c.id===V);if(!w)return!1;if(typeof f=="string"){if(w.colourInformation[5]===null||w.colourInformation[5]===!0)return!0;{const G=a.indexOf(f);return w.colourInformation[G]===null||w.colourInformation[G]===!0}}else if(typeof f=="number")return w.numberInformation[f-1]===null||w.numberInformation[f-1]===!0})}function E(){n(0,r=!1),n(1,m=null)}const N=f=>n(1,m=f),j=f=>n(1,m=f);return e.$$set=f=>{"isOpen"in f&&n(0,r=f.isOpen)},e.$$.update=()=>{e.$$.dirty&128&&(o=s.variant)},[r,m,l,a,y,C,E,s,N,j]}class kt extends oe{constructor(t){super(),ne(this,t,yt,It,x,{isOpen:0})}}function Ge(e){let t,n,o,i,u,s,r,l,a,m,y,k,b,p,S,h,O;return{c(){t=I("div"),n=I("div"),o=I("div"),i=I("button"),i.textContent="Critical",u=F(),s=I("button"),s.textContent="Chop moved",r=F(),l=I("button"),l.textContent="Finessed",a=F(),m=I("div"),y=I("button"),k=K("Save"),p=F(),S=I("button"),S.textContent="Cancel",M(i,"class","btn"),M(s,"class","btn"),M(l,"class","btn"),M(o,"class","flags"),y.disabled=b=!e[1],M(m,"class","actions"),M(n,"class","mark-modal svelte-1fkqm3b"),M(t,"class","modal-overlay svelte-1fkqm3b")},m(C,v){D(C,t,v),d(t,n),d(n,o),d(o,i),d(o,u),d(o,s),d(o,r),d(o,l),d(n,a),d(n,m),d(m,y),d(y,k),d(m,p),d(m,S),h||(O=[B(i,"click",e[5]),B(s,"click",e[6]),B(l,"click",e[7]),B(y,"click",e[3]),B(S,"click",e[2])],h=!0)},p(C,v){v&2&&b!==(b=!C[1])&&(y.disabled=b)},d(C){C&&L(t),h=!1,W(O)}}}function wt(e){let t,n=e[0]&&Ge(e);return{c(){n&&n.c(),t=Ie()},m(o,i){n&&n.m(o,i),D(o,t,i)},p(o,[i]){o[0]?n?n.p(o,i):(n=Ge(o),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:q,o:q,d(o){o&&L(t),n&&n.d(o)}}}function Ot(e,t,n){let o,i,u;T(e,Y,b=>n(9,i=b)),T(e,Q,b=>n(4,u=b));let{isOpen:s=!1}=t,r=null;function l(){n(1,r=null),n(0,s=!1)}function a(){const b=Array.from(i);o.map(p=>{if(b.includes(p.id))switch(r){case"critical":p.isCritical=!p.isCritical;break;case"chop-move":p.isChopMoved=!p.isChopMoved;break;case"finesse":p.isFinessed=!p.isFinessed;break}return p}),Q.updateCards(p=>p),Y.update(p=>(p=new Set,p)),l()}const m=()=>n(1,r="critical"),y=()=>n(1,r="chop-move"),k=()=>n(1,r="finesse");return e.$$set=b=>{"isOpen"in b&&n(0,s=b.isOpen)},e.$$.update=()=>{e.$$.dirty&16&&(o=u)},[s,r,l,a,u,m,y,k]}class St extends oe{constructor(t){super(),ne(this,t,Ot,wt,x,{isOpen:0})}}function Ht(e){let t,n,o,i,u,s,r,l,a,m,y,k,b,p,S,h,O,C,v,g,_,R,E,N,j,f,P,z;i=new ht({});function V(H){e[10](H)}let w={};e[0]!==void 0&&(w.isOpen=e[0]),C=new vt({props:w}),be.push(()=>Oe(C,"isOpen",V));function c(H){e[11](H)}let G={};e[1]!==void 0&&(G.isOpen=e[1]),_=new kt({props:G}),be.push(()=>Oe(_,"isOpen",c));function J(H){e[12](H)}let A={};return e[2]!==void 0&&(A.isOpen=e[2]),N=new St({props:A}),be.push(()=>Oe(N,"isOpen",J)),{c(){t=I("div"),n=I("button"),n.textContent="Configure Game",o=F(),le(i.$$.fragment),u=F(),s=I("button"),r=K("Record Hint"),a=F(),m=I("button"),y=K("Mark cards"),b=F(),p=I("button"),S=K("Undo"),O=F(),le(C.$$.fragment),g=F(),le(_.$$.fragment),E=F(),le(N.$$.fragment),M(n,"class","configure svelte-9e6wy5"),M(s,"class","hint-panel svelte-9e6wy5"),s.disabled=l=e[4].size<1,M(m,"class","mark-panel"),m.disabled=k=e[4].size<1,M(p,"class","undo"),p.disabled=h=e[3]<1,M(t,"class","game-controls svelte-9e6wy5")},m(H,U){D(H,t,U),d(t,n),d(t,o),ee(i,t,null),d(t,u),d(t,s),d(s,r),d(t,a),d(t,m),d(m,y),d(t,b),d(t,p),d(p,S),D(H,O,U),ee(C,H,U),D(H,g,U),ee(_,H,U),D(H,E,U),ee(N,H,U),f=!0,P||(z=[B(n,"click",e[5]),B(s,"click",e[6]),B(m,"click",e[7]),B(p,"click",e[8])],P=!0)},p(H,[U]){(!f||U&16&&l!==(l=H[4].size<1))&&(s.disabled=l),(!f||U&16&&k!==(k=H[4].size<1))&&(m.disabled=k),(!f||U&8&&h!==(h=H[3]<1))&&(p.disabled=h);const Ae={};!v&&U&1&&(v=!0,Ae.isOpen=H[0],ke(()=>v=!1)),C.$set(Ae);const Ee={};!R&&U&2&&(R=!0,Ee.isOpen=H[1],ke(()=>R=!1)),_.$set(Ee);const Ne={};!j&&U&4&&(j=!0,Ne.isOpen=H[2],ke(()=>j=!1)),N.$set(Ne)},i(H){f||(X(i.$$.fragment,H),X(C.$$.fragment,H),X(_.$$.fragment,H),X(N.$$.fragment,H),f=!0)},o(H){Z(i.$$.fragment,H),Z(C.$$.fragment,H),Z(_.$$.fragment,H),Z(N.$$.fragment,H),f=!1},d(H){H&&(L(t),L(O),L(g),L(E)),te(i),te(C,H),te(_,H),te(N,H),P=!1,W(z)}}}function Mt(e,t,n){let o,i,u;T(e,me,h=>n(9,i=h)),T(e,Y,h=>n(4,u=h));let s=!1;function r(){n(0,s=!0)}let l=!1;function a(){n(1,l=!0)}let m=!1;function y(){n(2,m=!0)}function k(){Q.rollback()}function b(h){s=h,n(0,s)}function p(h){l=h,n(1,l)}function S(h){m=h,n(2,m)}return e.$$.update=()=>{e.$$.dirty&512&&n(3,o=i),e.$$.dirty&512&&console.log(i)},[s,l,m,o,u,r,a,y,k,i,b,p,S]}class At extends oe{constructor(t){super(),ne(this,t,Mt,Ht,x,{})}}function Et(e){let t,n,o,i=e[0]+1+"",u,s,r,l=Je(e[1])+"",a,m,y,k=e[6](e[2])+"",b,p,S,h;return{c(){t=I("div"),n=I("p"),o=K("Card "),u=K(i),s=F(),r=I("p"),a=K(l),m=F(),y=I("p"),b=K(k),M(t,"class",p="card no-"+e[5]+" svelte-yy599i"),M(t,"tabindex","0"),M(t,"role","button"),Pe(t,"border-color",e[4])},m(O,C){D(O,t,C),d(t,n),d(n,o),d(n,u),d(t,s),d(t,r),d(r,a),d(t,m),d(t,y),d(y,b),S||(h=[B(t,"click",e[13]),B(t,"keydown",e[14])],S=!0)},p(O,[C]){C&1&&i!==(i=O[0]+1+"")&&ye(u,i),C&2&&l!==(l=Je(O[1])+"")&&ye(a,l),C&4&&k!==(k=O[6](O[2])+"")&&ye(b,k),C&32&&p!==(p="card no-"+O[5]+" svelte-yy599i")&&M(t,"class",p),C&16&&Pe(t,"border-color",O[4])},i:q,o:q,d(O){O&&L(t),S=!1,W(h)}}}function Je(e){return e.map((n,o)=>n===!0||n===null?(o+1).toString():"").join(" ")}function Nt(e,t,n){let o,i,u,s;T(e,de,g=>n(12,s=g));let{id:r}=t,{numberInformation:l}=t,{colourInformation:a}=t,{selected:m=!1}=t,{isHinted:y}=t,{isFinessed:k}=t,{isChopMoved:b}=t,{isCritical:p}=t,{onSelect:S}=t;function h(g){return g.map((R,E)=>R===!0||R===null?O(E):"").join(" ")}function O(g){return g<5?["r","y","b","w","g"][g]:o=="blacks"&&g==5?"bl":o=="rainbows"&&g==5||o=="rainbows-and-blacks"&&g==5?"m":o=="rainbows-and-blacks"&&g==6?"bl":(console.log("Index {index} out of range for card {self.id} and variant {variant}"),"err")}const C=()=>S(r),v=g=>(g.key==="Enter"||g.key===" ")&&S(r);return e.$$set=g=>{"id"in g&&n(0,r=g.id),"numberInformation"in g&&n(1,l=g.numberInformation),"colourInformation"in g&&n(2,a=g.colourInformation),"selected"in g&&n(7,m=g.selected),"isHinted"in g&&n(8,y=g.isHinted),"isFinessed"in g&&n(9,k=g.isFinessed),"isChopMoved"in g&&n(10,b=g.isChopMoved),"isCritical"in g&&n(11,p=g.isCritical),"onSelect"in g&&n(3,S=g.onSelect)},e.$$.update=()=>{e.$$.dirty&4096&&(o=s.variant),e.$$.dirty&4096&&n(5,i=s.numberOfCards),e.$$.dirty&3968&&n(4,u=m?"blue":p?"red":y?"orange":k?"aqua":b?"white":"gray")},[r,l,a,S,u,i,h,m,y,k,b,p,s,C,v]}class zt extends oe{constructor(t){super(),ne(this,t,Nt,Et,x,{id:0,numberInformation:1,colourInformation:2,selected:7,isHinted:8,isFinessed:9,isChopMoved:10,isCritical:11,onSelect:3})}}function Ue(e,t,n){const o=e.slice();return o[3]=t[n],o}function Ke(e,t){let n,o,i;return o=new zt({props:{id:t[3].id,numberInformation:t[3].numberInformation,colourInformation:t[3].colourInformation,selected:t[1].has(t[3].id),isHinted:t[3].isHinted,isChopMoved:t[3].isChopMoved,isFinessed:t[3].isFinessed,isCritical:t[3].isCritical,onSelect:t[2]}}),{key:e,first:null,c(){n=Ie(),le(o.$$.fragment),this.first=n},m(u,s){D(u,n,s),ee(o,u,s),i=!0},p(u,s){t=u;const r={};s&1&&(r.id=t[3].id),s&1&&(r.numberInformation=t[3].numberInformation),s&1&&(r.colourInformation=t[3].colourInformation),s&3&&(r.selected=t[1].has(t[3].id)),s&1&&(r.isHinted=t[3].isHinted),s&1&&(r.isChopMoved=t[3].isChopMoved),s&1&&(r.isFinessed=t[3].isFinessed),s&1&&(r.isCritical=t[3].isCritical),o.$set(r)},i(u){i||(X(o.$$.fragment,u),i=!0)},o(u){Z(o.$$.fragment,u),i=!1},d(u){u&&L(n),te(o,u)}}}function Vt(e){let t,n=[],o=new Map,i,u=fe(e[0]);const s=r=>r[3].id;for(let r=0;r<u.length;r+=1){let l=Ue(e,u,r),a=s(l);o.set(a,n[r]=Ke(a,l))}return{c(){t=I("div");for(let r=0;r<n.length;r+=1)n[r].c();M(t,"class","hand svelte-insnbi")},m(r,l){D(r,t,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(t,null);i=!0},p(r,[l]){l&7&&(u=fe(r[0]),lt(),n=at(n,l,s,1,r,u,o,t,ut,Ke,null,Ue),st())},i(r){if(!i){for(let l=0;l<u.length;l+=1)X(n[l]);i=!0}},o(r){for(let l=0;l<n.length;l+=1)Z(n[l]);i=!1},d(r){r&&L(t);for(let l=0;l<n.length;l+=1)n[l].d()}}}function Pt(e,t,n){let o,i;T(e,Q,s=>n(0,o=s)),T(e,Y,s=>n(1,i=s));function u(s){i.has(s)?Y.update(r=>{const l=new Set(r);return l.delete(s),l}):Y.update(r=>{const l=new Set(r);return l.add(s),l})}return e.$$.update=()=>{e.$$.dirty&1&&console.log(o)},[o,i,u]}class Ft extends oe{constructor(t){super(),ne(this,t,Pt,Vt,x,{})}}function Rt(e){let t,n,o,i,u,s,r;return n=new At({}),i=new Ft({}),{c(){t=I("main"),le(n.$$.fragment),o=F(),le(i.$$.fragment),u=F(),s=I("a"),s.textContent="Check out my code!",M(s,"href","https://github.com/jparkhouse/hanabi-tracker/"),M(s,"target","_blank")},m(l,a){D(l,t,a),ee(n,t,null),d(t,o),ee(i,t,null),d(t,u),d(t,s),r=!0},p:q,i(l){r||(X(n.$$.fragment,l),X(i.$$.fragment,l),r=!0)},o(l){Z(n.$$.fragment,l),Z(i.$$.fragment,l),r=!1},d(l){l&&L(t),te(n),te(i)}}}class jt extends oe{constructor(t){super(),ne(this,t,null,Rt,x,{})}}new jt({target:document.getElementById("app")});
