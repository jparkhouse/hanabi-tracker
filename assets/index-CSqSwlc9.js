var et=Object.defineProperty;var tt=(e,t,n)=>t in e?et(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ke=(e,t,n)=>(tt(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function D(){}function Qe(e){return e()}function Ve(){return Object.create(null)}function Q(e){e.forEach(Qe)}function Xe(e){return typeof e=="function"}function x(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function nt(e){return Object.keys(e).length===0}function ot(e,...t){if(e==null){for(const o of t)o(void 0);return D}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function U(e,t,n){e.$$.on_destroy.push(ot(t,n))}function c(e,t){e.appendChild(t)}function G(e,t,n){e.insertBefore(t,n||null)}function W(e){e.parentNode&&e.parentNode.removeChild(e)}function Ee(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function k(e){return document.createElement(e)}function T(e){return document.createTextNode(e)}function V(){return T(" ")}function Ie(){return T("")}function B(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function H(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function rt(e){return Array.from(e.childNodes)}function ve(e,t){t=""+t,e.data!==t&&(e.data=t)}function re(e,t){e.value=t??""}function Pe(e,t,n,o){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function Ce(e,t,n){for(let o=0;o<e.options.length;o+=1){const r=e.options[o];if(r.__value===t){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function qe(e){const t=e.querySelector(":checked");return t&&t.__value}let Ae;function pe(e){Ae=e}const ae=[],be=[];let ce=[];const He=[],lt=Promise.resolve();let Me=!1;function it(){Me||(Me=!0,lt.then(Ye))}function _e(e){ce.push(e)}function we(e){He.push(e)}const Oe=new Set;let se=0;function Ye(){if(se!==0)return;const e=Ae;do{try{for(;se<ae.length;){const t=ae[se];se++,pe(t),st(t.$$)}}catch(t){throw ae.length=0,se=0,t}for(pe(null),ae.length=0,se=0;be.length;)be.pop()();for(let t=0;t<ce.length;t+=1){const n=ce[t];Oe.has(n)||(Oe.add(n),n())}ce.length=0}while(ae.length);for(;He.length;)He.pop()();Me=!1,Oe.clear(),pe(e)}function st(e){if(e.fragment!==null){e.update(),Q(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(_e)}}function ut(e){const t=[],n=[];ce.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),ce=t}const ye=new Set;let le;function at(){le={r:0,c:[],p:le}}function ft(){le.r||Q(le.c),le=le.p}function X(e,t){e&&e.i&&(ye.delete(e),e.i(t))}function Z(e,t,n,o){if(e&&e.o){if(ye.has(e))return;ye.add(e),le.c.push(()=>{ye.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function fe(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function ct(e,t){Z(e,1,1,()=>{t.delete(e.key)})}function dt(e,t,n,o,r,s,u,l,i,f,b,v){let w=e.length,p=s.length,_=w;const O={};for(;_--;)O[e[_].key]=_;const I=[],C=new Map,y=new Map,h=[];for(_=p;_--;){const L=v(r,s,_),N=n(L);let R=u.get(N);R?o&&h.push(()=>R.p(L,t)):(R=f(N,L),R.c()),C.set(N,I[_]=R),N in O&&y.set(N,Math.abs(_-O[N]))}const M=new Set,a=new Set;function P(L){X(L,1),L.m(l,b),u.set(L.key,L),b=L.first,p--}for(;w&&p;){const L=I[p-1],N=e[w-1],R=L.key,d=N.key;L===N?(b=L.first,w--,p--):C.has(d)?!u.has(R)||M.has(R)?P(L):a.has(d)?w--:y.get(R)>y.get(d)?(a.add(R),P(L)):(M.add(d),w--):(i(N,u),w--)}for(;w--;){const L=e[w];C.has(L.key)||i(L,u)}for(;p;)P(I[p-1]);return Q(h),I}function Se(e,t,n){const o=e.$$.props[t];o!==void 0&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function ie(e){e&&e.c()}function ee(e,t,n){const{fragment:o,after_update:r}=e.$$;o&&o.m(t,n),_e(()=>{const s=e.$$.on_mount.map(Qe).filter(Xe);e.$$.on_destroy?e.$$.on_destroy.push(...s):Q(s),e.$$.on_mount=[]}),r.forEach(_e)}function te(e,t){const n=e.$$;n.fragment!==null&&(ut(n.after_update),Q(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function mt(e,t){e.$$.dirty[0]===-1&&(ae.push(e),it(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ne(e,t,n,o,r,s,u=null,l=[-1]){const i=Ae;pe(e);const f=e.$$={fragment:null,ctx:[],props:s,update:D,not_equal:r,bound:Ve(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(i?i.$$.context:[])),callbacks:Ve(),dirty:l,skip_bound:!1,root:t.target||i.$$.root};u&&u(f.root);let b=!1;if(f.ctx=n?n(e,t.props||{},(v,w,...p)=>{const _=p.length?p[0]:w;return f.ctx&&r(f.ctx[v],f.ctx[v]=_)&&(!f.skip_bound&&f.bound[v]&&f.bound[v](_),b&&mt(e,v)),w}):[],f.update(),b=!0,Q(f.before_update),f.fragment=o?o(f.ctx):!1,t.target){if(t.hydrate){const v=rt(t.target);f.fragment&&f.fragment.l(v),v.forEach(W)}else f.fragment&&f.fragment.c();t.intro&&X(e.$$.fragment),ee(e,t.target,t.anchor),Ye()}pe(i)}class oe{constructor(){ke(this,"$$");ke(this,"$$set")}$destroy(){te(this,1),this.$destroy=D}$on(t,n){if(!Xe(n))return D;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const r=o.indexOf(n);r!==-1&&o.splice(r,1)}}$set(t){this.$$set&&!nt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const pt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(pt);const ue=[];function he(e,t=D){let n;const o=new Set;function r(l){if(x(e,l)&&(e=l,n)){const i=!ue.length;for(const f of o)f[1](),ue.push(f,e);if(i){for(let f=0;f<ue.length;f+=2)ue[f][0](ue[f+1]);ue.length=0}}}function s(l){r(l(e))}function u(l,i=D){const f=[l,i];return o.add(f),o.size===1&&(n=t(r,s)||D),l(e),()=>{o.delete(f),o.size===0&&n&&(n(),n=null)}}return{set:r,update:s,subscribe:u}}const Y=he(new Set),de=he({numberOfCards:4,variant:"no-variant"}),Ze=he(0);function xe(){let e=0;return Ze.update(t=>(e=t,t+1)),e}class bt{constructor(t=1/0){ke(this,"storage",[]);this.capacity=t}push(t){if(this.storage.length>=this.capacity){let n=this.storage.length-this.capacity+1;this.storage.splice(0,n)}this.storage.push(t)}pop(){if(this.size()>0)return this.storage.pop();throw console.error("empty stack popped")}peek(){return this.storage[this.storage.length-1]}size(){return this.storage.length}clear(){this.storage=[]}}function _t(e){const t=JSON.stringify(e);return JSON.parse(t)}const $=new bt(5),me=he(0);function ht(){const{subscribe:e,set:t,update:n}=he([]),o=()=>{n(l=>($.push(_t(l)),l)),me.set($.size())},r=()=>{if($.size()>0){const l=$.pop();me.set($.size()),l&&t(l)}else console.warn("No previous state available for rollback");me.set($.size())},s=l=>{$.clear(),me.set($.size());const i=Array.from({length:l.numberOfCards},(f,b)=>({id:xe(),numberInformation:Array(5).fill(null),colourInformation:Array(l.variant==="no-variant"?5:l.variant==="rainbows"||l.variant==="blacks"?6:7).fill(null),isHinted:!1,isChopMoved:!1,isFinessed:!1,isCritical:!1}));t(i)},u=de.subscribe(l=>{Ze.set(0),Y.update(i=>(i=new Set,i)),s(l)});return{subscribe:e,updateCards:l=>{n(i=>(o(),l(i)))},rollback:r,saveState:o,cleanup:()=>u()}}const K=ht();function gt(e){let t,n,o,r,s;return{c(){t=k("button"),n=T("Play/Discard"),t.disabled=o=e[0].size!==1},m(u,l){G(u,t,l),c(t,n),r||(s=B(t,"click",e[1]),r=!0)},p(u,[l]){l&1&&o!==(o=u[0].size!==1)&&(t.disabled=o)},i:D,o:D,d(u){u&&W(t),r=!1,s()}}}function kt(e,t,n){let o,r,s;U(e,Y,i=>n(0,r=i)),U(e,de,i=>n(2,s=i));function u(){if(r.size===1){const i=r.values().next().value;K.updateCards(f=>{const b=f.filter(v=>v.id!==i);return b.push(l(xe())),b}),r.clear()}}function l(i){return{id:i,numberInformation:Array(5).fill(null),colourInformation:Array(o==="no-variant"?5:o==="rainbows"||o==="blacks"?6:7).fill(null),isHinted:!1,isChopMoved:!1,isFinessed:!1,isCritical:!1}}return e.$$.update=()=>{e.$$.dirty&4&&(o=s.variant)},[r,u,s]}class Ct extends oe{constructor(t){super(),ne(this,t,kt,gt,x,{})}}function Re(e){let t,n,o,r,s,u,l,i,f,b,v,w,p,_,O,I,C,y,h,M,a,P,L;return{c(){t=k("div"),n=k("div"),o=k("div"),r=k("label"),r.textContent="Number of Cards:",s=V(),u=k("select"),l=k("option"),l.textContent="3",i=k("option"),i.textContent="4",f=k("option"),f.textContent="5",b=V(),v=k("label"),v.textContent="Variant:",w=V(),p=k("select"),_=k("option"),_.textContent="No variant",O=k("option"),O.textContent="Rainbows",I=k("option"),I.textContent="Blacks",C=k("option"),C.textContent="Rainbows and Blacks",y=V(),h=k("button"),h.textContent="Save",M=V(),a=k("button"),a.textContent="Cancel",H(r,"for","numberOfCards"),l.__value="3",re(l,l.__value),i.__value="4",re(i,i.__value),f.__value="5",re(f,f.__value),H(u,"id","numberOfCards"),e[1].numberOfCards===void 0&&_e(()=>e[5].call(u)),H(v,"for","Variant"),_.__value="no-variant",re(_,_.__value),O.__value="rainbows",re(O,O.__value),I.__value="blacks",re(I,I.__value),C.__value="rainbows-and-blacks",re(C,C.__value),H(p,"id","Variant"),e[1].variant===void 0&&_e(()=>e[6].call(p)),H(o,"class","config-form svelte-16v23fx"),H(n,"class","config-modal svelte-16v23fx"),H(t,"class","modal-overlay svelte-16v23fx")},m(N,R){G(N,t,R),c(t,n),c(n,o),c(o,r),c(o,s),c(o,u),c(u,l),c(u,i),c(u,f),Ce(u,e[1].numberOfCards,!0),c(o,b),c(o,v),c(o,w),c(o,p),c(p,_),c(p,O),c(p,I),c(p,C),Ce(p,e[1].variant,!0),c(n,y),c(n,h),c(n,M),c(n,a),P||(L=[B(u,"change",e[5]),B(p,"change",e[6]),B(h,"click",e[3]),B(a,"click",e[2])],P=!0)},p(N,R){R&2&&Ce(u,N[1].numberOfCards),R&2&&Ce(p,N[1].variant)},d(N){N&&W(t),P=!1,Q(L)}}}function vt(e){let t,n=e[0]&&Re(e);return{c(){n&&n.c(),t=Ie()},m(o,r){n&&n.m(o,r),G(o,t,r)},p(o,[r]){o[0]?n?n.p(o,r):(n=Re(o),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:D,o:D,d(o){o&&W(t),n&&n.d(o)}}}function yt(e,t,n){let o;U(e,de,b=>n(4,o=b));let{isOpen:r=!1}=t,s={numberOfCards:4,variant:"no-variant"};function u(){n(0,r=!1)}function l(){de.set(s),u()}function i(){s.numberOfCards=qe(this),n(1,s),n(0,r),n(4,o)}function f(){s.variant=qe(this),n(1,s),n(0,r),n(4,o)}return e.$$set=b=>{"isOpen"in b&&n(0,r=b.isOpen)},e.$$.update=()=>{e.$$.dirty&17&&r&&n(1,s=o),e.$$.dirty&1&&console.log(r)},[r,s,u,l,o,i,f]}class It extends oe{constructor(t){super(),ne(this,t,yt,vt,x,{isOpen:0})}}function je(e,t,n){const o=e.slice();return o[23]=t[n],o}function Be(e,t,n){const o=e.slice();return o[26]=t[n],o}function We(e){let t,n,o,r,s,u,l,i,f,b,v,w,p,_,O=fe(e[2]),I=[];for(let h=0;h<O.length;h+=1)I[h]=De(Be(e,O,h));let C=fe(e[3]),y=[];for(let h=0;h<C.length;h+=1)y[h]=Ge(je(e,C,h));return{c(){t=k("div"),n=k("div"),o=k("div");for(let h=0;h<I.length;h+=1)I[h].c();r=V(),s=k("div");for(let h=0;h<y.length;h+=1)y[h].c();u=V(),l=k("div"),i=k("button"),f=T("Save"),v=V(),w=k("button"),w.textContent="Cancel",H(o,"class","numbers-hints svelte-17jwble"),H(s,"class","colours-hints svelte-17jwble"),i.disabled=b=!e[1],H(l,"class","actions"),H(n,"class","hint-modal svelte-17jwble"),H(t,"class","modal-overlay svelte-17jwble")},m(h,M){G(h,t,M),c(t,n),c(n,o);for(let a=0;a<I.length;a+=1)I[a]&&I[a].m(o,null);c(n,r),c(n,s);for(let a=0;a<y.length;a+=1)y[a]&&y[a].m(s,null);c(n,u),c(n,l),c(l,i),c(i,f),c(l,v),c(l,w),p||(_=[B(i,"click",e[4]),B(w,"click",e[6])],p=!0)},p(h,M){if(M&38){O=fe(h[2]);let a;for(a=0;a<O.length;a+=1){const P=Be(h,O,a);I[a]?I[a].p(P,M):(I[a]=De(P),I[a].c(),I[a].m(o,null))}for(;a<I.length;a+=1)I[a].d(1);I.length=O.length}if(M&42){C=fe(h[3]);let a;for(a=0;a<C.length;a+=1){const P=je(h,C,a);y[a]?y[a].p(P,M):(y[a]=Ge(P),y[a].c(),y[a].m(s,null))}for(;a<y.length;a+=1)y[a].d(1);y.length=C.length}M&2&&b!==(b=!h[1])&&(i.disabled=b)},d(h){h&&W(t),Ee(I,h),Ee(y,h),p=!1,Q(_)}}}function De(e){let t,n=e[26]+"",o,r,s;function u(){return e[8](e[26])}return{c(){t=k("button"),o=T(n),H(t,"class","btn"),t.hidden=!e[5](e[26])},m(l,i){G(l,t,i),c(t,o),r||(s=B(t,"click",u),r=!0)},p(l,i){e=l},d(l){l&&W(t),r=!1,s()}}}function Ge(e){let t,n=e[23]+"",o,r,s;function u(){return e[9](e[23])}return{c(){t=k("button"),o=T(n),H(t,"class","btn"),t.hidden=!e[5](e[23])},m(l,i){G(l,t,i),c(t,o),r||(s=B(t,"click",u),r=!0)},p(l,i){e=l},d(l){l&&W(t),r=!1,s()}}}function wt(e){let t,n=e[0]&&We(e);return{c(){n&&n.c(),t=Ie()},m(o,r){n&&n.m(o,r),G(o,t,r)},p(o,[r]){o[0]?n?n.p(o,r):(n=We(o),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:D,o:D,d(o){o&&W(t),n&&n.d(o)}}}function Ot(e,t,n){let o,r,s,u;U(e,K,d=>n(11,r=d)),U(e,Y,d=>n(12,s=d)),U(e,de,d=>n(7,u=d));let{isOpen:l=!1}=t;const i=[1,2,3,4,5],f=["red","yellow","blue","white","green"];let b=null;function v(){b&&(console.log("a hint!"),typeof b=="string"?w(b):typeof b=="number"&&C(b),Y.update(d=>(d=new Set,d)),L())}function w(d){switch(o){case"no-variant":p(d);break;case"rainbows":_(d);break;case"blacks":O(d);break;case"rainbows-and-blacks":I(d);break}}function p(d){const F=Array.from(s),z=f.findIndex(A=>A===d);K.updateCards(A=>A.map(m=>{const E=m.colourInformation.map((j,q)=>F.includes(m.id)?(m.isHinted=!0,q===z):q!==z?j:!1);return{...m,colourInformation:E}}))}function _(d){const F=Array.from(s),z=f.findIndex(A=>A===d);K.updateCards(A=>{let g=A;return g.forEach((m,E)=>{F.includes(m.id)?(m.isHinted=!0,m.colourInformation[5]===null&&m.colourInformation[z]===null?m.colourInformation.forEach((j,q)=>{q!=z&&q!=5&&(m.colourInformation[q]=!1)}):m.colourInformation[5]===null&&m.colourInformation[z]===!1?m.colourInformation.forEach((j,q)=>{q==5?m.colourInformation[q]=!0:m.colourInformation[q]=!1}):m.colourInformation[5]===!1&&m.colourInformation[z]===null&&m.colourInformation.forEach((j,q)=>{q==z?m.colourInformation[q]=!0:m.colourInformation[q]=!1})):m.colourInformation[5]!==!0&&(m.colourInformation[z]=!1,m.colourInformation[5]=!1)}),g})}function O(d){const F=Array.from(s),z=f.findIndex(A=>A===d);K.updateCards(A=>A.map(m=>{let E;return F.includes(m.id)?(m.isHinted=!0,E=m.colourInformation.map((j,q)=>q===z)):(E=m.colourInformation.map((q,ge)=>ge!==z?q:!1),E.slice(0,5).every(q=>q===!1)&&E[5]===null&&(E[5]=!0)),{...m,colourInformation:E}}))}function I(d){const F=Array.from(s),z=f.findIndex(A=>A===d);K.updateCards(A=>A.map(g=>{let m=[...g.colourInformation];return F.includes(g.id)?(g.isHinted=!0,g.colourInformation[5]===null&&g.colourInformation[z]===null?m=m.map((E,j)=>j===z||j===5?null:!1):g.colourInformation[5]===null&&g.colourInformation[z]===!1?m=m.map((E,j)=>j===5):g.colourInformation[5]===!1&&g.colourInformation[z]===null&&(m=m.map((E,j)=>j===z))):(m[z]=!1,m[5]=!1,m.slice(0,5).every(j=>j===!1)&&m[6]===null&&(m[6]=!0)),{...g,colourInformation:m}}))}function C(d){const F=Array.from(s);K.updateCards(z=>z.map(g=>{const m=g.numberInformation.map((E,j)=>F.includes(g.id)?(g.isHinted=!0,j===d-1):j!==d-1?E:!1);return{...g,numberInformation:m}}))}function y(d){let F=!1;switch(o){case"no-variant":F=h(d);break;case"rainbows":F=M(d);break;case"blacks":F=a(d);break;case"rainbows-and-blacks":F=P(d);break}return F}function h(d){return Array.from(s).every(A=>{const g=r.find(m=>m.id===A);if(!g)return!1;if(typeof d=="string"){const m=f.indexOf(d);return g.colourInformation[m]===null||g.colourInformation[m]===!0}else if(typeof d=="number")return g.numberInformation[d-1]===null||g.numberInformation[d-1]===!0})}function M(d){return Array.from(s).every(A=>{const g=r.find(m=>m.id===A);if(!g)return!1;if(typeof d=="string"){if(g.colourInformation[5]===null||g.colourInformation[5]===!0)return!0;{const E=f.indexOf(d);return g.colourInformation[E]===null||g.colourInformation[E]===!0}}else if(typeof d=="number")return g.numberInformation[d-1]===null||g.numberInformation[d-1]===!0})}function a(d){return Array.from(s).every(A=>{const g=r.find(m=>m.id===A);if(!g)return!1;if(typeof d=="string"){const m=f.indexOf(d);return g.colourInformation[m]===null||g.colourInformation[m]===!0}else if(typeof d=="number")return g.numberInformation[d-1]===null||g.numberInformation[d-1]===!0})}function P(d){return Array.from(s).every(A=>{const g=r.find(m=>m.id===A);if(!g)return!1;if(typeof d=="string"){if(g.colourInformation[5]===null||g.colourInformation[5]===!0)return!0;{const E=f.indexOf(d);return g.colourInformation[E]===null||g.colourInformation[E]===!0}}else if(typeof d=="number")return g.numberInformation[d-1]===null||g.numberInformation[d-1]===!0})}function L(){n(0,l=!1),n(1,b=null)}const N=d=>n(1,b=d),R=d=>n(1,b=d);return e.$$set=d=>{"isOpen"in d&&n(0,l=d.isOpen)},e.$$.update=()=>{e.$$.dirty&128&&(o=u.variant)},[l,b,i,f,v,y,L,u,N,R]}class St extends oe{constructor(t){super(),ne(this,t,Ot,wt,x,{isOpen:0})}}function Je(e){let t,n,o,r,s,u,l,i,f,b,v,w,p,_,O,I,C;return{c(){t=k("div"),n=k("div"),o=k("div"),r=k("button"),r.textContent="Critical",s=V(),u=k("button"),u.textContent="Chop moved",l=V(),i=k("button"),i.textContent="Finessed",f=V(),b=k("div"),v=k("button"),w=T("Save"),_=V(),O=k("button"),O.textContent="Cancel",H(r,"class","btn"),H(u,"class","btn"),H(i,"class","btn"),H(o,"class","flags"),v.disabled=p=!e[1],H(b,"class","actions"),H(n,"class","mark-modal svelte-1fkqm3b"),H(t,"class","modal-overlay svelte-1fkqm3b")},m(y,h){G(y,t,h),c(t,n),c(n,o),c(o,r),c(o,s),c(o,u),c(o,l),c(o,i),c(n,f),c(n,b),c(b,v),c(v,w),c(b,_),c(b,O),I||(C=[B(r,"click",e[5]),B(u,"click",e[6]),B(i,"click",e[7]),B(v,"click",e[3]),B(O,"click",e[2])],I=!0)},p(y,h){h&2&&p!==(p=!y[1])&&(v.disabled=p)},d(y){y&&W(t),I=!1,Q(C)}}}function Ht(e){let t,n=e[0]&&Je(e);return{c(){n&&n.c(),t=Ie()},m(o,r){n&&n.m(o,r),G(o,t,r)},p(o,[r]){o[0]?n?n.p(o,r):(n=Je(o),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:D,o:D,d(o){o&&W(t),n&&n.d(o)}}}function Mt(e,t,n){let o,r,s;U(e,Y,p=>n(9,r=p)),U(e,K,p=>n(4,s=p));let{isOpen:u=!1}=t,l=null;function i(){n(1,l=null),n(0,u=!1)}function f(){const p=Array.from(r);o.map(_=>{if(p.includes(_.id))switch(l){case"critical":_.isCritical=!_.isCritical;break;case"chop-move":_.isChopMoved=!_.isChopMoved;break;case"finesse":_.isFinessed=!_.isFinessed;break}return _}),K.updateCards(_=>_),Y.update(_=>(_=new Set,_)),i()}const b=()=>n(1,l="critical"),v=()=>n(1,l="chop-move"),w=()=>n(1,l="finesse");return e.$$set=p=>{"isOpen"in p&&n(0,u=p.isOpen)},e.$$.update=()=>{e.$$.dirty&16&&(o=s)},[u,l,i,f,s,b,v,w]}class At extends oe{constructor(t){super(),ne(this,t,Mt,Ht,x,{isOpen:0})}}function Lt(e){let t,n,o,r,s,u,l,i,f,b,v,w,p,_,O,I,C,y,h,M,a,P,L,N,R,d,F,z,A,g,m;l=new Ct({});function E(S){e[14](S)}let j={};e[1]!==void 0&&(j.isOpen=e[1]),a=new It({props:j}),be.push(()=>Se(a,"isOpen",E));function q(S){e[15](S)}let ge={};e[2]!==void 0&&(ge.isOpen=e[2]),N=new St({props:ge}),be.push(()=>Se(N,"isOpen",q));function $e(S){e[16](S)}let Le={};return e[3]!==void 0&&(Le.isOpen=e[3]),F=new At({props:Le}),be.push(()=>Se(F,"isOpen",$e)),{c(){t=k("div"),n=k("button"),n.textContent="Configure Game",o=V(),r=k("button"),s=T(e[0]),u=V(),ie(l.$$.fragment),i=V(),f=k("button"),b=T("Record Hint"),w=V(),p=k("button"),_=T("Mark cards"),I=V(),C=k("button"),y=T("Undo"),M=V(),ie(a.$$.fragment),L=V(),ie(N.$$.fragment),d=V(),ie(F.$$.fragment),H(n,"class","configure svelte-9e6wy5"),H(r,"class","wake-lock"),r.hidden=!e[6],H(f,"class","hint-panel svelte-9e6wy5"),f.disabled=v=e[5].size<1,H(p,"class","mark-panel"),p.disabled=O=e[5].size<1,H(C,"class","undo"),C.disabled=h=e[4]<1,H(t,"class","game-controls svelte-9e6wy5")},m(S,J){G(S,t,J),c(t,n),c(t,o),c(t,r),c(r,s),c(t,u),ee(l,t,null),c(t,i),c(t,f),c(f,b),c(t,w),c(t,p),c(p,_),c(t,I),c(t,C),c(C,y),G(S,M,J),ee(a,S,J),G(S,L,J),ee(N,S,J),G(S,d,J),ee(F,S,J),A=!0,g||(m=[B(n,"click",e[8]),B(r,"click",e[7]),B(f,"click",e[9]),B(p,"click",e[10]),B(C,"click",e[11])],g=!0)},p(S,[J]){(!A||J&1)&&ve(s,S[0]),(!A||J&32&&v!==(v=S[5].size<1))&&(f.disabled=v),(!A||J&32&&O!==(O=S[5].size<1))&&(p.disabled=O),(!A||J&16&&h!==(h=S[4]<1))&&(C.disabled=h);const Ne={};!P&&J&2&&(P=!0,Ne.isOpen=S[1],we(()=>P=!1)),a.$set(Ne);const ze={};!R&&J&4&&(R=!0,ze.isOpen=S[2],we(()=>R=!1)),N.$set(ze);const Fe={};!z&&J&8&&(z=!0,Fe.isOpen=S[3],we(()=>z=!1)),F.$set(Fe)},i(S){A||(X(l.$$.fragment,S),X(a.$$.fragment,S),X(N.$$.fragment,S),X(F.$$.fragment,S),A=!0)},o(S){Z(l.$$.fragment,S),Z(a.$$.fragment,S),Z(N.$$.fragment,S),Z(F.$$.fragment,S),A=!1},d(S){S&&(W(t),W(M),W(L),W(d)),te(l),te(a,S),te(N,S),te(F,S),g=!1,Q(m)}}}function Nt(e,t,n){let o,r,s;U(e,me,M=>n(13,r=M)),U(e,Y,M=>n(5,s=M));let u=null,l="wakeLock"in navigator,i="Wake Lock Off";async function f(){if(u)u.release(),n(12,u=null),n(0,i="Wake Lock Off");else try{n(12,u=await navigator.wakeLock.request("screen")),u.addEventListener("release",()=>{n(12,u=null),n(0,i="Wake Lock Off")}),n(0,i="Wake Lock On")}catch(M){console.error(`Could not acquire wake lock: ${M}`)}}let b=!1;function v(){n(1,b=!0)}let w=!1;function p(){n(2,w=!0)}let _=!1;function O(){n(3,_=!0)}function I(){K.rollback()}function C(M){b=M,n(1,b)}function y(M){w=M,n(2,w)}function h(M){_=M,n(3,_)}return e.$$.update=()=>{e.$$.dirty&4096&&(u?n(0,i="Wake Lock On"):n(0,i="Wake Lock Off")),e.$$.dirty&8192&&n(4,o=r),e.$$.dirty&8192&&console.log(r)},[i,b,w,_,o,s,l,f,v,p,O,I,u,r,C,y,h]}class zt extends oe{constructor(t){super(),ne(this,t,Nt,Lt,x,{})}}function Ft(e){let t,n,o,r=e[0]+1+"",s,u,l,i=Te(e[1])+"",f,b,v,w=e[7](e[2])+"",p,_,O,I;return{c(){t=k("div"),n=k("p"),o=T("Card "),s=T(r),u=V(),l=k("p"),f=T(i),b=V(),v=k("p"),p=T(w),H(t,"class",_="card no-"+e[6]+" "+(e[4]!=null?e[4]:"")+" svelte-5qmqfn"),H(t,"tabindex","0"),H(t,"role","button"),Pe(t,"border-color",e[5])},m(C,y){G(C,t,y),c(t,n),c(n,o),c(n,s),c(t,u),c(t,l),c(l,f),c(t,b),c(t,v),c(v,p),O||(I=[B(t,"click",e[14]),B(t,"keydown",e[15])],O=!0)},p(C,[y]){y&1&&r!==(r=C[0]+1+"")&&ve(s,r),y&2&&i!==(i=Te(C[1])+"")&&ve(f,i),y&4&&w!==(w=C[7](C[2])+"")&&ve(p,w),y&80&&_!==(_="card no-"+C[6]+" "+(C[4]!=null?C[4]:"")+" svelte-5qmqfn")&&H(t,"class",_),y&32&&Pe(t,"border-color",C[5])},i:D,o:D,d(C){C&&W(t),O=!1,Q(I)}}}function Te(e){return e.map((n,o)=>n===!0||n===null?(o+1).toString():"").join(" ")}function Vt(e,t,n){let o,r,s,u;U(e,de,a=>n(13,u=a));let{id:l}=t,{numberInformation:i}=t,{colourInformation:f}=t,{selected:b=!1}=t,{isHinted:v}=t,{isFinessed:w}=t,{isChopMoved:p}=t,{isCritical:_}=t,{onSelect:O}=t,I=null;function C(a){return a.map((L,N)=>L===!0||L===null?y(N):"").join(" ")}function y(a){return a<5?["r","y","b","w","g"][a]:o=="blacks"&&a==5?"bl":o=="rainbows"&&a==5||o=="rainbows-and-blacks"&&a==5?"m":o=="rainbows-and-blacks"&&a==6?"bl":(console.log("Index {index} out of range for card {self.id} and variant {variant}"),"err")}const h=()=>O(l),M=a=>(a.key==="Enter"||a.key===" ")&&O(l);return e.$$set=a=>{"id"in a&&n(0,l=a.id),"numberInformation"in a&&n(1,i=a.numberInformation),"colourInformation"in a&&n(2,f=a.colourInformation),"selected"in a&&n(8,b=a.selected),"isHinted"in a&&n(9,v=a.isHinted),"isFinessed"in a&&n(10,w=a.isFinessed),"isChopMoved"in a&&n(11,p=a.isChopMoved),"isCritical"in a&&n(12,_=a.isCritical),"onSelect"in a&&n(3,O=a.onSelect)},e.$$.update=()=>{if(e.$$.dirty&8192&&(o=u.variant),e.$$.dirty&8192&&n(6,r=u.numberOfCards),e.$$.dirty&7936&&n(5,s=b?"blue":_?"red":v?"orange":w?"aqua":p?"white":"gray"),e.$$.dirty&4){const a=f.findIndex(P=>P===!0);a===-1?n(4,I=null):n(4,I=y(a))}},[l,i,f,O,I,s,r,C,b,v,w,p,_,u,h,M]}class Et extends oe{constructor(t){super(),ne(this,t,Vt,Ft,x,{id:0,numberInformation:1,colourInformation:2,selected:8,isHinted:9,isFinessed:10,isChopMoved:11,isCritical:12,onSelect:3})}}function Ue(e,t,n){const o=e.slice();return o[3]=t[n],o}function Ke(e,t){let n,o,r;return o=new Et({props:{id:t[3].id,numberInformation:t[3].numberInformation,colourInformation:t[3].colourInformation,selected:t[1].has(t[3].id),isHinted:t[3].isHinted,isChopMoved:t[3].isChopMoved,isFinessed:t[3].isFinessed,isCritical:t[3].isCritical,onSelect:t[2]}}),{key:e,first:null,c(){n=Ie(),ie(o.$$.fragment),this.first=n},m(s,u){G(s,n,u),ee(o,s,u),r=!0},p(s,u){t=s;const l={};u&1&&(l.id=t[3].id),u&1&&(l.numberInformation=t[3].numberInformation),u&1&&(l.colourInformation=t[3].colourInformation),u&3&&(l.selected=t[1].has(t[3].id)),u&1&&(l.isHinted=t[3].isHinted),u&1&&(l.isChopMoved=t[3].isChopMoved),u&1&&(l.isFinessed=t[3].isFinessed),u&1&&(l.isCritical=t[3].isCritical),o.$set(l)},i(s){r||(X(o.$$.fragment,s),r=!0)},o(s){Z(o.$$.fragment,s),r=!1},d(s){s&&W(n),te(o,s)}}}function Pt(e){let t,n=[],o=new Map,r,s=fe(e[0]);const u=l=>l[3].id;for(let l=0;l<s.length;l+=1){let i=Ue(e,s,l),f=u(i);o.set(f,n[l]=Ke(f,i))}return{c(){t=k("div");for(let l=0;l<n.length;l+=1)n[l].c();H(t,"class","hand svelte-insnbi")},m(l,i){G(l,t,i);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(t,null);r=!0},p(l,[i]){i&7&&(s=fe(l[0]),at(),n=dt(n,i,u,1,l,s,o,t,ct,Ke,null,Ue),ft())},i(l){if(!r){for(let i=0;i<s.length;i+=1)X(n[i]);r=!0}},o(l){for(let i=0;i<n.length;i+=1)Z(n[i]);r=!1},d(l){l&&W(t);for(let i=0;i<n.length;i+=1)n[i].d()}}}function qt(e,t,n){let o,r;U(e,K,u=>n(0,o=u)),U(e,Y,u=>n(1,r=u));function s(u){r.has(u)?Y.update(l=>{const i=new Set(l);return i.delete(u),i}):Y.update(l=>{const i=new Set(l);return i.add(u),i})}return e.$$.update=()=>{e.$$.dirty&1&&console.log(o)},[o,r,s]}class Rt extends oe{constructor(t){super(),ne(this,t,qt,Pt,x,{})}}function jt(e){let t,n,o,r,s,u,l;return n=new zt({}),r=new Rt({}),{c(){t=k("main"),ie(n.$$.fragment),o=V(),ie(r.$$.fragment),s=V(),u=k("a"),u.textContent="Check out my code!",H(u,"href","https://github.com/jparkhouse/hanabi-tracker/"),H(u,"target","_blank")},m(i,f){G(i,t,f),ee(n,t,null),c(t,o),ee(r,t,null),c(t,s),c(t,u),l=!0},p:D,i(i){l||(X(n.$$.fragment,i),X(r.$$.fragment,i),l=!0)},o(i){Z(n.$$.fragment,i),Z(r.$$.fragment,i),l=!1},d(i){i&&W(t),te(n),te(r)}}}class Bt extends oe{constructor(t){super(),ne(this,t,null,jt,x,{})}}new Bt({target:document.getElementById("app")});
